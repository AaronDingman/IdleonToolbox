"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1508],{41508:function(l,e,o){o.d(e,{q5:function(){return t},ZX:function(){return getBuildCost},VR:function(){return getConstruction},Bt:function(){return getExtraMaxLevels},d4:function(){return getTowers}});var n=o(1356),u=o(94978);let createCogstructionData=(l,e)=>{let o=null==l?void 0:l.reduce((l,o,n)=>{let u=getCogstructionCogType(e[n]);if(!u)return l;let{a:t="",c:i="",d="",b:a="",e:r="",g:v="",k:s="",f:c=""}=o||{},g=[t,i,d,a,r,v,s,c].map((l,e)=>e<7?"".concat(getCogstructionValue(l)||"",","):getCogstructionValue(l)),p=e[n].includes("Player_")?e[n].split("Player_")[1]:"";return"".concat(l,"\n").concat(u,",").concat(p,",").concat(g.join(""))},"cog type,name,build_rate,flaggy_rate,exp_mult,exp_rate,build_rate_boost,flaggy_rate_boost,flaggy_speed,exp_rate_boost"),n="empties_x,empties_y",u=null==e?void 0:e.slice(0,96);for(let l=0;l<8;l++)for(let e=0;e<12;e++){let o=(7-l)*12+e;"Blank"===u[o]&&(n="".concat(n,"\n").concat(e,",").concat(l))}return{cogData:o,empties:n}},getCogstructionCogType=l=>{if("Blank"===l)return null;if(l.includes("Player_"))return"Character";if("CogY"===l)return"Yang_Cog";if("CogZ"===l)return"Omni_Cog";let e=Object.entries({ad:"Plus",di:"X",up:"Up",do:"Down",ri:"Right",le:"Left",ro:"Row",co:"Col",cr:"Omni"}).find(e=>{let[o]=e;return l.endsWith(o)});return e?"".concat(e[1],"_Cog"):"Cog"},getCogstructionValue=l=>{var e;return(null==l?void 0:null===(e=l.name)||void 0===e?void 0:e.includes("%"))?(null==l?void 0:l.value)>0&&!isNaN((null==l?void 0:l.value)/100)?(null==l?void 0:l.value)/100:"":(null==l?void 0:l.value)||""},getConstruction=(l,e)=>{let o=(null==l?void 0:l.CogMap)||(0,n.tryToParse)(null==l?void 0:l.CogM),u=(null==l?void 0:l.CogOrder)||(0,n.tryToParse)(null==l?void 0:l.CogO),t=createCogMap(o,null==u?void 0:u.length),i=parseConstruction(t),d=getFlags(l,i,u,e),a=createCogstructionData(i,u);return{...d,cogstruction:a}},getFlags=(l,e,o,u)=>{let t=(null==l?void 0:l.FlagUnlock)||(0,n.tryToParse)(null==l?void 0:l.FlagU),i=(null==l?void 0:l.FlagsPlaced)||(0,n.tryToParse)(null==l?void 0:l.FlagP);return parseFlags(t,i,e,o,u)},parseConstruction=l=>null==l?void 0:l.map(l=>{var e;return null===(e=Object.entries(l))||void 0===e?void 0:e.reduce((l,e)=>{let[o,n]=e;return(null===u.cogKeyMap||void 0===u.cogKeyMap?void 0:u.cogKeyMap[o])&&(null===u.cogKeyMap||void 0===u.cogKeyMap?void 0:u.cogKeyMap[o])!=="_"?{...l,[o]:{name:null===u.cogKeyMap||void 0===u.cogKeyMap?void 0:u.cogKeyMap[o],value:n}}:{...l,[o]:n}},{})}),createCogMap=(l,e)=>{let o=[];for(let n=0;n<e;n++)o[n]=(null==l?void 0:l[n])||{};return o},parseFlags=(l,e,o,n,t)=>{var i,d,a,r;let v=null==l?void 0:l.reduce((l,t,i)=>{let d=null==n?void 0:n[i],a=null==o?void 0:o[i];return[...l,{currentAmount:-11===t?null===u.flagsReqs||void 0===u.flagsReqs?void 0:u.flagsReqs[i]:parseFloat(t),requiredAmount:null===u.flagsReqs||void 0===u.flagsReqs?void 0:u.flagsReqs[i],flagPlaced:null==e?void 0:e.includes(i),cog:{name:d,stats:a}}]},[]),s=null==o?void 0:o.map((l,e)=>({...l,name:null==n?void 0:n[e]})).filter(l=>{let{name:e}=l;return null==e?void 0:e.includes("Player_")}).reduce((l,e)=>{let{a:o}=e;return l+((null==o?void 0:o.value)||0)},0),c=Array(96).fill(0);for(let l=0;l<8;l++)for(let e=0;e<12;e++){let o=(7-l)*12+e,n=null==v?void 0:null===(a=v[o])||void 0===a?void 0:null===(d=a.cog)||void 0===d?void 0:d.stats,u=getAffectedIndexes(null==n?void 0:n.h,e,l);if((null==u?void 0:u.length)>0){u=null==u?void 0:u.map(l=>{let[e,o]=l;return(7-o)*12+e});let{e:l,f:e,g:t}=n||{};(l||e||t)&&(null==u||u.forEach(l=>{var e,n;let{e:u,f:t,g:i}=(null==v?void 0:null===(n=v[o])||void 0===n?void 0:null===(e=n.cog)||void 0===e?void 0:e.stats)||{};if((null==c?void 0:c[l])===0)c[l]={e:u,f:t,g:i};else{let{e:e,f:o,g:n}=c[l]||{};c[l]={e:{...e,value:((null==e?void 0:e.value)||0)+((null==u?void 0:u.value)||0)},f:{...o,value:((null==o?void 0:o.value)||0)+((null==t?void 0:t.value)||0)},g:{...n,value:((null==n?void 0:n.value)||0)+((null==i?void 0:i.value)||0)}}}}))}}let g=0,p=0,f=0,C=null!==(r=null==t?void 0:null===(i=t.gemShopPurchases)||void 0===i?void 0:i.find((l,e)=>118===e))&&void 0!==r?r:0,y=null==v?void 0:v.map((l,e)=>{var o,n,u,t,i,d,a,r,v,s,C,y,h,m,M,b,_,w,x,k,T,P;let{cog:B}=l||{},{e:F,f:R,g:K}=(null==c?void 0:c[e])||{},q=(null==F?void 0:F.value)>0&&(null==B?void 0:null===(n=B.stats)||void 0===n?void 0:null===(o=n.a)||void 0===o?void 0:o.value)>0?(null==B?void 0:null===(t=B.stats)||void 0===t?void 0:null===(u=t.a)||void 0===u?void 0:u.value)+(null==B?void 0:null===(d=B.stats)||void 0===d?void 0:null===(i=d.a)||void 0===i?void 0:i.value)*(null==F?void 0:F.value)/100:(null==B?void 0:null===(r=B.stats)||void 0===r?void 0:null===(a=r.a)||void 0===a?void 0:a.value)||0;g+=q,p+=(null==B?void 0:null===(s=B.stats)||void 0===s?void 0:null===(v=s.d)||void 0===v?void 0:v.value)>0?null==B?void 0:null===(y=B.stats)||void 0===y?void 0:null===(C=y.d)||void 0===C?void 0:C.value:0;let O=(null==K?void 0:K.value)>0&&(null==B?void 0:null===(m=B.stats)||void 0===m?void 0:null===(h=m.c)||void 0===h?void 0:h.value)>0?(null==B?void 0:null===(b=B.stats)||void 0===b?void 0:null===(M=b.c)||void 0===M?void 0:M.value)+(null==B?void 0:null===(w=B.stats)||void 0===w?void 0:null===(_=w.c)||void 0===_?void 0:_.value)*(null==K?void 0:K.value)/100:(null==B?void 0:null===(k=B.stats)||void 0===k?void 0:null===(x=k.c)||void 0===x?void 0:x.value)||0;return f+=O,{...l,cog:{...B,stats:{...null==B?void 0:B.stats,a:{...null==B?void 0:null===(T=B.stats)||void 0===T?void 0:T.a,value:q},c:{...null==B?void 0:null===(P=B.stats)||void 0===P?void 0:P.c,value:O}}}}});return{board:y,totalBuildRate:g,totalExpRate:p,totalFlaggyRate:f*(1+50*C/100),playersBuildRate:s}},getAffectedIndexes=(l,e,o)=>{let n=[];switch(l){case"diagonal":n.push([e-1,o-1],[e+1,o-1],[e-1,o+1],[e+1,o+1]);break;case"adjacent":n.push([e-1,o],[e,o+1],[e+1,o],[e,o-1]);break;case"up":n.push([e-1,o+2],[e,o+2],[e+1,o+2],[e-1,o+1],[e,o+1],[e+1,o+1]);break;case"right":n.push([e+2,o-1],[e+2,o],[e+2,o+1],[e+1,o-1],[e+1,o],[e+1,o+1]);break;case"down":n.push([e-1,o-2],[e,o-2],[e+1,o-2],[e-1,o-1],[e,o-1],[e+1,o-1]);break;case"left":n.push([e-2,o-1],[e-2,o],[e-2,o+1],[e-1,o-1],[e-1,o],[e-1,o+1]);break;case"row":for(let l=0;l<12;l++)e!==l&&n.push([l,o]);break;case"column":for(let l=0;l<8;l++)o!==l&&n.push([e,l]);break;case"corners":n.push([e-2,o-2],[e+2,o-2],[e-2,o+2],[e+2,o+2]);break;case"around":n.push([e,o-2],[e-1,o-1],[e,o-1],[e+1,o-1],[e-2,o],[e-1,o],[e+1,o],[e+2,o],[e-1,o+1],[e,o+1],[e+1,o+1],[e,o+2]);break;case"everything":for(let l=0;l<8;l++)for(let u=0;u<12;u++)(o!==l||e!==u)&&n.push([u,l])}return n},getTowers=l=>{let e=(null==l?void 0:l.TowerInfo)||(0,n.tryToParse)(null==l?void 0:l.Tower),o=(0,n.tryToParse)(null==l?void 0:l.TotemInfo)||(null==l?void 0:l.TotemInfo);return parseTowers(e,o)},parseTowers=(l,e)=>{var o;let n=null==e?void 0:e[0],t=null==n?void 0:n.reduce((l,e)=>l+e,0),i=Object.keys(u.towers).length,d=l.slice(54,62),a=0,r=0,v=null===(o=Object.entries(u.towers))||void 0===o?void 0:o.map(e=>{let[o,n]=e,u=null==l?void 0:l[null==n?void 0:n.index];return(null==n?void 0:n.index)>=9&&(null==n?void 0:n.index)<=17&&u>50&&(a+=u-50),r+=u,{...n,name:o,level:u,nextLevel:u+1===l[n.index+i],progress:null==l?void 0:l[(null==n?void 0:n.index)+12+2*i],inProgress:null==d?void 0:d.includes(null==n?void 0:n.index),slot:null==d?void 0:d.findIndex(l=>l===(null==n?void 0:n.index))}});return{data:v,buildMultiplier:null===u.randomList||void 0===u.randomList?void 0:u.randomList[13].split(" "),wizardOverLevels:a,totalLevels:r,totalWaves:t,towersTwo:null==l?void 0:l[2]}},getBuildCost=(l,e,o,n)=>{if(0===n)return 20*Math.pow(e+1,2)*Math.pow(1.6,e+1);{var u;let t=Number(null==l?void 0:null===(u=l.buildMultiplier)||void 0===u?void 0:u[n]);return t*Math.pow(o,e)}},t=[250,500,750,1e3,1250,1500,2500],getConstructionMasteryBonus=(l,e)=>6===e?l>=(null==t?void 0:t[6])?30:0:4===e?l>=(null==t?void 0:t[3])?100:0:5===e?l>=(null==t?void 0:t[5])?100:0:3===e&&l>=(null==t?void 0:t[1])?35:0,getExtraMaxLevels=(l,e,o)=>50===e?Math.round(2*o+getConstructionMasteryBonus(l,6,0)):101===e?getConstructionMasteryBonus(l,4,0):100===e?getConstructionMasteryBonus(l,5,0):15===e?getConstructionMasteryBonus(l,3,0):0}}]);