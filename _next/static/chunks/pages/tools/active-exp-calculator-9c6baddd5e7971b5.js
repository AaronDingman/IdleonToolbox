(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6584],{9602:function(e,t,n){"use strict";var l=n(4836);t.Z=void 0;var r=l(n(4938)),i=n(5893),a=(0,r.default)((0,i.jsx)("path",{d:"m10 16.5 6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"PlayCircleOutline");t.Z=a},9813:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/active-exp-calculator",function(){return n(8967)}])},8967:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var l=n(2729),r=n(5893),i=n(7294),a=n(9574),o=n(1599),u=n(1233),s=n(1903),d=n(8972),c=n(9602),p=n(4674),x=n(1490),m="undefined"==typeof window?i.useEffect:i.useLayoutEffect,h=({isPlaying:e,duration:t,startAt:n=0,updateInterval:l=0,onComplete:r,onUpdate:a})=>{let[o,u]=(0,i.useState)(n),s=(0,i.useRef)(0),d=(0,i.useRef)(n),c=(0,i.useRef)(-1e3*n),p=(0,i.useRef)(null),x=(0,i.useRef)(null),h=(0,i.useRef)(null),v=e=>{let n=e/1e3;if(null===x.current){x.current=n,p.current=requestAnimationFrame(v);return}let r=n-x.current,i=s.current+r;x.current=n,s.current=i;let a=d.current+(0===l?i:(i/l|0)*l),o=d.current+i,c="number"==typeof t&&o>=t;u(c?t:a),c||(p.current=requestAnimationFrame(v))},f=()=>{p.current&&cancelAnimationFrame(p.current),h.current&&clearTimeout(h.current),x.current=null},g=(0,i.useCallback)(t=>{f(),s.current=0;let l="number"==typeof t?t:n;d.current=l,u(l),e&&(p.current=requestAnimationFrame(v))},[e,n]);return m(()=>{if(null==a||a(o),t&&o>=t){c.current+=1e3*t;let{shouldRepeat:e=!1,delay:n=0,newStartAt:l}=(null==r?void 0:r(c.current/1e3))||{};e&&(h.current=setTimeout(()=>g(l),1e3*n))}},[o,t]),m(()=>(e&&(p.current=requestAnimationFrame(v)),f),[e,t,l]),{elapsedTime:o,reset:g}},v=(e,t,n)=>{let l=e/2,r=t/2,i=l-r,a=2*i,o="clockwise"===n?"1,0":"0,1";return{path:`m ${l},${r} a ${i},${i} 0 ${o} 0,${a} a ${i},${i} 0 ${o} 0,-${a}`,pathLength:2*Math.PI*i}},f=(e,t)=>0===e||e===t?0:"number"==typeof t?e-t:0,g=e=>({position:"relative",width:e,height:e}),w={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},y=(e,t,n,l)=>0===l?t:t+n*(e/l),j=e=>{var t,n;return null!=(n=null==(t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,n,l)=>`#${t}${t}${n}${n}${l}${l}`).substring(1).match(/.{2}/g))?void 0:t.map(e=>parseInt(e,16)))?n:[]},k=(e,t)=>{var n;let{colors:l,colorsTime:r,isSmoothColorTransition:i=!0}=e;if("string"==typeof l)return l;let a=null!=(n=null==r?void 0:r.findIndex((e,n)=>e>=t&&t>=r[n+1]))?n:-1;if(!r||-1===a)return l[0];if(!i)return l[a];let o=r[a]-t,u=r[a]-r[a+1],s=j(l[a]),d=j(l[a+1]);return`rgb(${s.map((e,t)=>0|y(o,e,d[t]-e,u)).join(",")})`},C=e=>{let{duration:t,initialRemainingTime:n,updateInterval:l,size:r=180,strokeWidth:a=12,trailStrokeWidth:o,isPlaying:u=!1,rotation:s="clockwise",onComplete:d,onUpdate:c}=e,p=(0,i.useRef)(),{path:x,pathLength:m}=v(r,Math.max(a,null!=o?o:0),s),{elapsedTime:g}=h({isPlaying:u,duration:t,startAt:f(t,n),updateInterval:l,onUpdate:"function"==typeof c?e=>{let n=Math.ceil(t-e);n!==p.current&&(p.current=n,c(n))}:void 0,onComplete:"function"==typeof d?e=>{var n;let{shouldRepeat:l,delay:r,newInitialRemainingTime:i}=null!=(n=d(e))?n:{};if(l)return{shouldRepeat:l,delay:r,newStartAt:f(t,i)}}:void 0}),w=t-g;return{elapsedTime:g,path:x,pathLength:m,remainingTime:Math.ceil(w),rotation:s,size:r,stroke:k(e,w),strokeDashoffset:y(g,0,m,t),strokeWidth:a}},F=e=>{let{children:t,strokeLinecap:n,trailColor:l,trailStrokeWidth:r}=e,{path:a,pathLength:o,stroke:u,strokeDashoffset:s,remainingTime:d,elapsedTime:c,size:p,strokeWidth:x}=C(e);return i.createElement("div",{style:g(p)},i.createElement("svg",{width:p,height:p,xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:a,fill:"none",stroke:null!=l?l:"#d9d9d9",strokeWidth:null!=r?r:x}),i.createElement("path",{d:a,fill:"none",stroke:u,strokeLinecap:null!=n?n:"round",strokeWidth:x,strokeDasharray:o,strokeDashoffset:s})),"function"==typeof t&&i.createElement("div",{style:w},t({remainingTime:d,elapsedTime:c,color:u})))};F.displayName="CountdownCircleTimer";var R=n(2962);function T(){let e=(0,l._)(["\n  && {\n    width: 230px;\n\n    .MuiSelect-select {\n      display: flex;\n      align-items: center;\n      gap: 15px;\n    }\n\n    label.Mui-focused {\n      color: rgba(255, 255, 255, 0.7);\n    }\n  }\n"]);return T=function(){return e},e}function b(){let e=(0,l._)(["\n  && {\n    display: flex;\n    gap: 15px\n  }\n"]);return b=function(){return e},e}function E(){let e=(0,l._)(["\n  .selection {\n    display: flex;\n    align-items: baseline;\n    gap: 15px;\n  }\n\n\n  .wrapper {\n    display: flex;\n    gap: 50px;\n  }\n\n  .character-wrapper {\n    margin-top: 30px;\n    display: flex;\n    flex-direction: column;\n    gap: 30px;\n  }\n\n  .timer {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    color: white;\n  }\n\n  .text {\n    color: white;\n  }\n\n  .value {\n    font-size: 40px;\n  }\n\n  .info {\n    max-width: 360px;\n    margin: 40px auto 0;\n    text-align: center;\n    font-size: 16px;\n  }\n"]);return E=function(){return e},e}let $=(0,o.Z)(s.Z)(T()),S=(0,o.Z)(d.Z)(b()),_=o.Z.div(E());var P=()=>{let{state:e}=(0,i.useContext)(x.I),[t,n]=(0,i.useState)([]),[l,o]=(0,i.useState)({}),[s,d]=(0,i.useState)(0),[m,h]=(0,i.useState)(0),[v,f]=(0,i.useState)(!1),[g,w]=(0,i.useState)(0),[y,j]=(0,i.useState)(null);(0,i.useEffect)(()=>{var t;let l=null==e?void 0:null===(t=e.characters)||void 0===t?void 0:t.map(e=>{let{name:t,skillsInfo:n,class:l}=e;return{name:t,charClass:l,...null==n?void 0:n.character}}),r=null==l?void 0:l[0];o(r),h(((null==r?void 0:r.exp)/(null==r?void 0:r.expReq)*100).toFixed(2)),d(((null==r?void 0:r.exp)/(null==r?void 0:r.expReq)*100).toFixed(2)),n(l)},[]),(0,i.useEffect)(()=>{h(((null==l?void 0:l.exp)/(null==l?void 0:l.expReq)*100).toFixed(2)),d(((null==l?void 0:l.exp)/(null==l?void 0:l.expReq)*100).toFixed(2)),j(null)},[l]);let k=(e,t)=>{let{expReq:n}=l,r=n*(parseInt(parseFloat(e).toFixed(2).replace(".",""))/1e4),i=n*(parseInt(parseFloat(t).toFixed(2).replace(".",""))/1e4),o=i-r,u=o/10;return{expFarmed:o,expPerMinute:u,expPerHour:60*u,timeLeft:(0,a.splitTime)((n-r)/u/60)}},C=e=>{d(e);let t=k(m,e);j((null==t?void 0:t.expFarmed)>0?t:null),(null==t?void 0:t.expFarmed)>0&&j(t)},T=e=>{h(e);let t=k(e,s);j((null==t?void 0:t.expFarmed)>0?t:null),(null==t?void 0:t.expFarmed)>0&&j(t)};return(0,r.jsxs)(_,{children:[(0,r.jsx)(R.PB,{title:"Idleon Toolbox | Active Exp Calculator",description:"Calculate how much experience you get when playing actively"}),(0,r.jsxs)(u.Z,{gap:5,flexWrap:"wrap",sx:{flexDirection:{xs:"column-reverse",sm:"row"}},children:[(0,r.jsxs)("div",{className:"character-wrapper",children:[(0,r.jsxs)(u.Z,{direction:"row",flexWrap:"wrap",children:[(0,r.jsx)($,{id:"select",label:"Character",value:l,onChange:e=>o(e.target.value),select:!0,children:null==t?void 0:t.map((e,t)=>(0,r.jsxs)(S,{value:e,children:[(0,r.jsx)("img",{src:"".concat(a.prefix,"icons/").concat(null==e?void 0:e.charClass,"_Icon.png"),alt:""}),null==e?void 0:e.name]},(null==e?void 0:e.name)+t))}),(0,r.jsx)(p.Z,{"aria-label":"delete",onClick:()=>{j(null),v?w(e=>e+1):f(!0)},children:(0,r.jsx)(c.Z,{})})]}),(0,r.jsx)($,{label:"Start Percentage",value:m,type:"number",onChange:e=>T(e.target.value)}),(0,r.jsx)($,{label:"End Percentage",value:s,type:"number",onChange:e=>C(e.target.value)}),(0,r.jsxs)("div",{className:"details",children:[(0,r.jsxs)("div",{children:["Level: ",null==l?void 0:l.level]}),(0,r.jsxs)("div",{children:["Current percentage: ",((null==l?void 0:l.exp)/(null==l?void 0:l.expReq)*100).toFixed(2),"%"]}),(0,r.jsxs)("div",{children:["Current exp: ",(0,a.kFormatter)(null==l?void 0:l.exp)]}),(0,r.jsxs)("div",{children:["Required exp to level: ",(0,a.kFormatter)(null==l?void 0:l.expReq)]}),y?(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"Results"}),(0,r.jsxs)("div",{children:["Exp farmed: ",(0,a.kFormatter)(null==y?void 0:y.expFarmed)]}),(0,r.jsxs)("div",{children:["Exp per minute: ",(0,a.kFormatter)(null==y?void 0:y.expPerMinute)]}),(0,r.jsxs)("div",{children:["Exp per hour: ",(0,a.kFormatter)(null==y?void 0:y.expPerHour)]}),(0,r.jsxs)("div",{children:["Time to lv up: ",null==y?void 0:y.timeLeft]})]}):null]})]}),(0,r.jsx)(F,{isPlaying:v,duration:600,colors:[["#15aee1"]],children:e=>{let{remainingTime:t}=e;return 0===t?(0,r.jsx)("div",{className:"timer",children:"Done!"}):(0,r.jsxs)("div",{className:"timer",children:[(0,r.jsx)("div",{className:"text",children:"Remaining"}),(0,r.jsx)("div",{className:"value",children:t}),(0,r.jsx)("div",{className:"text",children:"seconds"})]})}},g)]})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=9813)}),_N_E=e.O()}]);