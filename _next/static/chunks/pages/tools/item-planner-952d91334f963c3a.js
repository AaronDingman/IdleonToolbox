(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2731],{9983:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/item-planner",function(){return c(1844)}])},1844:function(l,c,a){"use strict";a.r(c),a.d(c,{"default":function(){return Z}});var m=a(5893),n=a(7713),o=a(7294),d=a(5949),p=a(417),q=a(6447),r=a(480),s=a(1594),t=a(5861),e=a(1903),f=a(5071),u=a(4897),v=a(7702),w=a(3321),x=a(7410),y=a(4674),z=a(4895),A=a(6540),B=a(8364),b=a(5934),C=a(5231),D=a(6242),E=a(4267);function F(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function G(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function H(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){G(d,a,c[a])})}return d}function I(a,c){if(a){if("string"==typeof a)return F(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return F(a,c)}}function g(){var a,b,c=(a=["\n  width: 40px;\n"],b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}})));return g=function(){return c},c}var J=b.Z.img(g()),K=function(b){var c=b.itemName,a=b.owners;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(t.Z,{fontWeight:"bold",variant:"h5",children:(0,v.cleanUnderscore)(c)}),(0,m.jsx)(q.Z,{children:(0,m.jsx)(q.Z,{direction:"row",children:(null==a?void 0:a.length)>0?null==a?void 0:a.map(function(a,b){return(0,m.jsx)("div",{children:(0,m.jsx)(t.Z,{children:a})},b+""+a)}):(0,m.jsx)(t.Z,{children:"None"})})})]})},L=function(a){var b,k=a.inventoryItems,c=a.itemsList,g=void 0===c?[]:c,d=a.copies,l=void 0===d?1:d,e=a.showEquips,h=void 0===e||e,f=a.showFinishedItems,i=void 0===f||f,j=(0,o.useMemo)(function(){var a,b,c;return a=g,b=h,c=i,null==a?void 0:a.reduce(function(d,a){if(!b&&(null==a?void 0:a.type)==="Equip")return d;var e,f=(0,x.AN)(k,null==a?void 0:a.itemName),g=f.amount,h=f.owner;return!c&&g>=(null==a?void 0:a.itemQuantity)?d:H({},d,G({},null==a?void 0:a.subType,((function(a){if(Array.isArray(a))return F(a)})(e=(null==d?void 0:d[null==a?void 0:a.subType])||[])||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([H({},a,{quantityOwned:g,owner:h})])))},{})},[g,h,i]);return(0,m.jsx)(q.Z,{flexWrap:"wrap",direction:"row",gap:4,children:null===(b=Object.entries(j))|| void 0===b?void 0:b.map(function(f,g){var a,b,c=(b=2,function(a){if(Array.isArray(a))return a}(a=f)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||I(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=c[0],e=c[1];return(0,m.jsx)(D.Z,{children:(0,m.jsxs)(E.Z,{children:[(0,m.jsx)("span",{className:"title",children:(0,v.cleanUnderscore)((0,v.pascalCase)(d))}),(0,m.jsx)(q.Z,{flexWrap:"wrap",direction:"row",gap:3,children:null==e?void 0:e.map(function(a,f){var b=a.itemName,c=a.itemQuantity,g=a.rawName,j=a.type;if(!h&&"Equip"===j)return null;var e=(0,x.AN)(k,b),d=e.amount,n=e.owner;return!i&&d>=c?null:(0,m.jsxs)(q.Z,{gap:1,alignItems:"center",children:[(0,m.jsx)(C.Z,{title:(0,m.jsx)(K,{itemName:b,owners:n}),children:(0,m.jsx)(J,{src:"".concat(v.prefix,"data/").concat(g,".png"),alt:""})}),(0,m.jsxs)(t.Z,{color:d>=parseInt(c)*l?"success.light":"",children:[(0,v.kFormatter)(d,2),"/",(0,v.kFormatter)(parseInt(c)*l,2)]})]},b+""+f)})})]})},d+""+g)})})};function M(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function N(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function O(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){N(d,a,c[a])})}return d}function P(b,a){return a||(a=b.slice(0)),Object.freeze(Object.defineProperties(b,{raw:{value:Object.freeze(a)}}))}function Q(a){return function(a){if(Array.isArray(a))return M(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||R(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(a,c){if(a){if("string"==typeof a)return M(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return M(a,c)}}function h(){var a=P(["\n  width: 50px;\n"]);return h=function(){return a},a}function i(){var a=P(["\n  padding: 15px;\n  margin-top: 15px;\n  margin-bottom: 25px;\n\n  .item-wrapper {\n    width: 105px;\n    height: 102px;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .buttons {\n    display: none;\n  }\n\n  .title {\n    font-size: 20px;\n    font-weight: bold;\n    display: inline-block;\n    margin-bottom: 10px;\n  }\n\n  .preview {\n    min-height: 77px;\n    min-width: 77px;\n  }\n\n  .controls {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    flex-wrap: wrap;\n    @media (max-width: 800px) {\n      padding: 10px;\n    }\n  }\n\n  .items-wrapper {\n    margin-top: 15px;\n\n    .items {\n      margin-top: 10px;\n      display: flex;\n      flex-wrap: wrap;\n      gap: 15px;\n    }\n  }\n\n  .content {\n    margin-top: 25px;\n    display: grid;\n    grid-template-columns: 1fr 3fr;\n    column-gap: 50px;\n  }\n\n  .crafts-container {\n    margin-top: 15px;\n  }\n"]);return i=function(){return a},a}function j(){var a=P(["\n  ","\n  && label.Mui-focused {\n    color: rgba(255, 255, 255, 0.7);\n  }\n"]);return j=function(){return a},a}function k(){var a=P(["\n  && {\n    color: white;\n  }\n"]);return k=function(){return a},a}var S=(0,d.D)({trim:!0}),T={rawName:"EquipmentTransparent108"},U=function(a){var c=a.name,b=a.items;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(t.Z,{fontWeight:"bold",variant:"h5",children:(0,v.cleanUnderscore)(c)}),(0,m.jsx)(q.Z,{direction:"row",gap:1,flexWrap:"wrap",children:null==b?void 0:b.map(function(a,c){var b=a.rawName,d=a.itemQuantity;return(0,m.jsxs)(q.Z,{alignItems:"center",children:[(0,m.jsx)(V,{src:"".concat(v.prefix,"data/").concat(b,".png"),alt:""}),(0,m.jsx)(t.Z,{children:d})]},b+""+c)})})]})},V=b.Z.img(h()),W=b.Z.div(i()),X=(0,b.Z)(e.Z)(j(),function(b){var a=b.width;return a?"width:".concat(a,";"):""}),Y=(0,b.Z)(f.Z)(k()),Z=function(b){var c,d,b=null!==b?b:function(a){throw a}(new TypeError("Cannot destructure undefined")),e=(0,o.useContext)(u.I),i=e.state,M=e.lastUpdated,V=e.dispatch,j=i.planner,a=void 0===j?{items:[],materials:[]}:j,N=(0,o.useState)(Object.keys(n.crafts)),P=N[0],k=(0,o.useState)(""),l=k[0],Z=k[1],t=(0,o.useState)([]),$=t[0],_=t[1],D=(0,o.useState)([]),f=D[0],aa=D[1],E=(0,o.useState)(T),g=E[0],ab=E[1],F=(0,o.useState)(!1),G=F[0],ac=F[1],H=(0,o.useState)(!1),I=H[0],ad=H[1],J=(0,o.useState)(!1),h=J[0],ae=J[1],K=(0,o.useState)(1),R=K[0],af=K[1],ag=(0,o.useRef)({buttons:[]});(0,o.useEffect)(function(){var b;ag.current.buttons=ag.current.buttons.slice(0,null==a?void 0:null===(b=a.items)|| void 0===b?void 0:b.length)},[null==a?void 0:a.items]),(0,o.useEffect)(function(){var a,b,c=Q((null==i?void 0:null===(a=i.characters)|| void 0===a?void 0:a.reduce(function(a,b){var c=b.inventory;return Q(a).concat(Q(c))},[]))||[]).concat(Q((null==i?void 0:null===(b=i.account)|| void 0===b?void 0:b.storage)||[]));aa(c),_(c)},[i,M]),(0,o.useEffect)(function(){(null==$?void 0:$.length)&&aa(h?Q($).concat(Q(ah)):$)},[h]);var ah=(0,o.useMemo)(function(){return h?null==i?void 0:i.characters.reduce(function(b,a){var c=a.tools,d=a.equipment,e=a.food;return Q(b).concat(Q(c),Q(d),Q(e))},[]).filter(function(a){return"Blank"!==a.rawName}).map(function(a){return(null==a?void 0:a.amount)?a:O({},a,{amount:1})}):[]},[h]),ai=function(a){Z(a),ab(a?n.crafts[a]:T)},aj=function(a){ag.current.buttons[a].style.display="block"},ak=function(a){ag.current.buttons[a].style.display="none"},al=function(b,f){var c,d=n.crafts[null==b?void 0:b.itemName];if(d){c=an(null==a?void 0:a.items,d,!1,!1,f);var e=Array.isArray(b)?b:(0,x.F6)(b);V({type:"planner",data:{materials:null==e?void 0:e.reduce(function(a,b){return an(a,b,!0,!1,f)},null==a?void 0:a.materials),items:c}})}},am=function(b,d){if((null==b?void 0:b.rawName)!==T.rawName){e=an(null==a?void 0:a.items,b,!1,!0,d);var e,c=Array.isArray(n.crafts[null==b?void 0:b.itemName])?n.crafts[null==b?void 0:b.itemName]:(0,x.F6)(n.crafts[null==b?void 0:b.itemName]);V({type:"planner",data:{materials:null==c?void 0:c.reduce(function(a,b){return an(a,b,!0,!0,d)},null==a?void 0:a.materials),items:e}}),af(1)}},an=function(a,b,f){var c=!(arguments.length>3)|| void 0===arguments[3]||arguments[3],d=arguments.length>4?arguments[4]:void 0,e=null==a?void 0:a.find(function(a){return(null==b?void 0:b.itemName)===(null==a?void 0:a.itemName)});return e?null==a?void 0:a.reduce(function(f,a){if((null==b?void 0:b.itemName)!==(null==a?void 0:a.itemName))return Q(f).concat([a]);var g=d?d*(null==b?void 0:b.itemQuantity):null==a?void 0:a.itemQuantity;return!c&&(null==e?void 0:e.itemQuantity)-g<=0?f:Q(f).concat([O({},e,{itemQuantity:c?(null==e?void 0:e.itemQuantity)+g:(null==e?void 0:e.itemQuantity)-g})])},[]):c?Q(a).concat([O({},b,{itemQuantity:(null==b?void 0:b.itemQuantity)*d})]):a};return(0,m.jsxs)(W,{children:[(0,m.jsxs)("div",{className:"controls",children:[(0,m.jsx)("div",{className:"preview",children:g?(0,m.jsx)("img",{src:"".concat(v.prefix,"data/").concat(null==g?void 0:g.rawName,".png"),alt:""}):null}),(0,m.jsx)(p.Z,{id:"item-locator",value:l,onChange:function(b,a){return ai(a)},autoComplete:!0,options:[l].concat(Q(P)),filterSelectedOptions:!0,filterOptions:S,getOptionLabel:function(a){return a?null==a?void 0:a.replace(/_/g," "):""},renderOption:function(c,a){var b;return a?(0,m.jsxs)(q.Z,O({gap:2},c,{direction:"row",children:[(0,m.jsx)("img",{width:24,height:24,src:"".concat(v.prefix,"data/").concat(null===n.crafts|| void 0===n.crafts?void 0:null===(b=n.crafts[a])|| void 0===b?void 0:b.rawName,".png"),alt:""}),null==a?void 0:a.replace(/_/g," ")]})):(0,m.jsx)(m.Fragment,{})},style:{width:300},renderInput:function(a){return(0,m.jsx)(X,O({},a,{label:"Item Name",variant:"outlined"}))}}),(0,m.jsx)(X,{value:R,width:"100px",inputProps:{min:1},onChange:function(b){var a;return af(null==b?void 0:null===(a=b.target)|| void 0===a?void 0:a.value)},type:"number",label:"Item Count",variant:"outlined"}),(0,m.jsx)(w.Z,{color:"primary",variant:"contained",onClick:function(){return am(g,R)},title:"Add Item",children:"Add"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)(r.Z,{control:(0,m.jsx)(Y,{checked:G,onChange:function(){return ac(!G)},name:"Show equips",color:"default"}),label:"Show equips"}),(0,m.jsx)(r.Z,{control:(0,m.jsx)(Y,{checked:I,onChange:function(){return ad(!I)},name:"Show Finished Items",color:"default"}),label:"Show Finished Items"}),(0,m.jsx)(r.Z,{control:(0,m.jsx)(Y,{checked:h,onChange:function(){return ae(!h)},name:"Include Equipped Items",color:"default"}),label:"Include Equipped Items"})]}),(null==a?void 0:null===(c=a.items)|| void 0===c?void 0:c.length)?(0,m.jsxs)("div",{className:"content",children:[(0,m.jsxs)("div",{className:"items-wrapper",children:[(0,m.jsx)("span",{className:"title",children:"Tracked Items"}),(0,m.jsx)("div",{className:"items",children:null==a?void 0:null===(d=a.items)|| void 0===d?void 0:d.map(function(a,b){return(0,m.jsxs)("div",{className:"item-wrapper",onMouseEnter:function(){return aj(b,"removeAll")},onMouseLeave:function(){return ak(b,"removeAll")},children:[(0,m.jsx)(s.Z,{badgeContent:(0,v.numberWithCommas)(null==a?void 0:a.itemQuantity),max:1e4,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:(0,m.jsx)(C.Z,{title:(0,m.jsx)(U,{name:null==a?void 0:a.itemName,items:(0,x.F6)(a)}),children:(0,m.jsx)("img",{src:"".concat(v.prefix,"data/").concat(null==a?void 0:a.rawName,".png"),alt:""},(null==a?void 0:a.rawName)+" "+b)})}),(0,m.jsxs)("div",{className:"buttons",ref:function(a){return ag.current.buttons[b]=a},children:[(0,m.jsx)(y.Z,{type:"bottom",size:"small",onClick:function(){return am(O({},a,{itemQuantity:1}),1)},children:(0,m.jsx)(A.Z,{})}),(0,m.jsx)(y.Z,{type:"bottom",size:"small",onClick:function(){return al(a,1)},children:(0,m.jsx)(z.Z,{})}),(0,m.jsx)(y.Z,{size:"small",onClick:function(){return al(a,null==a?void 0:a.itemQuantity)},children:(0,m.jsx)(B.Z,{})})]})]},(null==a?void 0:a.itemName)+""+b)})})]}),(0,m.jsxs)("div",{className:"crafts-container",children:[(0,m.jsx)("span",{className:"title",children:"Required Materials"}),(null==f?void 0:f.length)>0?(0,m.jsx)(L,{itemsList:null==a?void 0:a.materials,inventoryItems:f,showEquips:G,showFinishedItems:I}):null]})]}):null]})}}},function(a){a.O(0,[417,1330,9774,2888,179],function(){return a(a.s=9983)}),_N_E=a.O()}])