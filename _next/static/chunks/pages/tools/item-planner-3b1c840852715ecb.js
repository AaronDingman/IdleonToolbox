(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2731],{9983:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/item-planner",function(){return c(1844)}])},1844:function(l,c,a){"use strict";a.r(c),a.d(c,{"default":function(){return aj}});var m=a(5893),n=a(7713),o=a(7294),d=a(5949),p=a(5861),q=a(6447),e=a(1903),r=a(7109),s=a(4054),t=a(476),u=a(8061),v=a(480),w=a(6872),x=a(7358),y=a(8895),z=a(2797),A=a(417),B=a(1594),f=a(9368),C=a(865),D=a(3133),E=a(3321),F=a(7410),G=a(4674),H=a(3508),I=a(4895),J=a(4282),K=a(6540),L=a(8364),b=a(5934),M=a(5231),N=a(6242),O=a(4267);function P(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function Q(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function R(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){Q(d,a,c[a])})}return d}function S(a){return function(a){if(Array.isArray(a))return P(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||T(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(a,c){if(a){if("string"==typeof a)return P(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return P(a,c)}}function g(){var a,b,c=(a=["\n  width: 40px;\n"],b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}})));return g=function(){return c},c}var U=b.Z.img(g()),V=function(b){var c=b.itemName,a=b.owners;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(p.Z,{fontWeight:"bold",variant:"h5",children:(0,D.cleanUnderscore)(c)}),(0,m.jsx)(q.Z,{children:(0,m.jsx)(q.Z,{direction:"row",children:(null==a?void 0:a.length)>0?null==a?void 0:a.map(function(a,b){return(0,m.jsx)("div",{children:(0,m.jsxs)(p.Z,{children:[a,"\xa0"]})},b+""+a)}):(0,m.jsx)(p.Z,{children:"None"})})})]})},W=function(a){var b,e=a.inventoryItems,c=a.itemsList,f=void 0===c?[]:c,d=a.copies,i=void 0===d?1:d,g=a.itemDisplay,h=(0,o.useMemo)(function(){var a,b;return a=f,b=g,null==a?void 0:a.reduce(function(c,a){var i=(0,F.AN)(e,null==a?void 0:a.itemName),d=i.amount,f=i.owner;if("0"===b){var g,h=(null==a?void 0:a.itemQuantity)-d;return(null==a?void 0:a.type)==="Equip"&&h!==(null==a?void 0:a.itemQuantity)?((null===(g=(0,F.F6)(n.crafts[null==a?void 0:a.itemName]))|| void 0===g?void 0:g.map(function(a){var b=(0,F.AN)(e,null==a?void 0:a.itemName),c=b.amount,d=b.owner;return R({},a,{baseQuantity:null==a?void 0:a.itemQuantity,itemQuantity:(null==a?void 0:a.itemQuantity)*h,quantityOwned:c,owner:d})})).forEach(function(b){var e,f,a=null==c?void 0:null===(e=c[null==b?void 0:b.subType])|| void 0===e?void 0:e.find(function(a){return(null==a?void 0:a.itemName)===(null==b?void 0:b.itemName)}),g=null==c?void 0:null===(f=c[null==b?void 0:b.subType])|| void 0===f?void 0:f.filter(function(a){return(null==a?void 0:a.itemName)!==(null==b?void 0:b.itemName)});a&&h>0&&(null==a?void 0:a.itemQuantity)-d>(null==a?void 0:a.quantityOwned)&&(g=S(g||[]).concat([R({},a,{itemQuantity:(null==a?void 0:a.itemQuantity)-d})])),c=R({},c,Q({},null==b?void 0:b.subType,g))}),h>0&&(c=R({},c,Q({},null==a?void 0:a.subType,S((null==c?void 0:c[null==a?void 0:a.subType])||[]).concat([R({},a,{quantityOwned:0,owner:f,itemQuantity:h})])))),c):d>=(null==a?void 0:a.itemQuantity)?c:R({},c,Q({},null==a?void 0:a.subType,S((null==c?void 0:c[null==a?void 0:a.subType])||[]).concat([R({},a,{owner:f,quantityOwned:d})])))}return"1"!==b?c:R({},c,Q({},null==a?void 0:a.subType,S((null==c?void 0:c[null==a?void 0:a.subType])||[]).concat([R({},a,{quantityOwned:d,owner:f})])))},{})},[f,g,e]);return(0,m.jsx)(q.Z,{flexWrap:"wrap",direction:"row",gap:4,children:null===(b=Object.entries(h))|| void 0===b?void 0:b.map(function(f,h){var b,c,d=(c=2,function(a){if(Array.isArray(a))return a}(b=f)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(b,c)||T(b,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),e=d[0],a=d[1];return"0"!==g||(null==a?void 0:a.length)>0?(0,m.jsx)(N.Z,{variant:"outlined",children:(0,m.jsxs)(O.Z,{children:[(0,m.jsx)("span",{className:"title",children:(0,D.cleanUnderscore)((0,D.pascalCase)(e))}),(0,m.jsx)(q.Z,{flexWrap:"wrap",direction:"row",gap:3,children:null==a?void 0:a.map(function(b,e){var d=b.itemName,a=b.itemQuantity,f=b.rawName,c=(b.type,b.quantityOwned),h=b.owner;return(0,m.jsxs)(q.Z,{gap:1,alignItems:"center",children:[(0,m.jsx)(M.Z,{title:(0,m.jsx)(V,{itemName:d,owners:h}),children:(0,m.jsx)(U,{src:"".concat(D.prefix,"data/").concat(f,".png"),alt:""})}),(0,m.jsxs)(q.Z,{direction:"row",children:[(0,m.jsx)(M.Z,{title:c>=1e3?(0,D.numberWithCommas)(c):"",children:(0,m.jsx)(p.Z,{color:c>=("0"===g?parseInt(a):parseInt(a)*i)?"success.light":"",children:(0,D.notateNumber)(c)})}),(0,m.jsx)(M.Z,{title:a>=1e3?(0,D.numberWithCommas)(a):"",children:(0,m.jsxs)(p.Z,{color:c>=("0"===g?parseInt(a):parseInt(a)*i)?"success.light":"",children:["/","0"===g?(0,D.notateNumber)(parseInt(a)):(0,D.notateNumber)(parseInt(a)*i,2)]})})]})]},d+""+e)})})]})},e+""+h):null})})},X=a(2962);function Y(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function Z(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function $(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){Z(d,a,c[a])})}return d}function _(b,a){return a||(a=b.slice(0)),Object.freeze(Object.defineProperties(b,{raw:{value:Object.freeze(a)}}))}function aa(a){return function(a){if(Array.isArray(a))return Y(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||ab(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ab(a,c){if(a){if("string"==typeof a)return Y(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return Y(a,c)}}function h(){var a=_(["\n  width: 50px;\n"]);return h=function(){return a},a}function i(){var a=_(["\n  padding: 15px;\n  margin-top: 15px;\n  margin-bottom: 25px;\n\n  .item-wrapper {\n    width: 105px;\n    height: 102px;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .title {\n    font-size: 20px;\n    font-weight: bold;\n    display: inline-block;\n    margin-bottom: 10px;\n  }\n\n  .preview {\n    min-height: 77px;\n    min-width: 77px;\n  }\n\n  .controls {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    flex-wrap: wrap;\n    @media (max-width: 800px) {\n      padding: 10px;\n    }\n  }\n\n  .items-wrapper {\n    margin-top: 15px;\n\n    .items {\n      margin-top: 10px;\n      display: flex;\n      flex-wrap: wrap;\n      gap: 15px;\n    }\n  }\n\n  .content {\n    margin-top: 25px;\n    display: grid;\n    grid-template-columns: 1fr 3fr;\n    column-gap: 50px;\n  }\n\n  .crafts-container {\n    margin-top: 15px;\n  }\n"]);return i=function(){return a},a}function j(){var a=_(["\n  ","\n  && label.Mui-focused {\n    color: rgba(255, 255, 255, 0.7);\n  }\n"]);return j=function(){return a},a}function k(){var a=_(["\n  && {\n    color: white;\n  }\n"]);return k=function(){return a},a}var ac=(0,d.D)({trim:!0}),ad={rawName:"EquipmentTransparent108"},ae=function(a){var c=a.name,b=a.items;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(p.Z,{fontWeight:"bold",variant:"h5",children:(0,D.cleanUnderscore)(c)}),(0,m.jsx)(q.Z,{direction:"row",gap:1,flexWrap:"wrap",children:null==b?void 0:b.map(function(a,c){var b=a.rawName,d=a.itemQuantity;return(0,m.jsxs)(q.Z,{alignItems:"center",children:[(0,m.jsx)(af,{src:"".concat(D.prefix,"data/").concat(b,".png"),alt:""}),(0,m.jsx)(p.Z,{children:d})]},b+""+c)})})]})},af=b.Z.img(h()),ag=b.Z.div(i()),ah=(0,b.Z)(e.Z)(j(),function(b){var a=b.width;return a?"width:".concat(a,";"):""}),ai=(0,b.Z)(f.Z)(k()),aj=function(c){var d,f,c=null!==c?c:function(a){throw a}(new TypeError("Cannot destructure undefined")),g=(0,o.useContext)(C.I),a=g.state,S=g.lastUpdated,U=g.dispatch,i=a.planner,b=void 0===i?{sections:[]}:i,T=(0,o.useState)(Object.keys(n.crafts)),V=T[0],j=(0,o.useState)({"0":""}),Y=j[0],_=j[1],k=(0,o.useState)([]),ab=k[0],af=k[1],l=(0,o.useState)([ad]),aj=l[0],ak=l[1],N=(0,o.useState)("0"),al=N[0],am=N[1],O=(0,o.useState)(!1),h=O[0],an=O[1],P=(0,o.useState)(1),ao=P[0],ap=P[1],Q=(0,o.useState)({}),aq=Q[0],ar=Q[1],R=(0,o.useState)(),as=R[0],at=R[1],au=(0,o.useMemo)(function(){return(0,F.tP)(null==a?void 0:a.characters,h)},[h]),av=(0,o.useMemo)(function(){return(0,F.Nx)(null==a?void 0:a.characters,null==a?void 0:a.account)},[null==a?void 0:a.characters,null==a?void 0:a.account]);(0,o.useEffect)(function(){var c;(null==a?void 0:a.characters)||(null==a?void 0:a.account)?af(h?aa(av||[]).concat(aa(au||[])):av):af(n.itemsArray),ak(null==b?void 0:null===(c=b.sections)|| void 0===c?void 0:c.map(function(){return ad}))},[a,S,h]);var aw=function(a,b){var c=aj.map(function(c,d){return d===b?a?n.crafts[a]:ad:c});_($({},Y,Z({},"".concat(b),a))),ak(c)},ax=function(e,c,i){var d,f,a=null==b?void 0:null===(d=b.sections)|| void 0===d?void 0:d[e],g=n.crafts[null==c?void 0:c.itemName];if(g){f=aA(null==a?void 0:a.items,g,!1,!1,i);var h=Array.isArray(c)?c:(0,F.F6)(c);U({type:"planner",data:{sections:az(e,{materials:null==h?void 0:h.reduce(function(a,b){return aA(a,b,!0,!1,i)},null==a?void 0:a.materials),items:f,name:null==a?void 0:a.name})}})}},ay=function(d,a,h){if((null==a?void 0:a.rawName)!==ad.rawName){var e,f,c=null==b?void 0:null===(e=b.sections)|| void 0===e?void 0:e[d];f=aA(null==c?void 0:c.items,a,!1,!0,h);var g=Array.isArray(n.crafts[null==a?void 0:a.itemName])?n.crafts[null==a?void 0:a.itemName]:(0,F.F6)(n.crafts[null==a?void 0:a.itemName]);U({type:"planner",data:{sections:az(d,{materials:null==g?void 0:g.reduce(function(a,b){return aA(a,b,!0,!0,h)},null==c?void 0:c.materials),items:f,name:null==c?void 0:c.name})}}),_($({},Y,Z({},d,""))),ap(1)}},az=function(c,d){var a;return null==b?void 0:null===(a=b.sections)|| void 0===a?void 0:a.map(function(a,b){return c===b?d:a})},aA=function(a,b,f){var d=!(arguments.length>3)|| void 0===arguments[3]||arguments[3],c=arguments.length>4?arguments[4]:void 0,e=null==a?void 0:a.find(function(a){return(null==b?void 0:b.itemName)===(null==a?void 0:a.itemName)});return e?null==a?void 0:a.reduce(function(f,a){if((null==b?void 0:b.itemName)!==(null==a?void 0:a.itemName))return aa(f).concat([a]);var g=c?c*(null==b?void 0:b.itemQuantity):null==a?void 0:a.itemQuantity;return!d&&(null==e?void 0:e.itemQuantity)-g<=0?f:aa(f).concat([$({},e,{itemQuantity:d?(null==e?void 0:e.itemQuantity)+g:(null==e?void 0:e.itemQuantity)-g,itemCount:parseFloat(c)})])},[]):d?aa(a||[]).concat([$({},b,{itemQuantity:(null==b?void 0:b.itemQuantity)*c,itemCount:parseFloat(c)})]):a},aB=function(a){var c=b.sections.filter(function(c,b){return b!==a});_($({},Y,Z({},a,""))),U({type:"planner",data:{sections:c}})};return(0,m.jsxs)(ag,{children:[(0,m.jsx)(X.PB,{title:"Idleon Toolbox | Item Planner",description:"Useful tool to keep track of your crafting projects by tracking existing and missing materials"}),(null==a?void 0:a.characters)||(null==a?void 0:a.account)?null:(0,m.jsx)(p.Z,{component:"div",sx:{mb:2},variant:"caption",children:"* This tool will work better if you're logged in"}),(0,m.jsxs)(q.Z,{direction:"row",gap:5,children:[(0,m.jsxs)("div",{children:[(0,m.jsx)(q.Z,{direction:"row",alignItems:"center",children:(0,m.jsx)(e.Z,{sx:{mt:1},label:"Section name",placeholder:"Enter section name",onChange:function(a){return at(a.target.value)},InputProps:{endAdornment:(0,m.jsx)(r.Z,{position:"end",children:(0,m.jsx)(G.Z,{onClick:function(){var a=as||"section-".concat(Math.floor(100*Math.random()));U({type:"planner",data:{sections:aa((null==b?void 0:b.sections)||[]).concat([{items:[],materials:[],name:a}])}})},children:(0,m.jsx)(K.Z,{})})})}})}),(0,m.jsx)(M.Z,{title:"This will reset all sections and items",children:(0,m.jsxs)(E.Z,{sx:{mt:1},onClick:function(){_({"0":""}),ak([ad]),U({type:"planner",data:{sections:[]}})},children:[(0,m.jsx)(J.Z,{})," Reset all sections"]})})]}),(0,m.jsxs)(q.Z,{sx:{pl:1,mt:1},children:[(0,m.jsxs)(s.Z,{children:[(0,m.jsx)(t.Z,{id:"demo-radio-buttons-group-label",children:"Display"}),(0,m.jsxs)(u.Z,{row:!0,"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"0",name:"radio-buttons-group",onChange:function(a){return am(a.target.value)},children:[(0,m.jsx)(v.Z,{value:"0",control:(0,m.jsx)(w.Z,{}),label:"Show Missing Items"}),(0,m.jsx)(v.Z,{value:"1",control:(0,m.jsx)(w.Z,{}),label:"Show All Items"})]})]}),(0,m.jsx)(v.Z,{control:(0,m.jsx)(ai,{checked:h,onChange:function(){return an(!h)},name:"Include Equipped Items",color:"default"}),label:"Include Equipped Items"})]})]}),(0,m.jsx)(q.Z,{sx:{mt:2},children:(null==b?void 0:null===(d=b.sections)|| void 0===d?void 0:d.length)>0?null==b?void 0:null===(f=b.sections)|| void 0===f?void 0:f.map(function(b,a){var c,d=b.items,e=b.materials,f=b.name;return(0,m.jsxs)(x.Z,{children:[(0,m.jsx)(y.Z,{expandIcon:(0,m.jsx)(H.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,m.jsx)(p.Z,{children:f||"Accordion-".concat(a)})}),(0,m.jsxs)(z.Z,{children:[(0,m.jsxs)(E.Z,{onClick:function(){return aB(a)},children:[(0,m.jsx)(I.Z,{})," Remove Section"]}),(0,m.jsxs)("div",{className:"controls",children:[(0,m.jsx)("div",{className:"preview",children:(null==aj?void 0:aj[a])?(0,m.jsx)("img",{src:"".concat(D.prefix,"data/").concat(null==aj?void 0:null===(c=aj[a])|| void 0===c?void 0:c.rawName,".png"),alt:""}):null}),(0,m.jsx)(A.Z,{id:"item-locator",value:null==Y?void 0:Y[a],onChange:function(c,b){return aw(b,a)},autoComplete:!0,options:[null==Y?void 0:Y[a]].concat(aa(V)),filterSelectedOptions:!0,filterOptions:ac,getOptionLabel:function(a){return a?null==a?void 0:a.replace(/_/g," "):""},renderOption:function(c,a){var b;return a?(0,m.jsxs)(q.Z,$({gap:2},c,{direction:"row",children:[(0,m.jsx)("img",{width:24,height:24,src:"".concat(D.prefix,"data/").concat(null===n.crafts|| void 0===n.crafts?void 0:null===(b=n.crafts[a])|| void 0===b?void 0:b.rawName,".png"),alt:""}),null==a?void 0:a.replace(/_/g," ")]})):(0,m.jsx)("span",{style:{height:0}},"empty")},style:{width:300},renderInput:function(a){return(0,m.jsx)(ah,$({},a,{label:"Item Name",variant:"outlined"}))}}),(0,m.jsx)(ah,{value:ao,width:"100px",inputProps:{min:1},onChange:function(b){var a;return ap(null==b?void 0:null===(a=b.target)|| void 0===a?void 0:a.value)},type:"number",label:"Item Count",variant:"outlined"}),(0,m.jsx)(E.Z,{color:"primary",variant:"contained",onClick:function(){return ay(a,null==aj?void 0:aj[a],ao)},title:"Add Item",children:"Add"})]}),(0,m.jsxs)("div",{className:"content",children:[(0,m.jsxs)("div",{className:"items-wrapper",children:[(0,m.jsx)("span",{className:"title",children:"Tracked Items"}),(0,m.jsx)("div",{className:"items",children:null==d?void 0:d.map(function(b,c){return(0,m.jsxs)("div",{className:"item-wrapper",onMouseEnter:function(){return ar($({},aq,Z({},"".concat(a,"-").concat(c),!0)))},onMouseLeave:function(){return ar($({},aq,Z({},"".concat(a,"-").concat(c),!1)))},children:[(0,m.jsx)(B.Z,{badgeContent:(0,D.numberWithCommas)(null==b?void 0:b.itemQuantity),max:1e4,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:(0,m.jsx)(M.Z,{title:(0,m.jsx)(ae,{name:null==b?void 0:b.itemName,items:(0,F.F6)(b)}),children:(0,m.jsx)("img",{src:"".concat(D.prefix,"data/").concat(null==b?void 0:b.rawName,".png"),alt:""},(null==b?void 0:b.rawName)+" "+c)})}),(null==aq?void 0:aq["".concat(a,"-").concat(c)])?(0,m.jsxs)("div",{className:"buttons",children:[(0,m.jsx)(G.Z,{type:"bottom",size:"small",onClick:function(){return ay(a,$({},b,{itemQuantity:1}),1)},children:(0,m.jsx)(K.Z,{})}),(0,m.jsx)(G.Z,{type:"bottom",size:"small",onClick:function(){return ax(a,b,1)},children:(0,m.jsx)(I.Z,{})}),(0,m.jsx)(G.Z,{size:"small",onClick:function(){return ax(a,b,null==b?void 0:b.itemQuantity)},children:(0,m.jsx)(L.Z,{})})]}):null]},a+""+(null==b?void 0:b.itemName)+c)})})]}),(0,m.jsxs)("div",{className:"crafts-container",children:[(0,m.jsx)("span",{className:"title",children:"Required Materials"}),(null==ab?void 0:ab.length)>0?(0,m.jsx)(W,{itemsList:e,inventoryItems:ab,itemDisplay:al}):null]})]})]})]},"accordion-".concat(a))}):(0,m.jsx)(p.Z,{sx:{mt:3},variant:"h3",children:"Please add a section"})})]})}}},function(a){a.O(0,[7419,3536,4867,9774,2888,179],function(){return a(a.s=9983)}),_N_E=a.O()}])