(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8612],{66242:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(87462),i=n(63366),o=n(67294),l=n(86010),s=n(94780),a=n(90948),c=n(71657),d=n(90629),u=n(1588),x=n(34867);function getCardUtilityClass(e){return(0,x.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var m=n(85893);let v=["className","raised"],useUtilityClasses=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},getCardUtilityClass,t)},h=(0,a.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),Z=o.forwardRef(function(e,t){let n=(0,c.Z)({props:e,name:"MuiCard"}),{className:o,raised:s=!1}=n,a=(0,i.Z)(n,v),d=(0,r.Z)({},n,{raised:s}),u=useUtilityClasses(d);return(0,m.jsx)(h,(0,r.Z)({className:(0,l.Z)(u.root,o),elevation:s?8:void 0,ref:t,ownerState:d},a))});var p=Z},44267:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var r=n(87462),i=n(63366),o=n(67294),l=n(86010),s=n(94780),a=n(90948),c=n(71657),d=n(1588),u=n(34867);function getCardContentUtilityClass(e){return(0,u.Z)("MuiCardContent",e)}(0,d.Z)("MuiCardContent",["root"]);var x=n(85893);let m=["className","component"],useUtilityClasses=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},getCardContentUtilityClass,t)},v=(0,a.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),h=o.forwardRef(function(e,t){let n=(0,c.Z)({props:e,name:"MuiCardContent"}),{className:o,component:s="div"}=n,a=(0,i.Z)(n,m),d=(0,r.Z)({},n,{component:s}),u=useUtilityClasses(d);return(0,x.jsx)(v,(0,r.Z)({as:s,className:(0,l.Z)(u.root,o),ownerState:d,ref:t},a))});var Z=h},16195:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/guild",function(){return n(29274)}])},87153:function(e,t,n){"use strict";var r=n(85893),i=n(87357),o=n(81458),l=n(15861);n(67294),t.Z=e=>{let{percent:t,bgColor:n,label:s=!0,sx:a,boxSx:c={},pre:d}=e;return(0,r.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",...c},children:[d,(0,r.jsx)(i.Z,{sx:{width:"100%",mr:1},children:(0,r.jsx)(o.Z,{sx:{width:"100%",height:10,borderRadius:5,"& .MuiLinearProgress-bar":{backgroundColor:n||""},...a},variant:"determinate",value:t>100?100:t})}),s?(0,r.jsx)(i.Z,{children:(0,r.jsx)(l.Z,{variant:"body2",color:"text.secondary",children:"".concat(Math.round(t),"%")})}):null]})}},75712:function(e,t,n){"use strict";var r=n(85893),i=n(67294),o=n(98396),l=n(11703),s=n(40044);t.Z=e=>{let{tabs:t,children:n,onTabChange:a}=e,[c,d]=(0,i.useState)(0),u=(0,o.Z)(e=>e.breakpoints.down("md"),{noSsr:!0}),x=Array.isArray(n)?n:[n];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{centered:!u||u&&t.length<4,scrollButtons:!0,allowScrollButtonsMobile:!0,sx:{marginBottom:3},variant:u&&t.length>4?"scrollable":"standard",value:c,onChange:(e,t)=>{d(t),a&&a(t)},children:null==t?void 0:t.map((e,t)=>(0,r.jsx)(s.Z,{label:e},"".concat(e,"-").concat(t)))}),a?n:null==x?void 0:x.map((e,t)=>t===c?e:null)]})}},29274:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return guild}});var r=n(85893),i=n(2962),o=n(15861),l=n(51233),s=n(83321),a=n(66242),c=n(44267),d=n(67294),u=n(51626),x=n(75712),m=n(72882),v=n(90629),h=n(7906),Z=n(53184),p=n(53816),g=n(53252),j=n(63366),f=n(87462),b=n(94780),C=n(86010),y=n(47739),w=(0,n(88169).Z)((0,r.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),S=n(90948),M=n(71657),T=n(98216),G=n(1588),N=n(34867);function getTableSortLabelUtilityClass(e){return(0,N.Z)("MuiTableSortLabel",e)}let R=(0,G.Z)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),U=["active","children","className","direction","hideSortIcon","IconComponent"],useUtilityClasses=e=>{let{classes:t,direction:n,active:r}=e,i={root:["root",r&&"active"],icon:["icon",`iconDirection${(0,T.Z)(n)}`]};return(0,b.Z)(i,getTableSortLabelUtilityClass,t)},_=(0,S.ZP)(y.Z,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.active&&t.active]}})(({theme:e})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(e.vars||e).palette.text.secondary},"&:hover":{color:(e.vars||e).palette.text.secondary,[`& .${R.icon}`]:{opacity:.5}},[`&.${R.active}`]:{color:(e.vars||e).palette.text.primary,[`& .${R.icon}`]:{opacity:1,color:(e.vars||e).palette.text.secondary}}})),k=(0,S.ZP)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.icon,t[`iconDirection${(0,T.Z)(n.direction)}`]]}})(({theme:e,ownerState:t})=>(0,f.Z)({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none"},"desc"===t.direction&&{transform:"rotate(0deg)"},"asc"===t.direction&&{transform:"rotate(180deg)"})),E=d.forwardRef(function(e,t){let n=(0,M.Z)({props:e,name:"MuiTableSortLabel"}),{active:i=!1,children:o,className:l,direction:s="asc",hideSortIcon:a=!1,IconComponent:c=w}=n,d=(0,j.Z)(n,U),u=(0,f.Z)({},n,{active:i,direction:s,hideSortIcon:a,IconComponent:c}),x=useUtilityClasses(u);return(0,r.jsxs)(_,(0,f.Z)({className:(0,C.Z)(x.root,l),component:"span",disableRipple:!0,ownerState:u,ref:t},d,{children:[o,a&&!i?null:(0,r.jsx)(k,{as:c,className:(0,C.Z)(x.icon),ownerState:u})]}))});var D=n(295),I=n(1356),L=n(87357),Guild_GuildMembers=e=>{let{members:t,changes:n}=e,[i,l]=(0,d.useState)(),[s,a]=(0,d.useState)("desc"),[c,u]=(0,d.useState)("gpEarned");(0,d.useEffect)(()=>{l(getSortedMembers(t,c,s))},[t]);let getSortedMembers=(e,t,n)=>e.sort((e,r)=>"asc"===n?(null==e?void 0:e[t])-(null==r?void 0:r[t]):(null==r?void 0:r[t])-(null==e?void 0:e[t])),handleSort=(e,n)=>{a(n),u(e);let r=getSortedMembers(t,e,n);l(r)};return(0,r.jsx)(m.Z,{component:v.Z,children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(Z.Z,{children:(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(g.Z,{children:"Name"}),(0,r.jsx)(g.Z,{sortDirection:s,children:(0,r.jsx)(E,{direction:s,active:"level"===c,onClick:()=>handleSort("level","asc"===s?"desc":"asc"),children:"Level"})}),(0,r.jsx)(g.Z,{sortDirection:s,children:(0,r.jsx)(E,{direction:s,active:"gpEarned"===c,onClick:()=>handleSort("gpEarned","asc"===s?"desc":"asc"),children:"Earned GP"})}),(0,r.jsx)(g.Z,{children:"Wanted Bonus"})]})}),(0,r.jsx)(D.Z,{children:null==i?void 0:i.map((e,t)=>{var i;let{name:l,level:s,gpEarned:a,wantedBonus:c,rank:d}=e,u=null==n?void 0:null===(i=n.members)||void 0===i?void 0:i.find(e=>{let{name:t}=e;return t===l}),x=0;return u&&(x=a-(null==u?void 0:u.gpEarned)),l?(0,r.jsxs)(p.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,r.jsxs)(g.Z,{children:[d<5?(0,r.jsx)("img",{src:"".concat(I.prefix,"etc/GuildRank").concat(d,".png"),alt:"rank-".concat(d)}):(0,r.jsx)(L.Z,{component:"span",sx:{display:"inline-block",width:15,height:17}}),(0,r.jsxs)(o.Z,{component:"span",sx:{ml:1},children:[l," ",0===d?"(King)":1===d?"(Leader)":""]})]}),(0,r.jsx)(g.Z,{children:s}),(0,r.jsxs)(g.Z,{children:[a," ",n?(0,r.jsxs)(o.Z,{variant:"caption",color:x>0?"success.light":"error.light",children:["(",x>0?"+":"",x,")"]}):null]}),(0,r.jsx)(g.Z,{children:(0,I.cleanUnderscore)(null==c?void 0:c.name)||"Guild Gifts"})]},l+s+t):null})})]})})},Guild_GuildBonuses=e=>{let{bonuses:t}=e,getCostToMax=e=>{let{maxLevel:t,level:n,gpBaseCost:r,gpIncrease:i}=e,o=0;for(let e=n;e<t;e++)o+=r+e*i;return o};return(0,r.jsx)(l.Z,{direction:"row",flexWrap:"wrap",gap:2,children:null==t?void 0:t.map((e,t)=>{let{name:n,level:i,gpIncrease:s,maxLevel:d,bonus:u,func:x,x1:m,x2:v,gpBaseCost:h}=e,Z=getCostToMax(e);return(0,r.jsx)(a.Z,{sx:{width:300},children:(0,r.jsx)(c.Z,{children:(0,r.jsxs)(l.Z,{gap:2,children:[(0,r.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,r.jsx)("img",{src:"".concat(I.prefix,"data/Gbonus").concat(t,".png"),alt:""}),(0,r.jsx)(o.Z,{children:(0,I.cleanUnderscore)(n)})]}),(0,r.jsxs)(l.Z,{gap:1,children:[(0,r.jsxs)(o.Z,{children:["level: ",i," / ",d]}),(0,r.jsxs)(o.Z,{children:["cost: ",(0,I.notateNumber)(h+i*s)]}),(0,r.jsxs)(o.Z,{children:["cost to max: ",(0,I.notateNumber)(Z)]}),(0,r.jsx)(o.Z,{sx:{fontSize:16},children:(0,I.cleanUnderscore)(u.replace("{",(0,I.growth)(x,i,m,v)))})]})]})})},n+t)})})},B=n(87153),P=n(40929);let CardTitleAndValue=e=>{let{cardSx:t,title:n,value:i,children:l}=e;return(0,r.jsx)(a.Z,{sx:{my:{xs:0,md:3},width:"fit-content",...t},children:(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(o.Z,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:n}),i?(0,r.jsx)(o.Z,{children:i}):l]})})};var guild=()=>{var e,t,n,a,c,m,v;let{state:h}=(0,d.useContext)(u.I),{guild:Z}=null==h?void 0:h.account,[p,g]=(0,d.useState)(),[j,f]=(0,d.useState)(),[b,C]=(0,d.useState)("");if(!Z||(null==Z?void 0:null===(e=Z.members)||void 0===e?void 0:e.length)===0)return(0,r.jsx)(o.Z,{variant:"h3",mb:3,children:"You have to be in a guild to view this page's content"});(0,d.useEffect)(()=>{let e=(0,I.tryToParse)(localStorage.getItem("guild"));(null==e?void 0:e.timestamp)&&g(null==e?void 0:e.timestamp)},[]);let exportToJson=async()=>{try{var e;let t={date:(0,P.Z)(new Date,"dd/MM/yyyy HH:mm:ss"),members:null==Z?void 0:null===(e=Z.members)||void 0===e?void 0:e.map(e=>{let{name:t,gpEarned:n}=e;return{name:t,gpEarned:n}})};await navigator.clipboard.writeText(JSON.stringify(t))}catch(e){console.error("exportToJson -> ",e)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.PB,{title:"Idleon Toolbox | Guild",description:"Keep track of your guild members, gp, bonuses and more"}),(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,r.jsx)("img",{src:"".concat(I.prefix,"data/G2icon").concat(null==h?void 0:null===(n=h.account)||void 0===n?void 0:null===(t=n.accountOptions)||void 0===t?void 0:t[38],".png"),alt:"guild-icon"}),(0,r.jsxs)(o.Z,{variant:"h3",children:[null==h?void 0:null===(c=h.account)||void 0===c?void 0:null===(a=c.accountOptions)||void 0===a?void 0:a[37]," ",(0,r.jsxs)(o.Z,{component:"span",variant:"h5",children:["(",null==Z?void 0:null===(m=Z.members)||void 0===m?void 0:m.length," / ",null==Z?void 0:Z.maxMembers,")"]})]})]}),(0,r.jsxs)(l.Z,{sx:{mb:1},direction:"row",gap:2,flexWrap:"wrap",children:[(0,r.jsx)(CardTitleAndValue,{title:"Members",value:"".concat(null==Z?void 0:null===(v=Z.members)||void 0===v?void 0:v.length," / ").concat(null==Z?void 0:Z.maxMembers)}),(0,r.jsxs)(CardTitleAndValue,{title:"Exp",children:[(0,r.jsx)(B.Z,{boxSx:{width:200},percent:(null==Z?void 0:Z.totalGp)/Math.round(null==Z?void 0:Z.levelReq)*100,bgColor:"#f3dd4c"}),(0,r.jsxs)(o.Z,{children:[(0,I.numberWithCommas)(null==Z?void 0:Z.totalGp)," / ",(0,I.numberWithCommas)(Math.round(null==Z?void 0:Z.levelReq))]})]}),(0,r.jsx)(CardTitleAndValue,{title:"Utility",children:(0,r.jsxs)(l.Z,{gap:1,children:[p?(0,r.jsxs)(o.Z,{variant:"caption",children:["Data from: ",(0,P.Z)(new Date(p),"dd/MM/yyyy HH:mm:ss")]}):null,(0,r.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,r.jsx)(s.Z,{variant:"contained",onClick:()=>{let e=new Date().getTime();g(e),localStorage.setItem("guild",JSON.stringify({timestamp:e,members:null==Z?void 0:Z.members})),C("")},children:"Save"}),(0,r.jsx)(s.Z,{variant:"contained",onClick:()=>{let e=(0,I.tryToParse)(localStorage.getItem("guild"));if(!e)return C("Missing save to compare to");f(e)},children:"Compare"}),(0,r.jsx)(s.Z,{variant:"contained",onClick:exportToJson,children:"Export"})]}),b?(0,r.jsx)(o.Z,{color:"error.light",children:b}):null]})})]})]}),(0,r.jsxs)(x.Z,{tabs:["Members","Bonuses"],children:[(0,r.jsx)(Guild_GuildMembers,{members:null==Z?void 0:Z.members,changes:j}),(0,r.jsx)(Guild_GuildBonuses,{bonuses:null==Z?void 0:Z.guildBonuses})]})]})}}},function(e){e.O(0,[2307,9774,2888,179],function(){return e(e.s=16195)}),_N_E=e.O()}]);