(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5860],{89936:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/dungeons",function(){return t(53905)}])},15461:function(n,e,t){"use strict";var r=t(85893),l=t(67294),o=t(25801),i=t(33913),s=t(1356),c=t(15861);let a=(0,l.forwardRef)((n,e)=>{let{date:t,startDate:a,lastUpdated:d,stopAtZero:u,type:h,pause:p,staticTime:x,placeholder:g,loop:j,variant:v="inherit",...f}=n,[Z,w]=(0,l.useState)();(0,l.useEffect)(()=>{if(t){if(x){if(!isFinite(t))return;return w({...(0,s.getDuration)(new Date().getTime(),t)})}let n=new Date,e=n.getTime()-(null!=d?d:0),r=(0,i.Z)(t);w({...(0,s.getDuration)(null==n?void 0:n.getTime(),t+e*("countdown"===h?-1:1)),overtime:"countdown"===h&&r})}},[t,d]);let tickUp=()=>{let{days:n,hours:e,minutes:t,seconds:r}=Z;60===(r+=1)&&(r=0,60===(t+=1)&&(t=0,24===(e+=1)&&(n+=1))),w({...Z,days:n,hours:e,minutes:t,seconds:r})},tickDown=()=>{let{days:n,hours:e,minutes:t,seconds:r}=Z;if(0===n&&0===e&&0===t&&0===r){if(u)return;if(j)return w({...(0,s.getDuration)(new Date().getTime(),a)})}-1==(r-=1)&&(r=59,-1==(t-=1)&&(t=59,-1==(e-=1)&&(e=0,n-=1))),w({...Z,days:n,hours:e,minutes:t,seconds:r})};(0,o.Z)(()=>{if(!Z)return null;"countdown"!==h||(null==Z?void 0:Z.overtime)?tickUp():tickDown()},p||x?null:1e3);let wrapNumber=n=>{let e=String(n);return(null==e?void 0:e.length)===1?"0".concat(n):n};return Z?((null==Z?void 0:Z.overtime)||p)&&g?(0,r.jsx)(c.Z,{...f,ref:e,children:g}):(0,r.jsxs)(c.Z,{...f,ref:e,variant:v,sx:{color:"".concat((null==Z?void 0:Z.overtime)&&!j?"#f91d1d":"")},component:"span",children:[(null==Z?void 0:Z.days)?wrapNumber(null==Z?void 0:Z.days)+"d:":"",wrapNumber(null==Z?void 0:Z.hours)+"h:",wrapNumber(null==Z?void 0:Z.minutes)+"m",(null==Z?void 0:Z.days)?"":":",(null==Z?void 0:Z.days)?"":wrapNumber(null==Z?void 0:Z.seconds)+"s"]}):null});e.Z=a},53905:function(n,e,t){"use strict";t.r(e);var r=t(82729),l=t(85893),o=t(67294),i=t(15861),s=t(51233),c=t(67358),a=t(38895),d=t(22797),u=t(66242),h=t(44267),p=t(1356),x=t(51626),g=t(61599),j=t(15461),v=t(23508),f=t(63269),Z=t(2962);function _templateObject(){let n=(0,r._)(["\n  width: 25px;\n  object-fit: contain;\n"]);return _templateObject=function(){return n},n}let CardContainer=n=>{let{column:e,sx:t={},children:r}=n;return(0,l.jsx)(u.Z,{sx:t,children:(0,l.jsx)(h.Z,{sx:{height:"100%",display:"flex"},children:(0,l.jsx)(s.Z,{direction:e?"column":"row",gap:1,justifyContent:"center",alignItems:"center",children:r})})})},w=g.Z.img(_templateObject()),DungeonUpgrades=n=>{let{isFlurbo:e,upgrades:t=[]}=n,calcBonus=n=>(0,p.growth)(null==n?void 0:n.func,null==n?void 0:n.level,null==n?void 0:n.x1,null==n?void 0:n.x2),calcCostToMax=n=>{let t=0;for(let r=n;r<(e?50:100);r++)t+=calcUpgradeCost(r);return t},calcUpgradeCost=n=>e?Math.floor(1+Math.pow(1.7*n,1.05)*Math.pow(1.027+(n-30)/(n+30)*.01*Math.floor((n+970)/1e3),n)):Math.floor(2+Math.pow(1.5*n,1.04)*Math.pow(1.024+(n-60)/(n+60)*.01*Math.floor((n+940)/1e3),n));return(0,l.jsxs)(s.Z,{children:[(0,l.jsxs)(i.Z,{my:2,variant:"h4",children:[e?"Flurbo":"Dungeon"," Upgrades"]}),(0,l.jsx)(s.Z,{gap:1,children:t.map((n,t)=>{let{level:r,type:o,effect:c}=n,a=r>=(e?50:100);return(0,l.jsx)(u.Z,{sx:{width:{md:450}},children:(0,l.jsx)(h.Z,{children:(0,l.jsxs)(s.Z,{direction:"row",justifyContent:"space-between",gap:2,children:[(0,l.jsxs)(s.Z,{children:[(0,l.jsxs)(i.Z,{children:["+",calcBonus(n),"%"===o?o:""," ",(0,p.cleanUnderscore)(c)]}),(0,l.jsx)(i.Z,{color:a?"success.light":"",children:a?"MAXED":"Lv. ".concat(r," / ").concat(e?50:100)})]}),(0,l.jsxs)(s.Z,{direction:"row",gap:3,children:[(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(i.Z,{color:"info.light",children:"Cost"}),(0,l.jsx)(i.Z,{children:calcUpgradeCost(r)})]}),(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(i.Z,{color:"info.light",children:"Cost to max"}),(0,l.jsx)(i.Z,{children:calcCostToMax(r)})]})]})]})})},"".concat(c,"-").concat(t))})})]})};e.default=()=>{let{state:n}=(0,o.useContext)(x.I),{dungeons:e}=(null==n?void 0:n.account)||{},t=(0,o.useMemo)(()=>{var e;return(0,f.IS)(null==n?void 0:null===(e=n.serverVars)||void 0===e?void 0:e.HappyHours)||[]},[n]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Z.PB,{title:"Idleon Toolbox | Dungeons",description:"Dungeon information including happy hour times, currency, upgrades and more"}),(0,l.jsx)(i.Z,{my:2,variant:"h2",children:"Dungeons"}),(0,l.jsxs)(s.Z,{direction:"row",flexWrap:"wrap",gap:4,children:[(0,l.jsxs)(CardContainer,{children:[(0,l.jsx)(w,{src:"".concat(p.prefix,"data/Dung_Rank").concat(null==e?void 0:e.rank,".png"),alt:""}),(0,l.jsxs)(s.Z,{children:[(0,l.jsxs)(i.Z,{children:["Rank: ",null==e?void 0:e.rank]}),(0,l.jsxs)(i.Z,{children:[null==e?void 0:e.progress," / ",null==e?void 0:e.rankReq]})]})]}),(0,l.jsxs)(CardContainer,{children:[(0,l.jsx)("img",{src:"".concat(p.prefix,"etc/boosted-runs.png"),alt:""}),(0,l.jsx)(i.Z,{children:null==e?void 0:e.boostedRuns}),(0,l.jsx)(w,{src:"".concat(p.prefix,"data/DungCredits1.png"),alt:""}),null==e?void 0:e.credits,(0,l.jsx)(w,{src:"".concat(p.prefix,"data/DungCredits2.png"),alt:""}),null==e?void 0:e.flurbos]})]}),(0,l.jsx)(s.Z,{my:2,direction:"row",gap:4,children:(0,l.jsxs)(c.Z,{children:[(0,l.jsx)(a.Z,{expandIcon:t.length>1?(0,l.jsx)(v.Z,{}):null,children:(0,l.jsxs)(s.Z,{direction:"row",gap:2,children:[(0,l.jsx)(i.Z,{children:"Next happy hour:"}),(null==t?void 0:t.length)>0?(0,l.jsx)(j.Z,{type:"countdown",date:null==t?void 0:t[0],lastUpdated:null==n?void 0:n.lastUpdated}):"waiting for lava to set them"]})}),t.length>1?(0,l.jsxs)(d.Z,{children:[(0,l.jsx)(i.Z,{mb:1,children:"Future happy hours"}),(0,l.jsx)(s.Z,{gap:2,children:t.map((e,t)=>0===t?null:(0,l.jsxs)(s.Z,{direction:"row",gap:3,children:[(0,l.jsxs)(i.Z,{sx:{width:40},children:["#",t]}),(0,l.jsx)(j.Z,{date:e,lastUpdated:null==n?void 0:n.lastUpdated},"happy-".concat(t))]},"next-happy-hour-".concat(t)))})]}):null]})}),(0,l.jsxs)(s.Z,{direction:"row",flexWrap:"wrap",gap:4,children:[(0,l.jsx)(DungeonUpgrades,{upgrades:null==e?void 0:e.insideUpgrades}),(0,l.jsx)(DungeonUpgrades,{isFlurbo:!0,upgrades:null==e?void 0:e.upgrades})]})]})}}},function(n){n.O(0,[2584,1922,9774,2888,179],function(){return n(n.s=89936)}),_N_E=n.O()}]);