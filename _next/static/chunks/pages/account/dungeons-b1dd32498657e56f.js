(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5860],{5228:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/dungeons",function(){return c(5488)}])},134:function(e,b,a){"use strict";var f=a(5893),g=a(7294),h=a(3277),i=a(3913),j=a(3133),c=a(5934),k=a(5861);function l(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function m(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){l(d,a,c[a])})}return d}function d(){var a,b,c=(a=["\n  .overtime {\n    color: #f91d1d;\n  }\n"],b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}})));return d=function(){return c},c}var n=c.Z.span(d());b.Z=function(b){var o=b.date,r=b.startDate,p=b.lastUpdated,s=b.type,d=b.pause,q=b.staticTime,e=b.placeholder,t=b.loop,l=(0,g.useState)(),a=l[0],u=l[1];(0,g.useEffect)(function(){if(o){if(q)return u(m({},(0,j.getDuration)(new Date().getTime(),o)));var a=new Date,b=a.getTime()-(null!=p?p:0),c=(0,i.Z)(o);u(m({},(0,j.getDuration)(null==a?void 0:a.getTime(),o+b*("countdown"===s?-1:1)),{overtime:"countdown"===s&&c}))}},[o,p]);var v=function(){var d=a.days,e=a.hours,b=a.minutes,c=a.seconds;60===(c+=1)&&(c=0,60===(b+=1)&&(b=0,24===(e+=1)&&(d+=1))),u(m({},a,{days:d,hours:e,minutes:b,seconds:c}))},w=function(){var e=a.days,b=a.hours,c=a.minutes,d=a.seconds;if(0===e&&0===b&&0===c&&0===d&&t)return u(m({},(0,j.getDuration)(new Date().getTime(),r)));-1==(d-=1)&&(d=59,-1==(c-=1)&&(c=59,-1==(b-=1)&&(b=0,e-=1))),u(m({},a,{days:e,hours:b,minutes:c,seconds:d}))};(0,h.Z)(function(){if(!a)return null;"countdown"!==s||(null==a?void 0:a.overtime)?v():w()},d||q?null:1e3);var c=function(a){var b=String(a);return(null==b?void 0:b.length)===1?"0".concat(a):a};return a?(0,f.jsx)(n,{children:((null==a?void 0:a.overtime)||d)&&e?e:(0,f.jsxs)(k.Z,{className:"".concat((null==a?void 0:a.overtime)?"overtime":""),component:"span",children:[(null==a?void 0:a.days)?c(null==a?void 0:a.days)+"d:":"",c(null==a?void 0:a.hours)+"h:",c(null==a?void 0:a.minutes)+"m",(null==a?void 0:a.days)?"":":",(null==a?void 0:a.days)?"":c(null==a?void 0:a.seconds)+"s"]})}):null}},5488:function(e,b,a){"use strict";a.r(b);var f=a(5893),g=a(7294),h=a(5861),i=a(6447),j=a(7358),k=a(8895),l=a(2797),m=a(6242),n=a(4267),o=a(3133),p=a(819),c=a(5934),q=a(9352),r=a(8366),s=a(3284),t=a(3913),u=a(5148),v=a(134),w=a(3508);function d(){var a,b,c=(a=["\n  width: 25px;\n  object-fit: contain;\n"],b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}})));return d=function(){return c},c}var x=function(a,b){return null==a?void 0:a.map(function(a){return a+Math.round(b/1e3)-3600})},y=function(d){var a,e=x(d,a=(0,q.Z)((0,r.Z)())?(0,r.Z)():(a=(0,s.Z)((0,r.Z)())).getTime()-6e4*a.getTimezoneOffset()),b=null==e?void 0:e.filter(function(a){return!(0,t.Z)(1e3*a)}).map(function(a){return 1e3*a});if((null==b?void 0:b.length)!==0)return b;var c=(0,u.Z)((0,r.Z)());return x(d,c=c.getTime()-6e4*c.getTimezoneOffset())},z=function(a){var c=a.column,b=a.sx,d=a.children;return(0,f.jsx)(m.Z,{sx:void 0===b?{}:b,children:(0,f.jsx)(n.Z,{sx:{height:"100%",display:"flex"},children:(0,f.jsx)(i.Z,{direction:c?"column":"row",gap:1,justifyContent:"center",alignItems:"center",children:d})})})},A=c.Z.img(d()),B=function(a){var c=a.isFlurbo,b=a.upgrades,d=function(d){for(var b=0,a=d;a<(c?50:100);a++)b+=e(a);return b},e=function(a){if(c){var b=Math.pow(1.7*a,1.05),d=1.027+(a-30)/(a+30)*.01*Math.floor((a+970)/1e3);return Math.floor(1+b*Math.pow(d,a))}return Math.floor(2+Math.pow(1.5*a,1.04)*Math.pow(1.024+(a-60)/(a+60)*.01*Math.floor((a+940)/1e3),a))};return(0,f.jsxs)(i.Z,{children:[(0,f.jsxs)(h.Z,{my:2,variant:"h4",children:[c?"Flurbo":"Dungeon"," Upgrades"]}),(0,f.jsx)(i.Z,{gap:1,children:(void 0===b?[]:b).map(function(b,p){var a,g=b.level,j=b.type,k=b.effect,l=g>=(c?50:100);return(0,f.jsx)(m.Z,{sx:{width:{md:450}},children:(0,f.jsx)(n.Z,{children:(0,f.jsxs)(i.Z,{direction:"row",justifyContent:"space-between",gap:2,children:[(0,f.jsxs)(i.Z,{children:[(0,f.jsxs)(h.Z,{children:["+",(a=b,(0,o.growth)(null==a?void 0:a.func,null==a?void 0:a.level,null==a?void 0:a.x1,null==a?void 0:a.x2)),"%"===j?j:""," ",(0,o.cleanUnderscore)(k)]}),(0,f.jsx)(h.Z,{color:l?"success.light":"",children:l?"MAXED":"Lv. ".concat(g," / ").concat(c?50:100)})]}),(0,f.jsxs)(i.Z,{direction:"row",gap:3,children:[(0,f.jsxs)(i.Z,{children:[(0,f.jsx)(h.Z,{color:"info.light",children:"Cost"}),(0,f.jsx)(h.Z,{children:e(g)})]}),(0,f.jsxs)(i.Z,{children:[(0,f.jsx)(h.Z,{color:"info.light",children:"Cost to max"}),(0,f.jsx)(h.Z,{children:d(g)})]})]})]})})},"".concat(k,"-").concat(p))})})]})};b.default=function(){var c=(0,g.useContext)(p.I).state,a=((null==c?void 0:c.account)||{}).dungeons,b=(0,g.useMemo)(function(){var a;return y(null==c?void 0:null===(a=c.serverVars)|| void 0===a?void 0:a.HappyHours)||[]},[c]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.Z,{my:2,variant:"h2",children:"Dungeons"}),(0,f.jsxs)(i.Z,{direction:"row",flexWrap:"wrap",gap:4,children:[(0,f.jsxs)(z,{children:[(0,f.jsx)(A,{src:"".concat(o.prefix,"data/Dung_Rank").concat(null==a?void 0:a.rank,".png"),alt:""}),(0,f.jsxs)(i.Z,{children:[(0,f.jsxs)(h.Z,{children:["Rank: ",null==a?void 0:a.rank]}),(0,f.jsxs)(h.Z,{children:[null==a?void 0:a.progress," / ",null==a?void 0:a.rankReq]})]})]}),(0,f.jsxs)(z,{children:[(0,f.jsx)("img",{src:"".concat(o.prefix,"etc/boosted-runs.png"),alt:""}),(0,f.jsx)(h.Z,{children:null==a?void 0:a.boostedRuns}),(0,f.jsx)(A,{src:"".concat(o.prefix,"data/DungCredits1.png"),alt:""}),null==a?void 0:a.credits,(0,f.jsx)(A,{src:"".concat(o.prefix,"data/DungCredits2.png"),alt:""}),null==a?void 0:a.flurbos]})]}),(0,f.jsx)(i.Z,{my:2,direction:"row",gap:4,children:(0,f.jsxs)(j.Z,{children:[(0,f.jsx)(k.Z,{expandIcon:b.length>1?(0,f.jsx)(w.Z,{}):null,children:(0,f.jsxs)(i.Z,{direction:"row",gap:2,children:[(0,f.jsx)(h.Z,{children:"Next happy hour:"}),(null==b?void 0:b.length)>0?(0,f.jsx)(v.Z,{type:"countdown",date:null==b?void 0:b[0],lastUpdated:null==c?void 0:c.lastUpdated}):"waiting for lava to set them"]})}),b.length>1?(0,f.jsxs)(l.Z,{children:[(0,f.jsx)(h.Z,{mb:1,children:"Future happy hours"}),(0,f.jsx)(i.Z,{gap:2,children:b.map(function(b,a){return 0===a?null:(0,f.jsxs)(i.Z,{direction:"row",gap:3,children:[(0,f.jsxs)(h.Z,{sx:{width:40},children:["#",a]}),(0,f.jsx)(v.Z,{date:b,lastUpdated:null==c?void 0:c.lastUpdated},"happy-".concat(a))]},"next-happy-hour-".concat(a))})})]}):null]})}),(0,f.jsxs)(i.Z,{direction:"row",flexWrap:"wrap",gap:4,children:[(0,f.jsx)(B,{upgrades:null==a?void 0:a.insideUpgrades}),(0,f.jsx)(B,{isFlurbo:!0,upgrades:null==a?void 0:a.upgrades})]})]})}}},function(a){a.O(0,[2584,9774,2888,179],function(){return a(a.s=5228)}),_N_E=a.O()}])