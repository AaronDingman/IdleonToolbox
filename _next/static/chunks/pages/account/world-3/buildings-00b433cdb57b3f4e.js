(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3446],{75558:function(e,n,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/world-3/buildings",function(){return l(19925)}])},33948:function(e,n,l){"use strict";var i=l(85893),t=l(67294),o=l(96986),r=l(33913),d=l(39574),u=l(15861);let s=(0,t.forwardRef)((e,n)=>{let{date:l,startDate:s,lastUpdated:a,stopAtZero:c,type:v,pause:h,staticTime:x,placeholder:m,loop:f,variant:g="inherit",...p}=e,[j,w]=(0,t.useState)();(0,t.useEffect)(()=>{if(l){if(x){if(!isFinite(l))return;return w({...(0,d.getDuration)(new Date().getTime(),l)})}let e=new Date,n=e.getTime()-(null!=a?a:0),i=(0,r.Z)(l);w({...(0,d.getDuration)(null==e?void 0:e.getTime(),l+n*("countdown"===v?-1:1)),overtime:"countdown"===v&&i})}},[l,a]);let Z=()=>{let{days:e,hours:n,minutes:l,seconds:i}=j;60===(i+=1)&&(i=0,60===(l+=1)&&(l=0,24===(n+=1)&&(e+=1))),w({...j,days:e,hours:n,minutes:l,seconds:i})},b=()=>{let{days:e,hours:n,minutes:l,seconds:i}=j;if(0===e&&0===n&&0===l&&0===i){if(c)return;if(f)return w({...(0,d.getDuration)(new Date().getTime(),s)})}-1==(i-=1)&&(i=59,-1==(l-=1)&&(l=59,-1==(n-=1)&&(n=0,e-=1))),w({...j,days:e,hours:n,minutes:l,seconds:i})};(0,o.Z)(()=>{if(!j)return null;"countdown"!==v||(null==j?void 0:j.overtime)?Z():b()},h||x?null:1e3);let _=e=>{let n=String(e);return(null==n?void 0:n.length)===1?"0".concat(e):e};return j?((null==j?void 0:j.overtime)||h)&&m?(0,i.jsx)(u.Z,{...p,ref:n,children:m}):(0,i.jsxs)(u.Z,{...p,ref:n,variant:g,sx:{color:"".concat((null==j?void 0:j.overtime)&&!f?"#f91d1d":"")},component:"span",children:[(null==j?void 0:j.days)?_(null==j?void 0:j.days)+"d:":"",_(null==j?void 0:j.hours)+"h:",_(null==j?void 0:j.minutes)+"m",(null==j?void 0:j.days)?"":":",(null==j?void 0:j.days)?"":_(null==j?void 0:j.seconds)+"s"]}):null});n.Z=s},19925:function(e,n,l){"use strict";l.r(n);var i=l(82729),t=l(85893),o=l(67294),r=l(41422),d=l(15861),u=l(33454),s=l(96420),a=l(51233),c=l(66242),v=l(44267),h=l(39574),x=l(61599),m=l(57277),f=l(2962),g=l(33948),p=l(47315),j=l(51053);function w(){let e=(0,i._)(["\n  width: 50px;\n  height: 50px;\n  object-fit: contain;\n"]);return w=function(){return e},e}function Z(){let e=(0,i._)(["\n  width: 35px;\n  height: 35px;\n  object-fit: contain;\n"]);return Z=function(){return e},e}let b=x.Z.img(w()),_=x.Z.img(Z());n.default=()=>{var e,n;let{state:l}=(0,o.useContext)(r.I),[i,x]=(0,o.useState)("order"),w=null==l?void 0:null===(e=l.account)||void 0===e?void 0:null===(n=e.construction)||void 0===n?void 0:n.totalBuildRate,Z=(0,o.useMemo)(()=>{var e,n,i;return null==l?void 0:null===(e=l.account)||void 0===e?void 0:null===(n=e.towers)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.find(e=>5===e.index)},[l]),M=(e,n,l,i,t)=>e.map(e=>{let{rawName:o,name:r,amount:d}=e,u=Math.min(.1,.1*Math.floor((t.level+999)/1e3)),s=Math.max(0,t.level-1),a=Math.max(.2,1-(u+s*t.costInc[0]/100));return o.includes("Refinery")?{rawName:o,name:r,amount:Math.floor(a*d*(n+1))}:{rawName:o,name:r,amount:Math.floor(a*d*Math.pow(i+.03-(i+.03-1.05)*n/(l/2+n),n))}}),C=(e,n)=>6===n?e>=(null===m.q5||void 0===m.q5?void 0:m.q5[n])?30:0:5===n||4===n?e>=(null===m.q5||void 0===m.q5?void 0:m.q5[n])?100:0:3===n&&e>=(null===m.q5||void 0===m.q5?void 0:m.q5[n])?35:0,q=(e,n,l)=>50===n?Math.round(2*l+C(e,6,0)):101===n?C(e,4,0):100===n?C(e,5,0):15===n?C(e,3,0):0,T=(0,o.useMemo)(()=>{var e,n,i;return null==l?void 0:null===(e=l.account)||void 0===e?void 0:null===(n=e.towers)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.map(e=>{var n,i,t,o,r,d,u,s,a,c,v,h,x;let{progress:f,level:g,maxLevel:j,bonusInc:b,itemReq:_,slot:C}=e,T=M(_,g,j,b,Z),N=(0,m.ZX)(null==l?void 0:null===(n=l.account)||void 0===n?void 0:n.towers,g,b,null==e?void 0:e.index),y=null==l?void 0:null===(i=l.account)||void 0===i?void 0:null===(t=i.atoms)||void 0===t?void 0:null===(o=t.atoms)||void 0===o?void 0:o.find(e=>{let{name:n}=e;return"Carbon_-_Wizard_Maximizer"===n}),D=q(null==l?void 0:null===(r=l.account)||void 0===r?void 0:null===(d=r.towers)||void 0===d?void 0:d.totalLevels,j,null==y?void 0:y.level);j+=D;let S=(null===(u=null===(s=null==l?void 0:null===(a=l.account)||void 0===a?void 0:a.lab.jewels)||void 0===s?void 0:s.slice(3,7))||void 0===u?void 0:u.every(e=>{let{active:n}=e;return n}))?1:0,B=(null===(c=null==l?void 0:null===(v=l.account)||void 0===v?void 0:v.lab.jewels)||void 0===c?void 0:null===(h=c[3])||void 0===h?void 0:h.active)?1+S:0,E=(0,p._m)(null==l?void 0:l.account,"Nitrogen_-_Construction_Trimmer"),O=-1!==C&&C<B+(E?1:0),P=0;if(O){let e=(new Date().getTime()-(null!==(x=null==l?void 0:l.lastUpdated)&&void 0!==x?x:0))/1e3;f+=(3+E/100)*(e/3600)*w,P=(3+E/100)*w}let k=(N-f)/(P||w)*36e5;return{...e,maxLevel:j,isMaxed:g===j,isSlotTrimmed:O,timeLeft:k,progress:f,buildCost:N,items:T,trimmedSlotSpeed:P}})},[null==l?void 0:l.account]),N=(0,o.useMemo)(()=>{if("order"===i)return T;if("time"===i){let e=JSON.parse(JSON.stringify(T));return null==e?void 0:e.sort((e,n)=>{let l=((null==e?void 0:e.buildCost)-(null==e?void 0:e.progress))/w,i=((null==n?void 0:n.buildCost)-(null==n?void 0:n.progress))/w;return(null==e?void 0:e.isMaxed)?1:(null==n?void 0:n.isMaxed)?-1:(null==e?void 0:e.inProgress)?(null==n?void 0:n.inProgress)?l-i:-1:1})}if("requirement"===i){let e=JSON.parse(JSON.stringify(T));return null==e?void 0:e.sort((e,n)=>(null==e?void 0:e.isMaxed)?1:(null==n?void 0:n.isMaxed)?-1:(null==e?void 0:e.buildCost)-(null==n?void 0:n.buildCost))}},[i]),y=e=>{let{isSlotTrimmed:n,inProgress:l}=e;return n?"warning.light":l?"success.light":""};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.PB,{title:"Idleon Toolbox | Buildings",description:"Keep track of your towers levels, bonuses and required materials for upgrades"}),(0,t.jsx)(d.Z,{variant:"h2",mb:3,children:"Buildings"}),(0,t.jsx)(d.Z,{children:"Sort by"}),(0,t.jsxs)(u.Z,{value:i,sx:{mb:2},exclusive:!0,onChange:(e,n)=>x(n),children:[(0,t.jsx)(s.Z,{value:"order",children:"Order"}),(0,t.jsx)(s.Z,{value:"time",children:"Time left"}),(0,t.jsx)(s.Z,{value:"requirement",children:"Build cost"})]}),(0,t.jsx)(a.Z,{direction:"row",flexWrap:"wrap",gap:3,children:null==N?void 0:N.map((e,n)=>{let{name:i,progress:o,level:r,maxLevel:u,inProgress:s,isSlotTrimmed:x,isMaxed:m,items:f,buildCost:p,timeLeft:w}=e;return(0,t.jsx)(c.Z,{sx:{border:s||x?"1px solid":"",borderColor:y(e),width:{xs:"100%",md:450},height:{md:165}},children:(0,t.jsx)(v.Z,{children:(0,t.jsxs)(a.Z,{direction:"row",sx:{gap:{xs:2,sm:3}},flexWrap:"wrap",children:[(0,t.jsxs)(a.Z,{alignItems:"center",sx:{width:105,textAlign:"center"},children:[(0,t.jsx)(d.Z,{children:(0,h.cleanUnderscore)(i)}),(0,t.jsx)(b,{src:"".concat(h.prefix,"data/ConTower").concat(null==e?void 0:e.index,".png"),alt:""}),(0,t.jsxs)(d.Z,{children:["Lv. ",r," / ",u]}),m?null:(0,t.jsx)(g.Z,{type:"countdown",staticTime:!s,date:new Date().getTime()+w,lastUpdated:null==l?void 0:l.lastUpdated})]}),(0,t.jsxs)(a.Z,{sx:{width:100},children:[(0,t.jsx)(d.Z,{mb:2,children:"Progress"}),m?(0,t.jsx)(d.Z,{color:"success.light",children:"MAXED"}):(0,t.jsx)(j.Z,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.Z,{children:["Progress: ",(0,h.numberWithCommas)(Math.floor(o))]}),(0,t.jsxs)(d.Z,{children:["Requirement: ",(0,h.numberWithCommas)(Math.floor(p))]})]}),children:(0,t.jsxs)(d.Z,{children:[(0,h.notateNumber)(o,"Big")," / ",(0,h.notateNumber)(p,"Big")]})})]}),r===u?null:(0,t.jsxs)(a.Z,{children:[(0,t.jsx)(d.Z,{mb:2,children:"Cost"}),(0,t.jsx)(a.Z,{direction:"row",gap:1,children:null==f?void 0:f.map((e,n)=>{let{rawName:l,amount:o}=e;return(0,t.jsxs)(a.Z,{alignItems:"center",children:[(0,t.jsx)(_,{src:"".concat(h.prefix,"data/").concat(l,".png"),alt:""}),(0,t.jsx)(d.Z,{children:o})]},"".concat(i,"-").concat(l,"-").concat(n))})})]})]})})},"".concat(i,"-").concat(n))})})]})}}},function(e){e.O(0,[3383,9774,2888,179],function(){return e(e.s=75558)}),_N_E=e.O()}]);