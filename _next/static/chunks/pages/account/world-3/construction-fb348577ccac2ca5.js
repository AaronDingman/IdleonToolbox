(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9876],{87789:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/world-3/construction",function(){return e(14361)}])},11463:function(t,n,e){"use strict";e.d(n,{Gr:function(){return MissingData},M5:function(){return h},Wd:function(){return PlayersList},Ye:function(){return CardTitleAndValue},iy:function(){return CardAndBorder},j8:function(){return m},u3:function(){return TalentTooltip},uQ:function(){return TitleAndValue},wD:function(){return CenteredStack}});var l=e(82729),r=e(85893),o=e(67294),i=e(1356),a=e(51233),u=e(15861),d=e(49425),c=e(66242),s=e(44267),v=e(61599),p=e(70478),x=e(9751);function _templateObject(){let t=(0,l._)(["\n  & .MuiBadge-badge {\n    background-color: #d5d5dc;\n    color: rgba(0, 0, 0, 0.87);\n  }\n"]);return _templateObject=function(){return t},t}function _templateObject1(){let t=(0,l._)(["\n  height: 20px;\n  object-fit: contain;\n"]);return _templateObject1=function(){return t},t}function _templateObject2(){let t=(0,l._)(["\n  width: 56px;\n  height: 72px;\n  object-fit: contain;\n  opacity: ",";\n"]);return _templateObject2=function(){return t},t}function _templateObject3(){let t=(0,l._)(["\n  position: absolute;\n  left: 50%;\n  top: -3px;\n  pointer-events: none;\n  transform: translateX(-50%);\n"]);return _templateObject3=function(){return t},t}let h=(0,o.forwardRef)((t,n)=>{let{stat:e,icon:l}=t,{img:o,...d}=t;return(0,r.jsxs)(a.Z,{alignItems:"center",...d,ref:n,style:{position:"relative",width:"fit-content"},children:[(0,r.jsx)("img",{...o,src:"".concat(i.prefix,"data/").concat(l,".png"),alt:""}),(0,r.jsx)(u.Z,{variant:"body1",component:"span",children:e})]})});h.displayName="IconWithText";let TitleAndValue=t=>{let{title:n,value:e,boldTitle:l,titleStyle:o={}}=t;return(0,r.jsxs)(a.Z,{direction:"row",flexWrap:"wrap",alignItems:"center",children:[n?(0,r.jsxs)(u.Z,{style:o,fontWeight:l?"bold":500,component:"span",children:[n,":\xa0"]}):null,(0,r.jsx)(u.Z,{fontSize:15,component:"span",children:e})]})},m=(0,v.Z)(d.Z)(_templateObject()),CardAndBorder=t=>{let{cardName:n,stars:e,cardIndex:l,name:o,variant:a,rawName:u,amount:d,nextLevelReq:c}=t,s="cardSet"===a?"".concat(i.prefix,"data/").concat(u,".png"):"".concat(i.prefix,"data/2Cards").concat(l,".png");return(0,r.jsxs)(r.Fragment,{children:[e>0?(0,r.jsx)(f,{src:"".concat(i.prefix,"data/CardEquipBorder").concat(e,".png"),alt:""}):null,(0,r.jsx)(p.Z,{title:(0,r.jsx)(CardTooltip,{...t,cardName:"cardSet"===a?o:n,nextLevelReq:c,amount:d}),children:(0,r.jsx)(j,{isCardSet:"cardSet"===a,amount:d,src:s,alt:""})})]})},CardTooltip=t=>{let{displayName:n,effect:e,bonus:l,stars:o,showInfo:d,nextLevelReq:c,amount:s}=t,v=l;return d&&(v=(0,x.BZ)({bonus:l,stars:o})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{fontWeight:"bold",variant:"h6",children:(0,i.cleanUnderscore)(n)}),(0,r.jsx)(u.Z,{children:(0,i.cleanUnderscore)(e.replace("{",v))}),d?(0,r.jsx)(a.Z,{mt:1,direction:"row",gap:1,flexWrap:"wrap",children:[1,2,3,4,5,6].map((t,e)=>(0,r.jsxs)(a.Z,{alignItems:"center",justifyContent:"space-between",children:[0===e?(0,r.jsx)(u.Z,{children:"Base"}):(0,r.jsx)(g,{src:"".concat(i.prefix,"etc/Star").concat(e,".png"),alt:""}),(0,r.jsx)(u.Z,{children:l*(e+1)})]},"".concat(n,"-").concat(e)))}):null,s>=c?(0,r.jsxs)(a.Z,{children:["You've collected ",(0,i.numberWithCommas)(s)," cards"]}):c>0?(0,r.jsxs)(a.Z,{children:["Progress: ",(0,i.numberWithCommas)(s)," / ",(0,i.numberWithCommas)(c)]}):null]})},g=v.Z.img(_templateObject1()),j=v.Z.img(_templateObject2(),t=>{let{amount:n,isCardSet:e}=t;return n||e?1:.5}),f=v.Z.img(_templateObject3()),TalentTooltip=t=>{let{level:n,funcX:e,x1:l,x2:o,funcY:d,y1:c,y2:s,description:v,name:p,talentId:x}=t,h=n>0?(0,i.growth)(e,n,l,o):0,m=n>0?(0,i.growth)(d,n,c,s):0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,r.jsx)("img",{src:"".concat(i.prefix,"data/UISkillIcon").concat(x,".png"),alt:""}),(0,r.jsx)(u.Z,{fontWeight:"bold",variant:"h6",children:(0,i.cleanUnderscore)(p)})]}),(0,r.jsx)(u.Z,{children:(0,i.cleanUnderscore)(v).replace("{",h).replace("}",m)})]})},PlayersList=t=>{let{players:n,characters:e}=t;return(0,r.jsx)(a.Z,{gap:1,direction:"row",children:n.map(t=>{var n;let{index:l}=t;return(0,r.jsx)(p.Z,{title:null==e?void 0:null===(n=e[l])||void 0===n?void 0:n.name,children:(0,r.jsx)("img",{src:"".concat(i.prefix,"data/headBIG.png"),alt:""})},name+"-head-"+l)})})},MissingData=t=>{let{name:n}=t;return(0,r.jsxs)(u.Z,{variant:"h3",children:["Your account is missing data for ",n]})},CardTitleAndValue=t=>{let{cardSx:n,title:e,value:l,children:o}=t;return(0,r.jsx)(c.Z,{sx:{my:{xs:0,md:3},width:"fit-content",...n},children:(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(u.Z,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:e}),l?(0,r.jsx)(u.Z,{children:l}):o]})})},CenteredStack=t=>{let{direction:n="row",children:e}=t;return(0,r.jsx)(a.Z,{gap:1,direction:n,alignItems:"center",children:e})}},14361:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return world_3_construction}});var l=e(82729),r=e(85893),o=e(15861),i=e(51233),a=e(33454),u=e(96420),d=e(50480),c=e(69368),s=e(61903),v=e(94054),p=e(153),x=e(67294),h=e(1356),m=e(51626),g=e(70478),j=e(83321),f=e(56868),b=e(74721),Z=e(23795),C=e(2962),_=e(87357),y=e(61599);function _templateObject(){let t=(0,l._)(["\n  position: relative;\n  background-image: url(",');\n  background-repeat: no-repeat;\n  background-position: center;\n\n  width: 46px;\n  height: 46px;\n\n  &:before {\n    content: "";\n    display: block;\n    position: absolute;\n    z-index: -1;\n    ',"\n\n    width: 48px;\n    height: 47px;\n    top: 1px;\n    left: -1px;\n  }\n"]);return _templateObject=function(){return t},t}function _templateObject1(){let t=(0,l._)(["\n  width: 47px;\n  height: 47px;\n"]);return _templateObject1=function(){return t},t}function _templateObject2(){let t=(0,l._)(["\n  width: 47px;\n  height: 47px;\n"]);return _templateObject2=function(){return t},t}let w={fontSize:12,fontWeight:400,position:"absolute",top:0,left:0,backgroundColor:"black"},B={fontSize:12,fontWeight:400,position:"absolute",bottom:0,right:0,backgroundColor:"blue"},CogTooltip=t=>{var n;let{character:e,index:l,currentAmount:i,requiredAmount:a,cog:u}=t;return(0,r.jsxs)(r.Fragment,{children:[e?(0,r.jsx)(o.Z,{sx:{fontWeight:"bold"},children:e}):null,i<a?(0,r.jsxs)(o.Z,{children:[(0,h.kFormatter)(i,2)," / ",(0,h.kFormatter)(a,2)," (",(0,h.kFormatter)(i/a*100,2),"%)"]}):null,null===(n=Object.values(null==u?void 0:u.stats))||void 0===n?void 0:n.map((t,n)=>{let{name:e,value:l}=t;return e?(0,r.jsxs)("div",{children:[(0,h.notateNumber)(l,"Big"),(0,h.cleanUnderscore)(e)]},"".concat(e,"-").concat(n)):null}),"index: ",l]})},O=(0,y.Z)(i.Z)(_templateObject(),()=>"".concat(h.prefix,"data/CogSq0.png"),t=>{let{filled:n}=t;return 0===n||100===n?"":"background: linear-gradient(to top, #9de060 ".concat(n,"%, transparent 0%);")}),S=y.Z.img(_templateObject1()),T=y.Z.img(_templateObject2());var World3_ConstructionBoard=t=>{let{view:n,board:e,showTooltip:l,setOutsideHighlight:i,outsideHighlight:a}=t;return(0,r.jsx)(_.Z,{mt:3,sx:{display:"grid",gap:"8px",gridTemplateColumns:{xs:"repeat(8, minmax(45px, 1fr))",md:"repeat(12, minmax(45px, 1fr))"},gridTemplateRows:{xs:"repeat(8, minmax(45px, 1fr))",md:"repeat(8, minmax(45px, 1fr))"}},children:null==e?void 0:e.map((t,e)=>{var u,d,c;let{currentAmount:s,requiredAmount:v,flagPlaced:p,cog:x}=t,{a:m,e:j,b:f,d:b,c:Z,j:C}=null==x?void 0:x.stats,y=s/v*100;return(0,r.jsx)(_.Z,{sx:{outline:(null==x?void 0:x.originalIndex)===a?"1px solid red":"",opacity:i||(null==x?void 0:x.originalIndex)!==e?1:.5},onMouseEnter:()=>"function"==typeof i&&i(null==x?void 0:x.originalIndex),onMouseLeave:()=>"function"==typeof i&&i(null),children:(0,r.jsx)(g.Z,{title:l?(0,r.jsx)(CogTooltip,{...t,index:e,character:(null==x?void 0:null===(u=x.name)||void 0===u?void 0:u.includes("Player"))?null==x?void 0:null===(d=x.name)||void 0===d?void 0:d.split("Player_")[1]:""}):"",children:(0,r.jsxs)(O,{filled:y,rest:100-y,children:[p?(0,r.jsx)(S,{src:"".concat(h.prefix,"data/CogFLflag.png"),alt:""}):null,(null==x?void 0:x.name)&&!p?(0,r.jsx)(T,{src:"".concat(h.prefix,"data/").concat((null==x?void 0:null===(c=x.name)||void 0===c?void 0:c.includes("Player"))?"headBIG":null==x?void 0:x.name,".png"),alt:""}):null,h.isProd?null:(0,r.jsx)(o.Z,{sx:B,children:e}),"build"===n&&!p&&(null==m?void 0:m.value)?(0,r.jsx)(o.Z,{sx:w,children:(0,h.notateNumber)(null==m?void 0:m.value,"Big")||null}):null,"buildPercent"===n&&!p&&(null==j?void 0:j.value)?(0,r.jsx)(o.Z,{sx:w,children:(0,h.notateNumber)(null==j?void 0:j.value,"Big")||null}):null,"exp"!==n||p?null:(0,r.jsx)(o.Z,{sx:w,children:(null==f?void 0:f.value)&&(0,h.notateNumber)(null==f?void 0:f.value,"Big")||(null==b?void 0:b.value)&&(0,h.notateNumber)(null==b?void 0:b.value,"Big")||null}),"flaggy"===n&&!p&&(null==Z?void 0:Z.value)?(0,r.jsx)(o.Z,{sx:w,children:(0,h.notateNumber)(null==Z?void 0:Z.value,"Big")||null}):null,"classExp"===n&&!p&&(null==C?void 0:C.value)?(0,r.jsx)(o.Z,{sx:w,children:(0,h.notateNumber)(null==C?void 0:C.value,"Big")||null}):null]})})},e)})})},k=e(18972),N=e(41508),E=e(41285),I=e(24162),P=e(11463);function construction_templateObject(){let t=(0,l._)(["\n  transform: rotate(180deg);\n"]);return construction_templateObject=function(){return t},t}(0,y.Z)(E.Z)(construction_templateObject());var world_3_construction=()=>{var t,n,e,l,_,y,w,B,O;let{state:S}=(0,x.useContext)(m.I),[T,E]=(0,x.useState)("build"),[W,R]=(0,x.useState)(!0),[M,F]=(0,x.useState)("totalBuildRate"),[A,q]=(0,x.useState)(2500),[Y,z]=(0,x.useState)(null==S?void 0:null===(t=S.account)||void 0===t?void 0:t.construction),[H,L]=(0,x.useState)(null),[U,D]=(0,x.useState)(null),[V,X]=(0,x.useState)({list:[],current:0}),handleCopy=async t=>{try{await navigator.clipboard.writeText(t)}catch(t){console.error(t)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.PB,{title:"Idleon Toolbox | Construction",description:"Keep track of your construction board, cogs information and more"}),(0,r.jsx)(o.Z,{variant:"h2",textAlign:"center",mb:3,children:"Construction"}),(0,r.jsxs)(i.Z,{alignItems:"center",children:[(0,r.jsxs)(a.Z,{value:T,exclusive:!0,onChange:(t,n)=>(null==n?void 0:n.length)?E(n):null,children:[(0,r.jsx)(u.Z,{value:"build",children:"Build"}),(0,r.jsx)(u.Z,{value:"buildPercent",children:"Build %"}),(0,r.jsx)(u.Z,{value:"exp",children:"Exp"}),(0,r.jsx)(u.Z,{value:"flaggy",children:"Flaggy"}),(0,r.jsx)(u.Z,{value:"classExp",children:"Class Exp"})]}),(0,r.jsxs)(i.Z,{my:1,children:[(0,r.jsxs)(i.Z,{my:1,gap:1,direction:"row",alignItems:"center",justifyContent:"center",children:[(0,r.jsxs)(o.Z,{variant:"h6",textAlign:"center",children:["Cogstruction"," "]}),(0,r.jsx)(g.Z,{followCursor:!1,title:(0,r.jsxs)(r.Fragment,{children:["You can export your data and use it in"," ",(0,r.jsx)(Z.Z,{target:"_blank",underline:"always",color:"info.dark",href:"https://github.com/automorphis/Cogstruction",rel:"noreferrer",children:"Cogstruction"})]}),children:(0,r.jsx)(b.Z,{})})]}),(0,r.jsxs)(i.Z,{direction:"row",gap:2,children:[(0,r.jsx)(j.Z,{variant:"contained",color:"primary",sx:{textTransform:"unset"},onClick:()=>{var t,n,e;return handleCopy(null==S?void 0:null===(e=S.account)||void 0===e?void 0:null===(n=e.construction)||void 0===n?void 0:null===(t=n.cogstruction)||void 0===t?void 0:t.cogData)},startIcon:(0,r.jsx)(f.Z,{}),children:"Cogstruction Data"}),(0,r.jsx)(j.Z,{variant:"contained",color:"primary",sx:{textTransform:"unset"},onClick:()=>{var t,n,e;return handleCopy(null==S?void 0:null===(e=S.account)||void 0===e?void 0:null===(n=e.construction)||void 0===n?void 0:null===(t=n.cogstruction)||void 0===t?void 0:t.empties)},startIcon:(0,r.jsx)(f.Z,{}),children:"Cogstruction Empties"})]})]}),(0,r.jsxs)(i.Z,{direction:"row",my:2,gap:2,children:[(0,r.jsx)(P.Ye,{title:"Total Build Speed",children:(0,r.jsxs)(i.Z,{alignItems:"center",gap:1,children:[(0,r.jsxs)(o.Z,{children:[(0,h.notateNumber)(null==S?void 0:null===(e=S.account)||void 0===e?void 0:null===(n=e.construction)||void 0===n?void 0:n.totalBuildRate),"/HR"]}),H?(0,r.jsx)(I.Z,{}):null,H?(0,r.jsxs)(o.Z,{sx:{color:"info.light"},children:[(0,h.notateNumber)(null==H?void 0:H.totalBuildRate),"/HR (+",(0,h.notateNumber)((null==H?void 0:H.totalBuildRate)-(null==S?void 0:null===(_=S.account)||void 0===_?void 0:null===(l=_.construction)||void 0===l?void 0:l.totalBuildRate)),")"]}):null]})}),(0,r.jsx)(P.Ye,{title:"Player XP Bonus",value:"".concat((0,h.notateNumber)(null==S?void 0:null===(w=S.account)||void 0===w?void 0:null===(y=w.construction)||void 0===y?void 0:y.totalExpRate),"%")}),(0,r.jsx)(P.Ye,{title:"Flaggy Rate",value:"".concat((0,h.notateNumber)(null==S?void 0:null===(O=S.account)||void 0===O?void 0:null===(B=O.construction)||void 0===B?void 0:B.totalFlaggyRate),"/HR")}),(0,r.jsx)(P.Ye,{title:"Hover",children:(0,r.jsx)(i.Z,{sx:{maxWidth:200},children:(0,r.jsx)(d.Z,{control:(0,r.jsx)(c.Z,{checked:W,onChange:()=>R(!W)}),name:"showTooltip",label:"Show tooltip"})})}),(0,r.jsx)(P.Ye,{title:"Optimize",children:(0,r.jsxs)(i.Z,{gap:1,children:[(0,r.jsx)(s.Z,{onChange:t=>{let{target:n}=t;return q(n.value)},type:"number",inputProps:{min:0},variant:"standard",label:"Solve time (in ms)",value:A}),(0,r.jsx)(v.Z,{fullWidth:!0,size:"small",variant:"standard",children:(0,r.jsx)(p.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:M,label:"Age",onChange:t=>F(t.target.value),children:(0,r.jsx)(k.Z,{value:"totalBuildRate",children:"Build speed"})})}),(0,r.jsx)(j.Z,{variant:"contained",onClick:()=>{var t,n,e;z(null==S?void 0:null===(t=S.account)||void 0===t?void 0:t.construction);let l=JSON.parse(JSON.stringify(null==S?void 0:null===(e=S.account)||void 0===e?void 0:null===(n=e.construction)||void 0===n?void 0:n.baseBoard)),r=(0,N.ai)(l,M);X({list:null==r?void 0:r.moves,current:0}),L(r)},children:"Optimize"})]})})]}),(0,r.jsx)(World3_ConstructionBoard,{view:T,showTooltip:W,setOutsideHighlight:D,relations:null==Y?void 0:Y.relations,move:V.list[V.current],board:null==Y?void 0:Y.board}),H?(0,r.jsx)(o.Z,{sx:{mt:3},variant:"caption",children:"* Hovering over a cog in the lower board will reveal where the same cog was originally placed on the upper board."}):null,H?(0,r.jsx)(World3_ConstructionBoard,{view:T,outsideHighlight:U,showTooltip:W,relations:null==H?void 0:H.relations,board:null==H?void 0:H.board}):null]})]})}},9751:function(t,n,e){"use strict";e.d(n,{BZ:function(){return calcCardBonus},OK:function(){return getCardBonusByEffect},V3:function(){return getPlayerCards},Xt:function(){return getEquippedCardBonus},vm:function(){return getCards}});var l=e(94978),r=e(1356);let getCards=(t,n)=>{var e;let l=(null==t?void 0:null===(e=t.Cards)||void 0===e?void 0:e[0])||(0,r.tryToParse)(null==t?void 0:t.Cards0),o=(0,r.tryToParse)(null==t?void 0:t.Rift)||(null==t?void 0:t.Rift);return parseCards(l,o,n)},calculateStars=(t,n,e,l)=>{let r=0;for(let o=0;o<4+ +l;o++)"Boss3B"===e?n>1.5*Math.pow(o+1+Math.floor(o/3),2)&&(r=o+2):n>t*Math.pow(o+1+(Math.floor(o/3)+16*Math.floor(o/4)),2)&&(r=o+2);return r>0?r-1:r},calculateAmountToNextLevel=(t,n,e)=>n>=5?0:t*Math.pow(n+1+(Math.floor((n+1)/4)+16*Math.floor((n+1)/5)),2)-e+1,parseCards=(t,n,e)=>{let[r]=n||[],o=r>=45;return Object.entries(t).reduce((t,n)=>{var r,i;let[a,u]=n,d=null===l.cards||void 0===l.cards?void 0:l.cards[a],c=(null==e?void 0:null===(r=e.accountOptions)||void 0===r?void 0:r[155])||"",s=(null==c?void 0:null===(i=c.toString())||void 0===i?void 0:i.split(","))||[],v=(null==s?void 0:s.includes(a))?5:calculateStars(null==d?void 0:d.perTier,u,a,o);return d?{...t,[null==d?void 0:d.displayName]:{...d,amount:u,stars:v,nextLevelReq:u+calculateAmountToNextLevel(null==d?void 0:d.perTier,v,u)}}:t},{})},calculateCardSetStars=(t,n)=>t&&n?n/(null==t?void 0:t.bonus)-1:null,getEquippedCardBonus=(t,n)=>{var e;let l=null==t?void 0:null===(e=t.equippedCards)||void 0===e?void 0:e.find(t=>{let{cardIndex:e}=t;return e===n});return l?calcCardBonus(l):0},getCardBonusByEffect=(t,n)=>{var e;return null===(e=Object.values(t))||void 0===e?void 0:e.reduce((t,e)=>{var l;return(null==e?void 0:null===(l=e.effect)||void 0===l?void 0:l.includes(n))?t+calcCardBonus(e):t},0)},calcCardBonus=t=>{var n,e,l;return t?(null==t?void 0:t.bonus)*((null!==(n=null==t?void 0:t.stars)&&void 0!==n?n:-1)+1)*(null!==(e=null==t?void 0:t.chipBoost)&&void 0!==e?e:1):0},getPlayerCards=(t,n)=>{var e,r,o,i;if(!(null==t?void 0:t.CSetEq)&&!(null==t?void 0:t.CardEquip))return{};let a=null==t?void 0:t.CSetEq,u=null==t?void 0:null===(e=t.CardEquip)||void 0===e?void 0:e.map(t=>{var e,r,o;return{cardName:null===l.cards||void 0===l.cards?void 0:null===(e=l.cards[t])||void 0===e?void 0:e.displayName,...(null==n?void 0:null===(o=n.cards)||void 0===o?void 0:o[null===l.cards||void 0===l.cards?void 0:null===(r=l.cards[t])||void 0===r?void 0:r.displayName])||{}}}).filter((t,n)=>n<8),d=l.cardSets[null===(r=Object.keys(a))||void 0===r?void 0:r[0]]||{};return{cardSet:{...d,bonus:null===(o=Object.values(a))||void 0===o?void 0:o[0],stars:calculateCardSetStars(d,null===(i=Object.values(a))||void 0===i?void 0:i[0])},equippedCards:u}}}},function(t){t.O(0,[5127,7121,1508,9774,2888,179],function(){return t(t.s=87789)}),_N_E=t.O()}]);