(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3446],{6242:function(e,n,l){"use strict";l.d(n,{Z:function(){return g}});var t=l(7462),o=l(3366),r=l(7294),i=l(6010),a=l(4780),d=l(948),s=l(1657),u=l(629),c=l(1588),v=l(4867);function m(e){return(0,v.Z)("MuiCard",e)}(0,c.Z)("MuiCard",["root"]);var f=l(5893);let h=["className","raised"],p=e=>{let{classes:n}=e;return(0,a.Z)({root:["root"]},m,n)},Z=(0,d.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,n)=>n.root})(()=>({overflow:"hidden"})),x=r.forwardRef(function(e,n){let l=(0,s.Z)({props:e,name:"MuiCard"}),{className:r,raised:a=!1}=l,d=(0,o.Z)(l,h),u=(0,t.Z)({},l,{raised:a}),c=p(u);return(0,f.jsx)(Z,(0,t.Z)({className:(0,i.Z)(c.root,r),elevation:a?8:void 0,ref:n,ownerState:u},d))});var g=x},4267:function(e,n,l){"use strict";l.d(n,{Z:function(){return x}});var t=l(7462),o=l(3366),r=l(7294),i=l(6010),a=l(4780),d=l(948),s=l(1657),u=l(1588),c=l(4867);function v(e){return(0,c.Z)("MuiCardContent",e)}(0,u.Z)("MuiCardContent",["root"]);var m=l(5893);let f=["className","component"],h=e=>{let{classes:n}=e;return(0,a.Z)({root:["root"]},v,n)},p=(0,d.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,n)=>n.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Z=r.forwardRef(function(e,n){let l=(0,s.Z)({props:e,name:"MuiCardContent"}),{className:r,component:a="div"}=l,d=(0,o.Z)(l,f),u=(0,t.Z)({},l,{component:a}),c=h(u);return(0,m.jsx)(p,(0,t.Z)({as:a,className:(0,i.Z)(c.root,r),ownerState:u,ref:n},d))});var x=Z},480:function(e,n,l){"use strict";l.d(n,{Z:function(){return M}});var t=l(3366),o=l(7462),r=l(7294),i=l(6010),a=l(4780),d=l(4423),s=l(5861),u=l(8216),c=l(948),v=l(1657),m=l(1588),f=l(4867);function h(e){return(0,f.Z)("MuiFormControlLabel",e)}let p=(0,m.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]);var Z=l(5704),x=l(5893);let g=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],b=e=>{let{classes:n,disabled:l,labelPlacement:t,error:o,required:r}=e,i={root:["root",l&&"disabled",`labelPlacement${(0,u.Z)(t)}`,o&&"error",r&&"required"],label:["label",l&&"disabled"],asterisk:["asterisk",o&&"error"]};return(0,a.Z)(i,h,n)},w=(0,c.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:l}=e;return[{[`& .${p.label}`]:n.label},n.root,n[`labelPlacement${(0,u.Z)(l.labelPlacement)}`]]}})(({theme:e,ownerState:n})=>(0,o.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${p.disabled}`]:{cursor:"default"}},"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},{[`& .${p.label}`]:{[`&.${p.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),j=(0,c.ZP)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,n)=>n.asterisk})(({theme:e})=>({[`&.${p.error}`]:{color:(e.vars||e).palette.error.main}})),C=r.forwardRef(function(e,n){var l,a;let u=(0,v.Z)({props:e,name:"MuiFormControlLabel"}),{className:c,componentsProps:m={},control:f,disabled:h,disableTypography:p,label:C,labelPlacement:M="end",required:P,slotProps:_={}}=u,N=(0,t.Z)(u,g),y=(0,d.Z)(),R=null!=(l=null!=h?h:f.props.disabled)?l:null==y?void 0:y.disabled,q=null!=P?P:f.props.required,k={disabled:R,required:q};["checked","name","onChange","value","inputRef"].forEach(e=>{void 0===f.props[e]&&void 0!==u[e]&&(k[e]=u[e])});let T=(0,Z.Z)({props:u,muiFormControl:y,states:["error"]}),D=(0,o.Z)({},u,{disabled:R,labelPlacement:M,required:q,error:T.error}),S=b(D),L=null!=(a=_.typography)?a:m.typography,E=C;return null==E||E.type===s.Z||p||(E=(0,x.jsx)(s.Z,(0,o.Z)({component:"span"},L,{className:(0,i.Z)(S.label,null==L?void 0:L.className),children:E}))),(0,x.jsxs)(w,(0,o.Z)({className:(0,i.Z)(S.root,c),ownerState:D,ref:n},N,{children:[r.cloneElement(f,k),E,q&&(0,x.jsxs)(j,{ownerState:D,"aria-hidden":!0,className:S.asterisk,children:["â€‰","*"]})]}))});var M=C},5558:function(e,n,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/world-3/buildings",function(){return l(9925)}])},3948:function(e,n,l){"use strict";var t=l(2729),o=l(5893),r=l(7294),i=l(6986),a=l(3913),d=l(9574),s=l(1599),u=l(5861);function c(){let e=(0,t._)(["\n  .overtime {\n    color: #f91d1d;\n  }\n"]);return c=function(){return e},e}let v=s.Z.span(c());n.Z=e=>{let{date:n,startDate:l,lastUpdated:t,stopAtZero:s,type:c,pause:m,staticTime:f,placeholder:h,loop:p,variant:Z="inherit"}=e,[x,g]=(0,r.useState)();(0,r.useEffect)(()=>{if(n){if(f){if(!isFinite(n))return;return g({...(0,d.getDuration)(new Date().getTime(),n)})}let e=new Date,l=e.getTime()-(null!=t?t:0),o=(0,a.Z)(n);g({...(0,d.getDuration)(null==e?void 0:e.getTime(),n+l*("countdown"===c?-1:1)),overtime:"countdown"===c&&o})}},[n,t]);let b=()=>{let{days:e,hours:n,minutes:l,seconds:t}=x;60===(t+=1)&&(t=0,60===(l+=1)&&(l=0,24===(n+=1)&&(e+=1))),g({...x,days:e,hours:n,minutes:l,seconds:t})},w=()=>{let{days:e,hours:n,minutes:t,seconds:o}=x;if(0===e&&0===n&&0===t&&0===o){if(s)return;if(p)return g({...(0,d.getDuration)(new Date().getTime(),l)})}-1==(o-=1)&&(o=59,-1==(t-=1)&&(t=59,-1==(n-=1)&&(n=0,e-=1))),g({...x,days:e,hours:n,minutes:t,seconds:o})};(0,i.Z)(()=>{if(!x)return null;"countdown"!==c||(null==x?void 0:x.overtime)?b():w()},m||f?null:1e3);let j=e=>{let n=String(e);return(null==n?void 0:n.length)===1?"0".concat(e):e};return x?(0,o.jsx)(v,{children:((null==x?void 0:x.overtime)||m)&&h?h:(0,o.jsxs)(u.Z,{variant:Z,className:"".concat((null==x?void 0:x.overtime)&&!p?"overtime":""),component:"span",children:[(null==x?void 0:x.days)?j(null==x?void 0:x.days)+"d:":"",j(null==x?void 0:x.hours)+"h:",j(null==x?void 0:x.minutes)+"m",(null==x?void 0:x.days)?"":":",(null==x?void 0:x.days)?"":j(null==x?void 0:x.seconds)+"s"]})}):null}},9925:function(e,n,l){"use strict";l.r(n);var t=l(2729),o=l(5893),r=l(7294),i=l(1490),a=l(5861),d=l(480),s=l(9368),u=l(1233),c=l(6242),v=l(4267),m=l(9574),f=l(1599),h=l(7277),p=l(2962),Z=l(3948),x=l(7315),g=l(1053);function b(){let e=(0,t._)(["\n  width: 50px;\n  height: 50px;\n  object-fit: contain;\n"]);return b=function(){return e},e}function w(){let e=(0,t._)(["\n  width: 35px;\n  height: 35px;\n  object-fit: contain;\n"]);return w=function(){return e},e}let j=f.Z.img(b()),C=f.Z.img(w());n.default=()=>{var e,n;let{state:l}=(0,r.useContext)(i.I),t=null==l?void 0:null===(e=l.account)||void 0===e?void 0:null===(n=e.construction)||void 0===n?void 0:n.totalBuildRate,f=(0,r.useMemo)(()=>{var e,n,t;return null==l?void 0:null===(e=l.account)||void 0===e?void 0:null===(n=e.towers)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.find(e=>5===e.index)},[l]),[b,w]=(0,r.useState)(!1),M=(e,n,l,t,o)=>e.map(e=>{let{rawName:r,name:i,amount:a}=e,d=Math.min(.1,.1*Math.floor((o.level+999)/1e3)),s=Math.max(0,o.level-1),u=Math.max(.2,1-(d+s*o.costInc[0]/100));return r.includes("Refinery")?{rawName:r,name:i,amount:Math.floor(u*a*(n+1))}:{rawName:r,name:i,amount:Math.floor(u*a*Math.pow(t+.03-(t+.03-1.05)*n/(l/2+n),n))}}),P=(e,n)=>6===n?e>=(null===h.q5||void 0===h.q5?void 0:h.q5[n])?30:0:5===n||4===n?e>=(null===h.q5||void 0===h.q5?void 0:h.q5[n])?100:0:3===n&&e>=(null===h.q5||void 0===h.q5?void 0:h.q5[n])?35:0,_=(e,n,l)=>50===n?Math.round(2*l+P(e,6,0)):101===n?P(e,4,0):100===n?P(e,5,0):15===n?P(e,3,0):0,N=(0,r.useMemo)(()=>{var e,n,o;return null==l?void 0:null===(e=l.account)||void 0===e?void 0:null===(n=e.towers)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.map(e=>{var n,o,r,i,a,d,s,u,c,v,m,p,Z;let{progress:g,level:b,maxLevel:w,bonusInc:j,itemReq:C,slot:P}=e,N=M(C,b,w,j,f),y=(0,h.ZX)(null==l?void 0:null===(n=l.account)||void 0===n?void 0:n.towers,b,j,null==e?void 0:e.index),R=null==l?void 0:null===(o=l.account)||void 0===o?void 0:null===(r=o.atoms)||void 0===r?void 0:null===(i=r.atoms)||void 0===i?void 0:i.find(e=>{let{name:n}=e;return"Carbon_-_Wizard_Maximizer"===n}),q=_(null==l?void 0:null===(a=l.account)||void 0===a?void 0:null===(d=a.towers)||void 0===d?void 0:d.totalLevels,w,null==R?void 0:R.level);w+=q;let k=(null===(s=null===(u=null==l?void 0:null===(c=l.account)||void 0===c?void 0:c.lab.jewels)||void 0===u?void 0:u.slice(3,7))||void 0===s?void 0:s.every(e=>{let{active:n}=e;return n}))?1:0,T=(null===(v=null==l?void 0:null===(m=l.account)||void 0===m?void 0:m.lab.jewels)||void 0===v?void 0:null===(p=v[3])||void 0===p?void 0:p.active)?1+k:0,D=(0,x._m)(null==l?void 0:l.account,"Nitrogen_-_Construction_Trimmer"),S=-1!==P&&P<T+(D?1:0);if(S){let e=(new Date().getTime()-(null!==(Z=null==l?void 0:l.lastUpdated)&&void 0!==Z?Z:0))/1e3;g+=(3+D/100)*(e/3600)*t}let L=(y-g)/t*36e5;return{...e,isMaxed:b===w,isSlotTrimmed:S,timeLeft:L,progress:g,buildCost:y,items:N}})},[null==l?void 0:l.account]),y=(0,r.useMemo)(()=>{if(!b)return N;let e=JSON.parse(JSON.stringify(N));return null==e?void 0:e.sort((e,n)=>{let l=((null==e?void 0:e.buildCost)-(null==e?void 0:e.progress))/t,o=((null==n?void 0:n.buildCost)-(null==n?void 0:n.progress))/t;return(null==e?void 0:e.inProgress)?(null==n?void 0:n.inProgress)?l-o:-1:1})},[b]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.PB,{title:"Idleon Toolbox | Buildings",description:"Keep track of your towers levels, bonuses and required materials for upgrades"}),(0,o.jsx)(a.Z,{variant:"h2",mb:3,children:"Buildings"}),(0,o.jsx)(d.Z,{control:(0,o.jsx)(s.Z,{name:"bySpeed",checked:b,size:"small",onChange:()=>w(!b)}),label:"Sort by time left"}),(0,o.jsx)(u.Z,{direction:"row",flexWrap:"wrap",gap:3,children:null==y?void 0:y.map((e,n)=>{let{name:t,progress:r,level:i,maxLevel:d,inProgress:s,isSlotTrimmed:f,isMaxed:h,items:p,buildCost:x,timeLeft:b}=e;return(0,o.jsx)(c.Z,{sx:{border:s||f?"1px solid":"",borderColor:f?"warning.light":s&&r<x?"success.light":"",width:{xs:"100%",md:450},height:{md:160}},children:(0,o.jsx)(v.Z,{children:(0,o.jsxs)(u.Z,{direction:"row",sx:{gap:{xs:2,sm:3}},flexWrap:"wrap",children:[(0,o.jsxs)(u.Z,{alignItems:"center",sx:{width:105,textAlign:"center"},children:[(0,o.jsx)(a.Z,{children:(0,m.cleanUnderscore)(t)}),(0,o.jsx)(j,{src:"".concat(m.prefix,"data/ConTower").concat(null==e?void 0:e.index,".png"),alt:""}),(0,o.jsxs)(a.Z,{children:["Lv. ",i," / ",d]}),h?null:(0,o.jsx)(Z.Z,{type:"countdown",staticTime:!s,date:new Date().getTime()+b,lastUpdated:null==l?void 0:l.lastUpdated})]}),(0,o.jsxs)(u.Z,{sx:{width:100},children:[(0,o.jsx)(a.Z,{mb:2,children:"Progress"}),h?(0,o.jsx)(a.Z,{color:"success.light",children:"MAXED"}):(0,o.jsx)(g.Z,{title:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.Z,{children:["Progress: ",(0,m.numberWithCommas)(Math.floor(r))]}),(0,o.jsxs)(a.Z,{children:["Requirement: ",(0,m.numberWithCommas)(Math.floor(x))]})]}),children:(0,o.jsxs)(a.Z,{children:[(0,m.notateNumber)(r,"Big")," / ",(0,m.notateNumber)(x,"Big")]})})]}),i===d?null:(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(a.Z,{mb:2,children:"Cost"}),(0,o.jsx)(u.Z,{direction:"row",gap:1,children:null==p?void 0:p.map((e,n)=>{let{rawName:l,amount:r}=e;return(0,o.jsxs)(u.Z,{alignItems:"center",children:[(0,o.jsx)(C,{src:"".concat(m.prefix,"data/").concat(l,".png"),alt:""}),(0,o.jsx)(a.Z,{children:r})]},"".concat(t,"-").concat(l,"-").concat(n))})})]})]})})},"".concat(t,"-").concat(n))})})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=5558)}),_N_E=e.O()}]);