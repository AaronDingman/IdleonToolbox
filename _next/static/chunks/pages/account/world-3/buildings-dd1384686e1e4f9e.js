(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3446],{75558:function(n,e,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/world-3/buildings",function(){return l(19925)}])},33948:function(n,e,l){"use strict";var i=l(85893),o=l(67294),t=l(96986),r=l(33913),d=l(39574),u=l(15861);e.Z=n=>{let{date:e,startDate:l,lastUpdated:s,stopAtZero:a,type:c,pause:v,staticTime:h,placeholder:x,loop:m,variant:f="inherit"}=n,[g,p]=(0,o.useState)();(0,o.useEffect)(()=>{if(e){if(h){if(!isFinite(e))return;return p({...(0,d.getDuration)(new Date().getTime(),e)})}let n=new Date,l=n.getTime()-(null!=s?s:0),i=(0,r.Z)(e);p({...(0,d.getDuration)(null==n?void 0:n.getTime(),e+l*("countdown"===c?-1:1)),overtime:"countdown"===c&&i})}},[e,s]);let j=()=>{let{days:n,hours:e,minutes:l,seconds:i}=g;60===(i+=1)&&(i=0,60===(l+=1)&&(l=0,24===(e+=1)&&(n+=1))),p({...g,days:n,hours:e,minutes:l,seconds:i})},w=()=>{let{days:n,hours:e,minutes:i,seconds:o}=g;if(0===n&&0===e&&0===i&&0===o){if(a)return;if(m)return p({...(0,d.getDuration)(new Date().getTime(),l)})}-1==(o-=1)&&(o=59,-1==(i-=1)&&(i=59,-1==(e-=1)&&(e=0,n-=1))),p({...g,days:n,hours:e,minutes:i,seconds:o})};(0,t.Z)(()=>{if(!g)return null;"countdown"!==c||(null==g?void 0:g.overtime)?j():w()},v||h?null:1e3);let Z=n=>{let e=String(n);return(null==e?void 0:e.length)===1?"0".concat(n):n};return g?((null==g?void 0:g.overtime)||v)&&x?x:(0,i.jsxs)(u.Z,{variant:f,sx:{color:"".concat((null==g?void 0:g.overtime)&&!m?"#f91d1d":"")},component:"span",children:[(null==g?void 0:g.days)?Z(null==g?void 0:g.days)+"d:":"",Z(null==g?void 0:g.hours)+"h:",Z(null==g?void 0:g.minutes)+"m",(null==g?void 0:g.days)?"":":",(null==g?void 0:g.days)?"":Z(null==g?void 0:g.seconds)+"s"]}):null}},19925:function(n,e,l){"use strict";l.r(e);var i=l(82729),o=l(85893),t=l(67294),r=l(41422),d=l(15861),u=l(33454),s=l(96420),a=l(51233),c=l(66242),v=l(44267),h=l(39574),x=l(61599),m=l(57277),f=l(2962),g=l(33948),p=l(47315),j=l(51053);function w(){let n=(0,i._)(["\n  width: 50px;\n  height: 50px;\n  object-fit: contain;\n"]);return w=function(){return n},n}function Z(){let n=(0,i._)(["\n  width: 35px;\n  height: 35px;\n  object-fit: contain;\n"]);return Z=function(){return n},n}let b=x.Z.img(w()),_=x.Z.img(Z());e.default=()=>{var n,e;let{state:l}=(0,t.useContext)(r.I),[i,x]=(0,t.useState)("order"),w=null==l?void 0:null===(n=l.account)||void 0===n?void 0:null===(e=n.construction)||void 0===e?void 0:e.totalBuildRate,Z=(0,t.useMemo)(()=>{var n,e,i;return null==l?void 0:null===(n=l.account)||void 0===n?void 0:null===(e=n.towers)||void 0===e?void 0:null===(i=e.data)||void 0===i?void 0:i.find(n=>5===n.index)},[l]),M=(n,e,l,i,o)=>n.map(n=>{let{rawName:t,name:r,amount:d}=n,u=Math.min(.1,.1*Math.floor((o.level+999)/1e3)),s=Math.max(0,o.level-1),a=Math.max(.2,1-(u+s*o.costInc[0]/100));return t.includes("Refinery")?{rawName:t,name:r,amount:Math.floor(a*d*(e+1))}:{rawName:t,name:r,amount:Math.floor(a*d*Math.pow(i+.03-(i+.03-1.05)*e/(l/2+e),e))}}),C=(n,e)=>6===e?n>=(null===m.q5||void 0===m.q5?void 0:m.q5[e])?30:0:5===e||4===e?n>=(null===m.q5||void 0===m.q5?void 0:m.q5[e])?100:0:3===e&&n>=(null===m.q5||void 0===m.q5?void 0:m.q5[e])?35:0,q=(n,e,l)=>50===e?Math.round(2*l+C(n,6,0)):101===e?C(n,4,0):100===e?C(n,5,0):15===e?C(n,3,0):0,T=(0,t.useMemo)(()=>{var n,e,i;return null==l?void 0:null===(n=l.account)||void 0===n?void 0:null===(e=n.towers)||void 0===e?void 0:null===(i=e.data)||void 0===i?void 0:i.map(n=>{var e,i,o,t,r,d,u,s,a,c,v,h,x;let{progress:f,level:g,maxLevel:j,bonusInc:b,itemReq:_,slot:C}=n,T=M(_,g,j,b,Z),N=(0,m.ZX)(null==l?void 0:null===(e=l.account)||void 0===e?void 0:e.towers,g,b,null==n?void 0:n.index),y=null==l?void 0:null===(i=l.account)||void 0===i?void 0:null===(o=i.atoms)||void 0===o?void 0:null===(t=o.atoms)||void 0===t?void 0:t.find(n=>{let{name:e}=n;return"Carbon_-_Wizard_Maximizer"===e}),D=q(null==l?void 0:null===(r=l.account)||void 0===r?void 0:null===(d=r.towers)||void 0===d?void 0:d.totalLevels,j,null==y?void 0:y.level);j+=D;let S=(null===(u=null===(s=null==l?void 0:null===(a=l.account)||void 0===a?void 0:a.lab.jewels)||void 0===s?void 0:s.slice(3,7))||void 0===u?void 0:u.every(n=>{let{active:e}=n;return e}))?1:0,B=(null===(c=null==l?void 0:null===(v=l.account)||void 0===v?void 0:v.lab.jewels)||void 0===c?void 0:null===(h=c[3])||void 0===h?void 0:h.active)?1+S:0,E=(0,p._m)(null==l?void 0:l.account,"Nitrogen_-_Construction_Trimmer"),O=-1!==C&&C<B+(E?1:0);if(O){let n=(new Date().getTime()-(null!==(x=null==l?void 0:l.lastUpdated)&&void 0!==x?x:0))/1e3;f+=(3+E/100)*(n/3600)*w}let P=(N-f)/w*36e5;return{...n,maxLevel:j,isMaxed:g===j,isSlotTrimmed:O,timeLeft:P,progress:f,buildCost:N,items:T}})},[null==l?void 0:l.account]),N=(0,t.useMemo)(()=>{if("order"===i)return T;if("time"===i){let n=JSON.parse(JSON.stringify(T));return null==n?void 0:n.sort((n,e)=>{let l=((null==n?void 0:n.buildCost)-(null==n?void 0:n.progress))/w,i=((null==e?void 0:e.buildCost)-(null==e?void 0:e.progress))/w;return(null==n?void 0:n.isMaxed)?1:(null==e?void 0:e.isMaxed)?-1:(null==n?void 0:n.inProgress)?(null==e?void 0:e.inProgress)?l-i:-1:1})}if("requirement"===i){let n=JSON.parse(JSON.stringify(T));return null==n?void 0:n.sort((n,e)=>(null==n?void 0:n.isMaxed)?1:(null==e?void 0:e.isMaxed)?-1:(null==n?void 0:n.buildCost)-(null==e?void 0:e.buildCost))}},[i]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.PB,{title:"Idleon Toolbox | Buildings",description:"Keep track of your towers levels, bonuses and required materials for upgrades"}),(0,o.jsx)(d.Z,{variant:"h2",mb:3,children:"Buildings"}),(0,o.jsx)(d.Z,{children:"Sort by"}),(0,o.jsxs)(u.Z,{value:i,sx:{mb:2},exclusive:!0,onChange:(n,e)=>x(e),children:[(0,o.jsx)(s.Z,{value:"order",children:"Order"}),(0,o.jsx)(s.Z,{value:"time",children:"Time left"}),(0,o.jsx)(s.Z,{value:"requirement",children:"Build cost"})]}),(0,o.jsx)(a.Z,{direction:"row",flexWrap:"wrap",gap:3,children:null==N?void 0:N.map((n,e)=>{let{name:i,progress:t,level:r,maxLevel:u,inProgress:s,isSlotTrimmed:x,isMaxed:m,items:f,buildCost:p,timeLeft:w}=n;return(0,o.jsx)(c.Z,{sx:{border:s||x?"1px solid":"",borderColor:x?"warning.light":s&&t<p?"success.light":"",width:{xs:"100%",md:450},height:{md:165}},children:(0,o.jsx)(v.Z,{children:(0,o.jsxs)(a.Z,{direction:"row",sx:{gap:{xs:2,sm:3}},flexWrap:"wrap",children:[(0,o.jsxs)(a.Z,{alignItems:"center",sx:{width:105,textAlign:"center"},children:[(0,o.jsx)(d.Z,{children:(0,h.cleanUnderscore)(i)}),(0,o.jsx)(b,{src:"".concat(h.prefix,"data/ConTower").concat(null==n?void 0:n.index,".png"),alt:""}),(0,o.jsxs)(d.Z,{children:["Lv. ",r," / ",u]}),m?null:(0,o.jsx)(g.Z,{type:"countdown",staticTime:!s,date:new Date().getTime()+w,lastUpdated:null==l?void 0:l.lastUpdated})]}),(0,o.jsxs)(a.Z,{sx:{width:100},children:[(0,o.jsx)(d.Z,{mb:2,children:"Progress"}),m?(0,o.jsx)(d.Z,{color:"success.light",children:"MAXED"}):(0,o.jsx)(j.Z,{title:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(d.Z,{children:["Progress: ",(0,h.numberWithCommas)(Math.floor(t))]}),(0,o.jsxs)(d.Z,{children:["Requirement: ",(0,h.numberWithCommas)(Math.floor(p))]})]}),children:(0,o.jsxs)(d.Z,{children:[(0,h.notateNumber)(t,"Big")," / ",(0,h.notateNumber)(p,"Big")]})})]}),r===u?null:(0,o.jsxs)(a.Z,{children:[(0,o.jsx)(d.Z,{mb:2,children:"Cost"}),(0,o.jsx)(a.Z,{direction:"row",gap:1,children:null==f?void 0:f.map((n,e)=>{let{rawName:l,amount:t}=n;return(0,o.jsxs)(a.Z,{alignItems:"center",children:[(0,o.jsx)(_,{src:"".concat(h.prefix,"data/").concat(l,".png"),alt:""}),(0,o.jsx)(d.Z,{children:t})]},"".concat(i,"-").concat(l,"-").concat(e))})})]})]})})},"".concat(i,"-").concat(e))})})]})}}},function(n){n.O(0,[3383,9774,2888,179],function(){return n(n.s=75558)}),_N_E=n.O()}]);