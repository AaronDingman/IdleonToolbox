(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3446],{66242:function(e,l,n){"use strict";n.d(l,{Z:function(){return g}});var t=n(87462),o=n(63366),r=n(67294),i=n(86010),a=n(94780),d=n(90948),s=n(71657),u=n(90629),c=n(1588),v=n(34867);function m(e){return(0,v.Z)("MuiCard",e)}(0,c.Z)("MuiCard",["root"]);var h=n(85893);let f=["className","raised"],p=e=>{let{classes:l}=e;return(0,a.Z)({root:["root"]},m,l)},Z=(0,d.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,l)=>l.root})(()=>({overflow:"hidden"})),x=r.forwardRef(function(e,l){let n=(0,s.Z)({props:e,name:"MuiCard"}),{className:r,raised:a=!1}=n,d=(0,o.Z)(n,f),u=(0,t.Z)({},n,{raised:a}),c=p(u);return(0,h.jsx)(Z,(0,t.Z)({className:(0,i.Z)(c.root,r),elevation:a?8:void 0,ref:l,ownerState:u},d))});var g=x},44267:function(e,l,n){"use strict";n.d(l,{Z:function(){return x}});var t=n(87462),o=n(63366),r=n(67294),i=n(86010),a=n(94780),d=n(90948),s=n(71657),u=n(1588),c=n(34867);function v(e){return(0,c.Z)("MuiCardContent",e)}(0,u.Z)("MuiCardContent",["root"]);var m=n(85893);let h=["className","component"],f=e=>{let{classes:l}=e;return(0,a.Z)({root:["root"]},v,l)},p=(0,d.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,l)=>l.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Z=r.forwardRef(function(e,l){let n=(0,s.Z)({props:e,name:"MuiCardContent"}),{className:r,component:a="div"}=n,d=(0,o.Z)(n,h),u=(0,t.Z)({},n,{component:a}),c=f(u);return(0,m.jsx)(p,(0,t.Z)({as:a,className:(0,i.Z)(c.root,r),ownerState:u,ref:l},d))});var x=Z},50480:function(e,l,n){"use strict";n.d(l,{Z:function(){return M}});var t=n(63366),o=n(87462),r=n(67294),i=n(86010),a=n(94780),d=n(74423),s=n(15861),u=n(98216),c=n(90948),v=n(71657),m=n(1588),h=n(34867);function f(e){return(0,h.Z)("MuiFormControlLabel",e)}let p=(0,m.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]);var Z=n(15704),x=n(85893);let g=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],b=e=>{let{classes:l,disabled:n,labelPlacement:t,error:o,required:r}=e,i={root:["root",n&&"disabled",`labelPlacement${(0,u.Z)(t)}`,o&&"error",r&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",o&&"error"]};return(0,a.Z)(i,f,l)},w=(0,c.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,l)=>{let{ownerState:n}=e;return[{[`& .${p.label}`]:l.label},l.root,l[`labelPlacement${(0,u.Z)(n.labelPlacement)}`]]}})(({theme:e,ownerState:l})=>(0,o.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${p.disabled}`]:{cursor:"default"}},"start"===l.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===l.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===l.labelPlacement&&{flexDirection:"column",marginLeft:16},{[`& .${p.label}`]:{[`&.${p.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),j=(0,c.ZP)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,l)=>l.asterisk})(({theme:e})=>({[`&.${p.error}`]:{color:(e.vars||e).palette.error.main}})),C=r.forwardRef(function(e,l){var n,a;let u=(0,v.Z)({props:e,name:"MuiFormControlLabel"}),{className:c,componentsProps:m={},control:h,disabled:f,disableTypography:p,label:C,labelPlacement:M="end",required:P,slotProps:_={}}=u,y=(0,t.Z)(u,g),N=(0,d.Z)(),R=null!=(n=null!=f?f:h.props.disabled)?n:null==N?void 0:N.disabled,q=null!=P?P:h.props.required,k={disabled:R,required:q};["checked","name","onChange","value","inputRef"].forEach(e=>{void 0===h.props[e]&&void 0!==u[e]&&(k[e]=u[e])});let T=(0,Z.Z)({props:u,muiFormControl:N,states:["error"]}),D=(0,o.Z)({},u,{disabled:R,labelPlacement:M,required:q,error:T.error}),S=b(D),L=null!=(a=_.typography)?a:m.typography,E=C;return null==E||E.type===s.Z||p||(E=(0,x.jsx)(s.Z,(0,o.Z)({component:"span"},L,{className:(0,i.Z)(S.label,null==L?void 0:L.className),children:E}))),(0,x.jsxs)(w,(0,o.Z)({className:(0,i.Z)(S.root,c),ownerState:D,ref:l},y,{children:[r.cloneElement(h,k),E,q&&(0,x.jsxs)(j,{ownerState:D,"aria-hidden":!0,className:S.asterisk,children:["â€‰","*"]})]}))});var M=C},75558:function(e,l,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/world-3/buildings",function(){return n(19925)}])},33948:function(e,l,n){"use strict";var t=n(85893),o=n(67294),r=n(96986),i=n(33913),a=n(39574),d=n(15861);l.Z=e=>{let{date:l,startDate:n,lastUpdated:s,stopAtZero:u,type:c,pause:v,staticTime:m,placeholder:h,loop:f,variant:p="inherit"}=e,[Z,x]=(0,o.useState)();(0,o.useEffect)(()=>{if(l){if(m){if(!isFinite(l))return;return x({...(0,a.getDuration)(new Date().getTime(),l)})}let e=new Date,n=e.getTime()-(null!=s?s:0),t=(0,i.Z)(l);x({...(0,a.getDuration)(null==e?void 0:e.getTime(),l+n*("countdown"===c?-1:1)),overtime:"countdown"===c&&t})}},[l,s]);let g=()=>{let{days:e,hours:l,minutes:n,seconds:t}=Z;60===(t+=1)&&(t=0,60===(n+=1)&&(n=0,24===(l+=1)&&(e+=1))),x({...Z,days:e,hours:l,minutes:n,seconds:t})},b=()=>{let{days:e,hours:l,minutes:t,seconds:o}=Z;if(0===e&&0===l&&0===t&&0===o){if(u)return;if(f)return x({...(0,a.getDuration)(new Date().getTime(),n)})}-1==(o-=1)&&(o=59,-1==(t-=1)&&(t=59,-1==(l-=1)&&(l=0,e-=1))),x({...Z,days:e,hours:l,minutes:t,seconds:o})};(0,r.Z)(()=>{if(!Z)return null;"countdown"!==c||(null==Z?void 0:Z.overtime)?g():b()},v||m?null:1e3);let w=e=>{let l=String(e);return(null==l?void 0:l.length)===1?"0".concat(e):e};return Z?((null==Z?void 0:Z.overtime)||v)&&h?h:(0,t.jsxs)(d.Z,{variant:p,sx:{color:"".concat((null==Z?void 0:Z.overtime)&&!f?"#f91d1d":"")},component:"span",children:[(null==Z?void 0:Z.days)?w(null==Z?void 0:Z.days)+"d:":"",w(null==Z?void 0:Z.hours)+"h:",w(null==Z?void 0:Z.minutes)+"m",(null==Z?void 0:Z.days)?"":":",(null==Z?void 0:Z.days)?"":w(null==Z?void 0:Z.seconds)+"s"]}):null}},19925:function(e,l,n){"use strict";n.r(l);var t=n(82729),o=n(85893),r=n(67294),i=n(79597),a=n(15861),d=n(50480),s=n(69368),u=n(51233),c=n(66242),v=n(44267),m=n(39574),h=n(61599),f=n(57277),p=n(2962),Z=n(33948),x=n(47315),g=n(51053);function b(){let e=(0,t._)(["\n  width: 50px;\n  height: 50px;\n  object-fit: contain;\n"]);return b=function(){return e},e}function w(){let e=(0,t._)(["\n  width: 35px;\n  height: 35px;\n  object-fit: contain;\n"]);return w=function(){return e},e}let j=h.Z.img(b()),C=h.Z.img(w());l.default=()=>{var e,l;let{state:n}=(0,r.useContext)(i.I),t=null==n?void 0:null===(e=n.account)||void 0===e?void 0:null===(l=e.construction)||void 0===l?void 0:l.totalBuildRate,h=(0,r.useMemo)(()=>{var e,l,t;return null==n?void 0:null===(e=n.account)||void 0===e?void 0:null===(l=e.towers)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.find(e=>5===e.index)},[n]),[b,w]=(0,r.useState)(!1),M=(e,l,n,t,o)=>e.map(e=>{let{rawName:r,name:i,amount:a}=e,d=Math.min(.1,.1*Math.floor((o.level+999)/1e3)),s=Math.max(0,o.level-1),u=Math.max(.2,1-(d+s*o.costInc[0]/100));return r.includes("Refinery")?{rawName:r,name:i,amount:Math.floor(u*a*(l+1))}:{rawName:r,name:i,amount:Math.floor(u*a*Math.pow(t+.03-(t+.03-1.05)*l/(n/2+l),l))}}),P=(e,l)=>6===l?e>=(null===f.q5||void 0===f.q5?void 0:f.q5[l])?30:0:5===l||4===l?e>=(null===f.q5||void 0===f.q5?void 0:f.q5[l])?100:0:3===l&&e>=(null===f.q5||void 0===f.q5?void 0:f.q5[l])?35:0,_=(e,l,n)=>50===l?Math.round(2*n+P(e,6,0)):101===l?P(e,4,0):100===l?P(e,5,0):15===l?P(e,3,0):0,y=(0,r.useMemo)(()=>{var e,l,o;return null==n?void 0:null===(e=n.account)||void 0===e?void 0:null===(l=e.towers)||void 0===l?void 0:null===(o=l.data)||void 0===o?void 0:o.map(e=>{var l,o,r,i,a,d,s,u,c,v,m,p,Z;let{progress:g,level:b,maxLevel:w,bonusInc:j,itemReq:C,slot:P}=e,y=M(C,b,w,j,h),N=(0,f.ZX)(null==n?void 0:null===(l=n.account)||void 0===l?void 0:l.towers,b,j,null==e?void 0:e.index),R=null==n?void 0:null===(o=n.account)||void 0===o?void 0:null===(r=o.atoms)||void 0===r?void 0:null===(i=r.atoms)||void 0===i?void 0:i.find(e=>{let{name:l}=e;return"Carbon_-_Wizard_Maximizer"===l}),q=_(null==n?void 0:null===(a=n.account)||void 0===a?void 0:null===(d=a.towers)||void 0===d?void 0:d.totalLevels,w,null==R?void 0:R.level);w+=q;let k=(null===(s=null===(u=null==n?void 0:null===(c=n.account)||void 0===c?void 0:c.lab.jewels)||void 0===u?void 0:u.slice(3,7))||void 0===s?void 0:s.every(e=>{let{active:l}=e;return l}))?1:0,T=(null===(v=null==n?void 0:null===(m=n.account)||void 0===m?void 0:m.lab.jewels)||void 0===v?void 0:null===(p=v[3])||void 0===p?void 0:p.active)?1+k:0,D=(0,x._m)(null==n?void 0:n.account,"Nitrogen_-_Construction_Trimmer"),S=-1!==P&&P<T+(D?1:0);if(S){let e=(new Date().getTime()-(null!==(Z=null==n?void 0:n.lastUpdated)&&void 0!==Z?Z:0))/1e3;g+=(3+D/100)*(e/3600)*t}let L=(N-g)/t*36e5;return{...e,isMaxed:b===w,isSlotTrimmed:S,timeLeft:L,progress:g,buildCost:N,items:y}})},[null==n?void 0:n.account]),N=(0,r.useMemo)(()=>{if(!b)return y;let e=JSON.parse(JSON.stringify(y));return null==e?void 0:e.sort((e,l)=>{let n=((null==e?void 0:e.buildCost)-(null==e?void 0:e.progress))/t,o=((null==l?void 0:l.buildCost)-(null==l?void 0:l.progress))/t;return(null==e?void 0:e.inProgress)?(null==l?void 0:l.inProgress)?n-o:-1:1})},[b]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.PB,{title:"Idleon Toolbox | Buildings",description:"Keep track of your towers levels, bonuses and required materials for upgrades"}),(0,o.jsx)(a.Z,{variant:"h2",mb:3,children:"Buildings"}),(0,o.jsx)(d.Z,{control:(0,o.jsx)(s.Z,{name:"bySpeed",checked:b,size:"small",onChange:()=>w(!b)}),label:"Sort by time left"}),(0,o.jsx)(u.Z,{direction:"row",flexWrap:"wrap",gap:3,children:null==N?void 0:N.map((e,l)=>{let{name:t,progress:r,level:i,maxLevel:d,inProgress:s,isSlotTrimmed:h,isMaxed:f,items:p,buildCost:x,timeLeft:b}=e;return(0,o.jsx)(c.Z,{sx:{border:s||h?"1px solid":"",borderColor:h?"warning.light":s&&r<x?"success.light":"",width:{xs:"100%",md:450},height:{md:160}},children:(0,o.jsx)(v.Z,{children:(0,o.jsxs)(u.Z,{direction:"row",sx:{gap:{xs:2,sm:3}},flexWrap:"wrap",children:[(0,o.jsxs)(u.Z,{alignItems:"center",sx:{width:105,textAlign:"center"},children:[(0,o.jsx)(a.Z,{children:(0,m.cleanUnderscore)(t)}),(0,o.jsx)(j,{src:"".concat(m.prefix,"data/ConTower").concat(null==e?void 0:e.index,".png"),alt:""}),(0,o.jsxs)(a.Z,{children:["Lv. ",i," / ",d]}),f?null:(0,o.jsx)(Z.Z,{type:"countdown",staticTime:!s,date:new Date().getTime()+b,lastUpdated:null==n?void 0:n.lastUpdated})]}),(0,o.jsxs)(u.Z,{sx:{width:100},children:[(0,o.jsx)(a.Z,{mb:2,children:"Progress"}),f?(0,o.jsx)(a.Z,{color:"success.light",children:"MAXED"}):(0,o.jsx)(g.Z,{title:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.Z,{children:["Progress: ",(0,m.numberWithCommas)(Math.floor(r))]}),(0,o.jsxs)(a.Z,{children:["Requirement: ",(0,m.numberWithCommas)(Math.floor(x))]})]}),children:(0,o.jsxs)(a.Z,{children:[(0,m.notateNumber)(r,"Big")," / ",(0,m.notateNumber)(x,"Big")]})})]}),i===d?null:(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(a.Z,{mb:2,children:"Cost"}),(0,o.jsx)(u.Z,{direction:"row",gap:1,children:null==p?void 0:p.map((e,l)=>{let{rawName:n,amount:r}=e;return(0,o.jsxs)(u.Z,{alignItems:"center",children:[(0,o.jsx)(C,{src:"".concat(m.prefix,"data/").concat(n,".png"),alt:""}),(0,o.jsx)(a.Z,{children:r})]},"".concat(t,"-").concat(n,"-").concat(l))})})]})]})})},"".concat(t,"-").concat(l))})})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=75558)}),_N_E=e.O()}]);