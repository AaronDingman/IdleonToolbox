(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{69822:function(l,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/world-2/bubbles",function(){return n(82004)}])},82004:function(l,i,n){"use strict";n.r(i);var e=n(82729),o=n(85893),t=n(98396),d=n(15861),u=n(67720),a=n(51233),c=n(50480),r=n(69368),v=n(61903),s=n(87109),h=n(66242),x=n(44267),b=n(11703),m=n(40044),g=n(21023),p=n(67294),j=n(41422),f=n(61599),Z=n(39574),y=n(51053),w=n(91296),C=n.n(w),_=n(64529),B=n(2962),I=n(29222),M=n(87357);function k(){let l=(0,e._)(["\n  width: 32px;\n  height: 32px;\n  object-fit: contain;\n"]);return k=function(){return l},l}function N(){let l=(0,e._)(["\n  width: 32px;\n  height: 32px;\n"]);return N=function(){return l},l}function L(){let l=(0,e._)(["\n  opacity: ",";\n"]);return L=function(){return l},l}let S=l=>{let{title:i,bubbles:n,lithium:e,accumulatedCost:t,account:u}=l;return(0,o.jsxs)(a.Z,{justifyContent:"center",alignItems:"center",children:[(0,o.jsx)(d.Z,{children:i}),e?(0,o.jsx)(d.Z,{variant:"caption",children:"* 15% chance to be upgraded by lithium (atom collider)"}):null,(0,o.jsx)(a.Z,{direction:"row",flexWrap:"wrap",gap:1,children:null==n?void 0:n.map((l,i)=>{var n,c,r,v,s,h,x,b,m;let{rawName:p,bubbleName:j,level:f,itemReq:w,index:C,cauldron:_}=l,{singleLevelCost:B,total:M}=t(C,f,null==w?void 0:null===(n=w[0])||void 0===n?void 0:n.baseCost,null==w?void 0:null===(c=w[0])||void 0===c?void 0:null===(r=c.name)||void 0===r?void 0:r.includes("Liquid"),_),k=B>1e8&&!(null==w?void 0:null===(v=w[0])||void 0===v?void 0:null===(s=v.name)||void 0===s?void 0:s.includes("Liquid"))&&!(null==w?void 0:null===(h=w[0])||void 0===h?void 0:null===(x=h.name)||void 0===x?void 0:x.includes("Bits"))&&(0,I.a2)(C,B);return(0,o.jsxs)(a.Z,{alignItems:"center",children:[(0,o.jsx)(y.Z,{title:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{sx:{fontWeight:"bold"},children:(0,Z.pascalCase)((0,Z.cleanUnderscore)(j))}),(0,o.jsx)(a.Z,{direction:"row",justifyContent:"center",gap:1,children:null==w?void 0:w.map((l,i)=>{let{rawName:n}=l;if("Blank"===n||"ERROR"===n||n.includes("Liquid"))return null;let e=["sail","bits"].find(l=>n.toLowerCase().includes(l))?"".concat(n,"_x1"):n;return(0,o.jsxs)(a.Z,{alignItems:"center",direction:"row",gap:1,children:[(0,o.jsxs)(a.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,o.jsx)(O,{src:"".concat(Z.prefix,"data/").concat(e,".png"),alt:""}),(0,o.jsx)(d.Z,{children:(0,Z.notateNumber)(M,"Big")})]}),k>0?(0,o.jsxs)(a.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,o.jsx)(a.Z,{sx:{width:32,height:32},alignItems:"center",justifyContent:"center",children:(0,o.jsx)("img",{width:18,height:18,src:"".concat(Z.prefix,"etc/Particle.png"),alt:""})}),(0,o.jsx)(d.Z,{children:k})]}):null]},"req"+n+i)})})]}),children:(0,o.jsx)("img",{style:{opacity:e?.8:1},width:42,height:42,src:"".concat(Z.prefix,"data/").concat(p,".png"),alt:""})}),(0,o.jsxs)(a.Z,{direction:"row",alignItems:"center",gap:.5,children:[k>0?(0,o.jsx)(g.Z,{title:(0,o.jsxs)(d.Z,{color:(null==u?void 0:null===(b=u.atoms)||void 0===b?void 0:b.particles)>k?"success.light":"",children:[Math.floor(null==u?void 0:null===(m=u.atoms)||void 0===m?void 0:m.particles)," / ",k]}),children:(0,o.jsx)("img",{width:18,height:18,src:"".concat(Z.prefix,"etc/Particle.png"),alt:""})}):null,(0,o.jsx)(d.Z,{variant:"body1",children:f})]})]},"".concat(p,"-").concat(i,"-").concat(e,"-nblb"))})})]})},q=f.Z.img(k()),O=f.Z.img(N()),P=f.Z.img(L(),l=>{let{level:i}=l;return 0===i?.5:1}),E=l=>{let{goalLevel:i,bubbleName:n,desc:e,func:t,x1:u,x2:a,level:c}=l,r=(0,Z.growth)(t,c,u,a,!0),v=(0,Z.growth)(t,i,u,a,!0);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{fontWeight:"bold",variant:"h6",children:(0,Z.cleanUnderscore)(n)}),(0,o.jsx)(d.Z,{variant:"body1",children:(0,Z.cleanUnderscore)(e.replace(/{/,r))}),c!==i?(0,o.jsxs)(d.Z,{sx:{color:c>0?"multi":""},variant:"body1",children:["Goal: +",v]}):null]})};i.default=()=>{var l,i,n,e,f,w,k,N,L;let{state:T}=(0,p.useContext)(j.I),R=(0,t.Z)(l=>l.breakpoints.down("md"),{noSsr:!0}),[W,A]=(0,p.useState)(!1),[F,z]=(0,p.useState)(0),[U,D]=(0,p.useState)(0),[G,V]=(0,p.useState)(),[X,K]=(0,p.useState)(),Y=(0,p.useMemo)(()=>{var l,i,n,e;return null===(l=null==T?void 0:null===(i=T.account)||void 0===i?void 0:null===(n=i.lab)||void 0===n?void 0:null===(e=n.labBonuses)||void 0===e?void 0:e.find(l=>"My_1st_Chemistry_Set"===l.name))||void 0===l?void 0:l.active},[null==T?void 0:null===(l=T.account)||void 0===l?void 0:l.lab.vials]);(0,p.useEffect)(()=>{var l,i,n,e,o,t;let d=null===(l=Object.keys(null==T?void 0:null===(i=T.account)||void 0===i?void 0:null===(n=i.alchemy)||void 0===n?void 0:n.bubbles))||void 0===l?void 0:l[U];V(null==T?void 0:null===(e=T.account)||void 0===e?void 0:null===(o=e.alchemy)||void 0===o?void 0:null===(t=o.bubbles)||void 0===t?void 0:t[d])},[]);let H=l=>{var i;z(null==l?void 0:null===(i=l.target)||void 0===i?void 0:i.value)},J=C()((l,i,n)=>{let{value:e}=l.target;K({...X,[i]:{...(null==X?void 0:X[i])||{},[n]:e?parseInt(e):0}})},100),Q=function(l){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,e=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,t=(arguments.length>6&&arguments[6],arguments.length>7&&arguments[7],arguments.length>8?arguments[8]:void 0),d=arguments.length>9?arguments[9]:void 0,u=arguments.length>10?arguments[10]:void 0,a=arguments.length>11?arguments[11]:void 0,c=arguments.length>12?arguments[12]:void 0;if(e)return n+Math.floor(i/20);{var r,v,s,h;let e=Math.max(.1,1-Math.round(10*(0,Z.growth)("decay",o,90,100,!1))/10/100),x=(0,I.iu)(null==T?void 0:null===(r=T.account)||void 0===r?void 0:null===(v=r.alchemy)||void 0===v?void 0:v.vials,"AlchBubbleCost"),b=(0,I.om)(null==T?void 0:null===(s=T.account)||void 0===s?void 0:null===(h=s.alchemy)||void 0===h?void 0:h.bubbles,"kazam","UNDEVELOPED_COSTS",!1),m=Math.max(.05,1-(0,Z.growth)("decay",t,40,12,!1)/100*(0,Z.growth)("decayMulti",d,2,50,!1)*(0,Z.growth)("decayMulti",c,1.4,30,!1));return Math.min((l<15?n*Math.pow(1.35-.3*i/(50+i),i):n*Math.pow(1.37-.28*i/(60+i),i))*m*e*Math.max(.05,1-(x+b)/100)*Math.max(.1,Math.pow(.75,u))*Math.max(.9,1-.1*a),1e9)}},$=(l,i,n,e,o)=>{var t,d,u,a,c,r,v,s,h,x,b,m,g,p,j,f,Z,y,w,C,_,B,I,M,k,N,L,S,q,O,P;let E=(null==T?void 0:null===(t=T.account)||void 0===t?void 0:null===(d=t.alchemy)||void 0===d?void 0:null===(u=d.cauldrons)||void 0===u?void 0:null===(a=u[e])||void 0===a?void 0:null===(c=a.boosts)||void 0===c?void 0:null===(r=c.cost)||void 0===r?void 0:r.level)||0,R=(null==T?void 0:null===(v=T.account)||void 0===v?void 0:null===(s=v.alchemy)||void 0===s?void 0:null===(h=s.bubbles)||void 0===h?void 0:null===(x=h.kazam)||void 0===x?void 0:x[6].level)||0,A=(null==T?void 0:null===(b=T.account)||void 0===b?void 0:null===(m=b.alchemy)||void 0===m?void 0:null===(g=m.vials)||void 0===g?void 0:null===(p=g[9])||void 0===p?void 0:p.level)||0,z="kazam"!==e&&(null==T?void 0:null===(j=T.account)||void 0===j?void 0:null===(f=j.alchemy)||void 0===f?void 0:null===(Z=f.bubbles)||void 0===Z?void 0:null===(y=Z[e])||void 0===y?void 0:null===(w=y[16])||void 0===w?void 0:w.level)||0,U=(null==T?void 0:null===(C=T.account)||void 0===C?void 0:null===(_=C.alchemy)||void 0===_?void 0:null===(B=_.bubbles)||void 0===B?void 0:null===(I=B[e])||void 0===I?void 0:null===(M=I[14])||void 0===M?void 0:M.level)||0,D=W&&"kazam"!==e&&(null==T?void 0:null===(k=T.account)||void 0===k?void 0:null===(N=k.alchemy)||void 0===N?void 0:null===(L=N.bubbles)||void 0===L?void 0:null===(S=L[e])||void 0===S?void 0:null===(q=S[1])||void 0===q?void 0:q.level)||0,G=F||0,V=null===(O=null==T?void 0:null===(P=T.account)||void 0===P?void 0:P.achievements[108])||void 0===O?void 0:O.completed;return Q(o,Y?2:1,l,i,n,E,R,A,U,D,G,V,z)},ll=(l,i,n,e,o)=>{var t,d;let u=(null!==(d=null==X?void 0:null===(t=X[o])||void 0===t?void 0:t[l])&&void 0!==d?d:0)-i;if(u<=0){let t=$(i,n,e,o,l);return{singleLevelCost:t,total:t}}let a=Array(u||0).fill(1),c=0,r=a.reduce((t,d,u)=>{let a=$(i+(0===u?1:u),n,e,o,l);return e||(c=a),t+a},$(i,n,e,o,l));return{total:r,singleLevelCost:c}},li=(0,p.useCallback)((l,i,n,e,o)=>ll(l,i,n,e,o),[X,F,W]),ln=(l,i,n)=>{var e;let o=Object.values((null==l?void 0:null===(e=l.alchemy)||void 0===e?void 0:e.bubbles)||{}).map(l=>l.filter(l=>{let{level:n,index:e}=l;return n>=5&&e<i}).sort((l,i)=>l.level-i.level)),t=Math.ceil(n/4),d=[];for(let l=0;l<o.length;l++){let i=o[l];d.push(i.slice(0,t))}return d.flat()},le=l=>{var i,n,e,o,t,d,u,a,c,r,v;let s=3,h=null===(i=null==l?void 0:null===(n=l.lab)||void 0===n?void 0:null===(e=n.labBonuses)||void 0===e?void 0:e.find(l=>"No_Bubble_Left_Behind"===l.name))||void 0===i?void 0:i.active;if(!h)return null;let x=Object.values(null==l?void 0:null===(o=l.alchemy)||void 0===o?void 0:o.bubbles).flatMap((l,i)=>l.map((l,n)=>({...l,tab:i,flatIndex:1e3*i+n}))),b=x.filter(l=>{let{level:i,index:n}=l;return i>=5&&n<15}),m=b.sort((l,i)=>i.flatIndex-l.flatIndex).sort((l,i)=>l.level-i.level);(null===(t=null==l?void 0:null===(d=l.lab)||void 0===d?void 0:null===(u=d.jewels)||void 0===u?void 0:u.find(l=>"Pyrite_Rhinestone"===l.name))||void 0===t?void 0:t.active)&&s++;let g=(0,_.YS)(null==l?void 0:null===(a=l.sailing)||void 0===a?void 0:a.artifacts,"Amberite");g&&(s+=(null==g?void 0:g.acquired)===3?(null==g?void 0:g.baseBonus)*3:(null==g?void 0:g.acquired)===2?(null==g?void 0:g.baseBonus)*2:null==g?void 0:g.baseBonus);let p=null==l?void 0:null===(c=l.tasks)||void 0===c?void 0:null===(r=c[2])||void 0===r?void 0:null===(v=r[3])||void 0===v?void 0:v[6];p>0&&(s+=p);let j=m.slice(0,s),f=ln(l,25,s);return{normal:j,atomBubbles:f}},lo=(0,p.useMemo)(()=>le(null==T?void 0:T.account),[null==T?void 0:T.account]),lt=(l,i)=>{if(!(null==l?void 0:l.includes("decay")))return null;let n=i;return"decayMulti"===l&&(n+=1),n};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(B.PB,{title:"Idleon Toolbox | Bubbles",description:"Keep track of your bubbles level and requirements with a handy calculator"}),(0,o.jsx)(d.Z,{variant:"h2",textAlign:"center",mb:3,children:"Bubbles"}),(0,o.jsxs)(M.Z,{sx:{width:"fit-content",margin:"24px auto"},children:[(0,o.jsx)(S,{title:"Next bubble upgrades",bubbles:null==lo?void 0:lo.normal,accumulatedCost:li,account:null==T?void 0:T.account}),(0,o.jsx)(u.Z,{sx:{my:2}}),(0,o.jsx)(S,{lithium:!0,bubbles:null==lo?void 0:lo.atomBubbles,accumulatedCost:li,account:null==T?void 0:T.account})]}),(0,o.jsxs)(a.Z,{direction:"row",justifyContent:"center",mt:2,gap:2,flexWrap:"wrap",children:[(null===(i=Object.keys(null==T?void 0:null===(n=T.account)||void 0===n?void 0:null===(e=n.alchemy)||void 0===e?void 0:e.bubbles))||void 0===i?void 0:i[U])!=="kazam"?(0,o.jsx)(c.Z,{control:(0,o.jsx)(r.Z,{checked:W,onChange:()=>A(!W)}),name:"classDiscount",label:"Class Discount"}):null,(0,o.jsx)(v.Z,{value:F,type:"number",inputProps:{min:0,max:8},onChange:l=>H(l),helperText:"".concat(parseFloat((-(25*(Math.pow(.75,F)-1)/.25)).toFixed(1)),"%"),InputProps:{startAdornment:(0,o.jsx)(s.Z,{position:"start",children:(0,o.jsx)("img",{width:36,height:36,src:"".concat(Z.prefix,"data/aShopItems10.png"),alt:""})})}}),(0,o.jsx)(h.Z,{sx:{alignItems:"center",display:"flex"},children:(0,o.jsx)(x.Z,{sx:{"&:last-child":{px:1,py:{xs:1,sm:0}},width:200},children:(0,o.jsxs)(a.Z,{direction:"row",alignItems:"center",justifyContent:"center",gap:1,children:[(0,o.jsx)(O,{src:"".concat(Z.prefix,"etc/Particle.png"),alt:""}),(0,o.jsxs)(d.Z,{children:["Alternate particle upgrades left: ",null==T?void 0:null===(f=T.account)||void 0===f?void 0:null===(w=f.accountOptions)||void 0===w?void 0:w[135]]})]})})})]}),(0,o.jsx)(b.Z,{centered:!0,sx:{marginBottom:3,marginTop:1},variant:R?"fullWidth":"standard",value:U,onChange:(l,i)=>{var n,e,o,t,d,u;D(i);let a=null===(n=Object.keys(null==T?void 0:null===(e=T.account)||void 0===e?void 0:null===(o=e.alchemy)||void 0===o?void 0:o.bubbles))||void 0===n?void 0:n[i];V(null==T?void 0:null===(t=T.account)||void 0===t?void 0:null===(d=t.alchemy)||void 0===d?void 0:null===(u=d.bubbles)||void 0===u?void 0:u[a]),3===i&&A(!1)},children:null===(k=Object.keys(null==T?void 0:null===(N=T.account)||void 0===N?void 0:null===(L=N.alchemy)||void 0===L?void 0:L.bubbles))||void 0===k?void 0:k.map((l,i)=>(0,o.jsx)(m.Z,{label:l},"".concat(l,"-").concat(i)))}),(0,o.jsx)(a.Z,{direction:"row",flexWrap:"wrap",gap:3,justifyContent:"center",children:null==G?void 0:G.map((l,i)=>{var n,e,t;if(i>24)return null;let{level:u,itemReq:c,rawName:r,bubbleName:s,func:b,x1:m,x2:j,cauldron:f}=l,w=(null==X?void 0:null===(n=X[f])||void 0===n?void 0:n[i])?(null==X?void 0:null===(e=X[f])||void 0===e?void 0:e[i])<u?u:null==X?void 0:null===(t=X[f])||void 0===t?void 0:t[i]:u,C=(0,Z.growth)(b,w,m,j,!0),_=lt(b,m),B=w/(w+j)*100;return(0,o.jsx)(p.Fragment,{children:(0,o.jsx)(h.Z,{sx:{width:330},children:(0,o.jsxs)(x.Z,{children:[(0,o.jsxs)(a.Z,{direction:"row",alignItems:"center",justifyContent:"space-around",gap:2,children:[(0,o.jsxs)(a.Z,{alignItems:"center",children:[(0,o.jsx)(y.Z,{title:(0,o.jsx)(E,{...l,goalLevel:w}),children:(0,o.jsx)(P,{width:48,height:48,level:u,src:"".concat(Z.prefix,"data/").concat(r,".png"),alt:""})}),(0,o.jsxs)(d.Z,{variant:"body1",children:["Lv. ",u]})]}),(0,o.jsx)(v.Z,{type:"number",sx:{width:90},defaultValue:w,onChange:l=>J(l,f,i),label:"Goal",variant:"outlined",inputProps:{min:u||0}})]}),(0,o.jsxs)(a.Z,{mt:1.5,direction:"row",justifyContent:"center",gap:3,flexWrap:"wrap",children:[(0,o.jsxs)(a.Z,{gap:2,justifyContent:"center",alignItems:"center",children:[(0,o.jsx)(y.Z,{title:"Bubble's effect",children:(0,o.jsx)(q,{src:"".concat(Z.prefix,"data/SignStar3b.png"),alt:""})}),(0,o.jsx)(y.Z,{title:_?"".concat(C," is ").concat((0,Z.notateNumber)(B),"% of possible hard cap effect of ").concat(_):"",children:(0,o.jsxs)(d.Z,{children:[C," ",_?"(".concat((0,Z.notateNumber)(B),"%)"):""]})})]}),null==c?void 0:c.map((l,n)=>{var e,t,c,r,v,s,h,x,b,m,p,j,w,C,_,B;let M,{rawName:k,name:N,baseCost:L}=l;if("Blank"===k||"ERROR"===k)return null;let{singleLevelCost:S,total:q}=li(i,u,L,null==N?void 0:N.includes("Liquid"),f),P=["sail","bits"].find(l=>k.toLowerCase().includes(l))?"".concat(k,"_x1"):k,E=S>1e8&&!(null==N?void 0:N.includes("Liquid"))&&!(null==N?void 0:N.includes("Bits"))&&(0,I.a2)(i,S);if(k.includes("Liquid")){let l={Liquid1:0,Liquid2:1,Liquid3:2,Liquid4:3};M=null==T?void 0:null===(v=T.account)||void 0===v?void 0:null===(s=v.alchemy)||void 0===s?void 0:null===(h=s.liquids)||void 0===h?void 0:h[null==l?void 0:l[k]]}else M=k.includes("Bits")?null==T?void 0:null===(x=T.account)||void 0===x?void 0:null===(b=x.gaming)||void 0===b?void 0:b.bits:k.includes("Sail")?null===(m=null==T?void 0:null===(p=T.account)||void 0===p?void 0:null===(j=p.sailing)||void 0===j?void 0:null===(w=j.lootPile)||void 0===w?void 0:w.find(l=>{let{rawName:i}=l;return i===k.replace("SailTr","SailT")}))||void 0===m?void 0:m.amount:null===(C=null==T?void 0:null===(_=T.account)||void 0===_?void 0:null===(B=_.storage)||void 0===B?void 0:B.find(l=>{let{rawName:i}=l;return i===k}))||void 0===C?void 0:C.amount;return(0,o.jsxs)(a.Z,{direction:"row",gap:3,children:[E?(0,o.jsxs)(a.Z,{gap:2,alignItems:"center",children:[(0,o.jsx)(g.Z,{title:(0,o.jsxs)(d.Z,{color:(null==T?void 0:null===(e=T.account)||void 0===e?void 0:null===(t=e.atoms)||void 0===t?void 0:t.particles)>E?"success.light":"",children:[Math.floor(null==T?void 0:null===(c=T.account)||void 0===c?void 0:null===(r=c.atoms)||void 0===r?void 0:r.particles)," / ",E]}),children:(0,o.jsx)(O,{src:"".concat(Z.prefix,"etc/Particle.png"),alt:""})}),(0,o.jsx)(y.Z,{title:E,children:(0,o.jsx)(d.Z,{children:(0,Z.notateNumber)(E,"Big")})})]}):null,(0,o.jsxs)(a.Z,{gap:2,justifyContent:"center",alignItems:"center",children:[(0,o.jsx)(y.Z,{title:(0,Z.cleanUnderscore)(N),children:(0,o.jsx)(O,{src:"".concat(Z.prefix,"data/").concat(P,".png"),alt:""})}),(0,o.jsx)(g.Z,{title:(0,o.jsxs)(d.Z,{color:M>=q?"success.light":"",children:[(0,Z.notateNumber)(M,"Big")," / ",(0,Z.notateNumber)(q,"Big")]}),children:(0,o.jsx)(d.Z,{children:(0,Z.notateNumber)(q,"Big")})})]})]},"".concat(k,"-").concat(N,"-").concat(n))})]})]})})},r+""+s+i)})})]})}}},function(l){l.O(0,[3749,9774,2888,179],function(){return l(l.s=69822)}),_N_E=l.O()}]);