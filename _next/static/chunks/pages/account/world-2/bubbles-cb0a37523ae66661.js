(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{69822:function(l,e,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/world-2/bubbles",function(){return i(16807)}])},75712:function(l,e,i){"use strict";var n=i(85893),t=i(67294),o=i(98396),d=i(11703),a=i(40044);e.Z=l=>{let{tabs:e,children:i,onTabChange:u}=l,[c,r]=(0,t.useState)(0),s=(0,o.Z)(l=>l.breakpoints.down("md"),{noSsr:!0}),v=Array.isArray(i)?i:[i];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{centered:!s||s&&e.length<4,scrollButtons:!0,allowScrollButtonsMobile:!0,sx:{marginBottom:3},variant:s&&e.length>4?"scrollable":"standard",value:c,onChange:(l,e)=>{r(e),u&&u(e)},children:null==e?void 0:e.map((l,e)=>(0,n.jsx)(a.Z,{label:l},"".concat(l,"-").concat(e)))}),u?i:null==v?void 0:v.map((l,e)=>e===c?l:null)]})}},16807:function(l,e,i){"use strict";i.r(e);var n=i(82729),t=i(85893),o=i(15861),d=i(67720),a=i(51233),u=i(50480),c=i(69368),r=i(61903),s=i(87109),v=i(66242),h=i(44267),b=i(21023),x=i(67294),m=i(51626),g=i(61599),p=i(1356),j=i(70478),f=i(91296),Z=i.n(f),y=i(56689),w=i(2962),C=i(86255),B=i(87357),_=i(75712);function _templateObject(){let l=(0,n._)(["\n  width: 32px;\n  height: 32px;\n  object-fit: contain;\n"]);return _templateObject=function(){return l},l}function _templateObject1(){let l=(0,n._)(["\n  width: 32px;\n  height: 32px;\n"]);return _templateObject1=function(){return l},l}function _templateObject2(){let l=(0,n._)(["\n  opacity: ",";\n"]);return _templateObject2=function(){return l},l}let Nblb=l=>{let{title:e,bubbles:i,lithium:n,accumulatedCost:d,account:u}=l;return(0,t.jsxs)(a.Z,{justifyContent:"center",alignItems:"center",children:[(0,t.jsx)(o.Z,{children:e}),n?(0,t.jsx)(o.Z,{variant:"caption",children:"* 15% chance to be upgraded by lithium (atom collider)"}):null,(0,t.jsx)(a.Z,{direction:"row",flexWrap:"wrap",gap:1,children:null==i?void 0:i.map((l,e)=>{var i,c,r,s,v,h,x,m,g;let{rawName:f,bubbleName:Z,level:y,itemReq:w,index:B,cauldron:_}=l,{singleLevelCost:M,total:N}=d(B,y,null==w?void 0:null===(i=w[0])||void 0===i?void 0:i.baseCost,null==w?void 0:null===(r=w[0])||void 0===r?void 0:null===(c=r.name)||void 0===c?void 0:c.includes("Liquid"),_),O=M>1e8&&!(null==w?void 0:null===(v=w[0])||void 0===v?void 0:null===(s=v.name)||void 0===s?void 0:s.includes("Liquid"))&&!(null==w?void 0:null===(x=w[0])||void 0===x?void 0:null===(h=x.name)||void 0===h?void 0:h.includes("Bits"))&&(0,C.a2)(B,M);return(0,t.jsxs)(a.Z,{alignItems:"center",children:[(0,t.jsx)(j.Z,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{sx:{fontWeight:"bold"},children:(0,p.pascalCase)((0,p.cleanUnderscore)(Z))}),(0,t.jsx)(a.Z,{direction:"row",justifyContent:"center",gap:1,children:null==w?void 0:w.map((l,e)=>{let{rawName:i}=l;if("Blank"===i||"ERROR"===i||i.includes("Liquid"))return null;let n=["sail","bits"].find(l=>i.toLowerCase().includes(l))?"".concat(i,"_x1"):i;return(0,t.jsxs)(a.Z,{alignItems:"center",direction:"row",gap:1,children:[(0,t.jsxs)(a.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(I,{src:"".concat(p.prefix,"data/").concat(n,".png"),alt:""}),(0,t.jsx)(o.Z,{children:(0,p.notateNumber)(N,"Big")})]}),O>0?(0,t.jsxs)(a.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(a.Z,{sx:{width:32,height:32},alignItems:"center",justifyContent:"center",children:(0,t.jsx)("img",{width:18,height:18,src:"".concat(p.prefix,"etc/Particle.png"),alt:""})}),(0,t.jsx)(o.Z,{children:O})]}):null]},"req"+i+e)})})]}),children:(0,t.jsx)("img",{style:{opacity:n?.8:1},width:42,height:42,src:"".concat(p.prefix,"data/").concat(f,".png"),alt:""})}),(0,t.jsxs)(a.Z,{direction:"row",alignItems:"center",gap:.5,children:[O>0?(0,t.jsx)(b.Z,{title:(0,t.jsxs)(o.Z,{color:(null==u?void 0:null===(m=u.atoms)||void 0===m?void 0:m.particles)>O?"success.light":"",children:[Math.floor(null==u?void 0:null===(g=u.atoms)||void 0===g?void 0:g.particles)," / ",O]}),children:(0,t.jsx)("img",{width:18,height:18,src:"".concat(p.prefix,"etc/Particle.png"),alt:""})}):null,(0,t.jsx)(o.Z,{variant:"body1",children:y})]})]},"".concat(f,"-").concat(e,"-").concat(n,"-nblb"))})})]})},M=g.Z.img(_templateObject()),I=g.Z.img(_templateObject1()),N=g.Z.img(_templateObject2(),l=>{let{level:e}=l;return 0===e?.5:1}),BubbleTooltip=l=>{let{goalLevel:e,bubbleName:i,desc:n,func:d,x1:a,x2:u,level:c}=l,r=(0,p.growth)(d,c,a,u,!0),s=(0,p.growth)(d,e,a,u,!0);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{fontWeight:"bold",variant:"h6",children:(0,p.cleanUnderscore)(i)}),(0,t.jsx)(o.Z,{variant:"body1",children:(0,p.cleanUnderscore)(n.replace(/{/,r))}),c!==e?(0,t.jsxs)(o.Z,{sx:{color:c>0?"multi":""},variant:"body1",children:["Goal: +",s]}):null]})};e.default=()=>{var l,e,i,n,g,f,O,k;let{state:S}=(0,x.useContext)(m.I),[L,q]=(0,x.useState)(!1),[P,E]=(0,x.useState)(0),[A,T]=(0,x.useState)(0),[F,R]=(0,x.useState)(),[U,W]=(0,x.useState)(),z=(0,x.useMemo)(()=>{var l,e,i,n;return null==S?void 0:null===(n=S.account)||void 0===n?void 0:null===(i=n.lab)||void 0===i?void 0:null===(e=i.labBonuses)||void 0===e?void 0:null===(l=e.find(l=>"My_1st_Chemistry_Set"===l.name))||void 0===l?void 0:l.active},[null==S?void 0:null===(l=S.account)||void 0===l?void 0:l.lab.vials]);(0,x.useEffect)(()=>{var l,e,i,n,t,o;let d=null===(l=Object.keys(null==S?void 0:null===(i=S.account)||void 0===i?void 0:null===(e=i.alchemy)||void 0===e?void 0:e.bubbles))||void 0===l?void 0:l[A];R(null==S?void 0:null===(o=S.account)||void 0===o?void 0:null===(t=o.alchemy)||void 0===t?void 0:null===(n=t.bubbles)||void 0===n?void 0:n[d])},[]);let handleBargainChange=l=>{var e;E(null==l?void 0:null===(e=l.target)||void 0===e?void 0:e.value)},D=Z()((l,e,i)=>{let{value:n}=l.target;W({...U,[e]:{...(null==U?void 0:U[e])||{},[i]:n?parseInt(n):0}})},100),calcBubbleMatCost=function(l){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let e=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,t=arguments.length>5?arguments[5]:void 0,o=(arguments.length>6&&arguments[6],arguments.length>7&&arguments[7],arguments.length>8?arguments[8]:void 0),d=arguments.length>9?arguments[9]:void 0,a=arguments.length>10?arguments[10]:void 0,u=arguments.length>11?arguments[11]:void 0,c=arguments.length>12?arguments[12]:void 0;if(n)return i+Math.floor(e/20);{var r,s,v,h;let n=Math.max(.1,1-Math.round(10*(0,p.growth)("decay",t,90,100,!1))/10/100),b=(0,C.iu)(null==S?void 0:null===(s=S.account)||void 0===s?void 0:null===(r=s.alchemy)||void 0===r?void 0:r.vials,"AlchBubbleCost"),x=(0,C.om)(null==S?void 0:null===(h=S.account)||void 0===h?void 0:null===(v=h.alchemy)||void 0===v?void 0:v.bubbles,"kazam","UNDEVELOPED_COSTS",!1),m=Math.max(.05,1-(0,p.growth)("decay",o,40,12,!1)/100*(0,p.growth)("decayMulti",d,2,50,!1)*(0,p.growth)("decayMulti",c,1.4,30,!1));return Math.min((l<15?i*Math.pow(1.35-.3*e/(50+e),e):i*Math.pow(1.37-.28*e/(60+e),e))*m*n*Math.max(.05,1-(b+x)/100)*Math.max(.1,Math.pow(.75,a))*Math.max(.9,1-.1*u),1e9)}},calculateMaterialCost=(l,e,i,n,t)=>{var o,d,a,u,c,r,s,v,h,b,x,m,g,p,j,f,Z,y,w,C,B,_,M,I,N,O,k,q,E,A,T;let F=(null==S?void 0:null===(r=S.account)||void 0===r?void 0:null===(c=r.alchemy)||void 0===c?void 0:null===(u=c.cauldrons)||void 0===u?void 0:null===(a=u[n])||void 0===a?void 0:null===(d=a.boosts)||void 0===d?void 0:null===(o=d.cost)||void 0===o?void 0:o.level)||0,R=(null==S?void 0:null===(b=S.account)||void 0===b?void 0:null===(h=b.alchemy)||void 0===h?void 0:null===(v=h.bubbles)||void 0===v?void 0:null===(s=v.kazam)||void 0===s?void 0:s[6].level)||0,U=(null==S?void 0:null===(p=S.account)||void 0===p?void 0:null===(g=p.alchemy)||void 0===g?void 0:null===(m=g.vials)||void 0===m?void 0:null===(x=m[9])||void 0===x?void 0:x.level)||0,W="kazam"!==n&&(null==S?void 0:null===(w=S.account)||void 0===w?void 0:null===(y=w.alchemy)||void 0===y?void 0:null===(Z=y.bubbles)||void 0===Z?void 0:null===(f=Z[n])||void 0===f?void 0:null===(j=f[16])||void 0===j?void 0:j.level)||0,D=(null==S?void 0:null===(I=S.account)||void 0===I?void 0:null===(M=I.alchemy)||void 0===M?void 0:null===(_=M.bubbles)||void 0===_?void 0:null===(B=_[n])||void 0===B?void 0:null===(C=B[14])||void 0===C?void 0:C.level)||0,G=L&&"kazam"!==n&&(null==S?void 0:null===(E=S.account)||void 0===E?void 0:null===(q=E.alchemy)||void 0===q?void 0:null===(k=q.bubbles)||void 0===k?void 0:null===(O=k[n])||void 0===O?void 0:null===(N=O[1])||void 0===N?void 0:N.level)||0,V=P||0,X=null==S?void 0:null===(T=S.account)||void 0===T?void 0:null===(A=T.achievements[108])||void 0===A?void 0:A.completed;return calcBubbleMatCost(t,z?2:1,l,e,i,F,R,U,D,G,V,X,W)},getAccumulatedBubbleCost=(l,e,i,n,t)=>{var o,d;let a=(null!==(d=null==U?void 0:null===(o=U[t])||void 0===o?void 0:o[l])&&void 0!==d?d:0)-e;if(a<=0){let o=calculateMaterialCost(e,i,n,t,l);return{singleLevelCost:o,total:o}}let u=Array(a||0).fill(1),c=0,r=u.reduce((o,d,a)=>{let u=calculateMaterialCost(e+(0===a?1:a),i,n,t,l);return n||(c=u),o+u},calculateMaterialCost(e,i,n,t,l));return{total:r,singleLevelCost:c}},G=(0,x.useCallback)((l,e,i,n,t)=>getAccumulatedBubbleCost(l,e,i,n,t),[U,P,L]),getNblbBubbles=(l,e,i)=>{var n;let t=Object.values((null==l?void 0:null===(n=l.alchemy)||void 0===n?void 0:n.bubbles)||{}).map(l=>l.filter(l=>{let{level:i,index:n}=l;return i>=5&&n<e}).sort((l,e)=>l.level-e.level)),o=Math.ceil(i/4),d=[];for(let l=0;l<t.length;l++){let e=t[l];d.push(e.slice(0,o))}return d.flat()},getUpgradeableBubbles=l=>{var e,i,n,t,o,d,a,u,c,r,s;let v=3,h=null==l?void 0:null===(n=l.lab)||void 0===n?void 0:null===(i=n.labBonuses)||void 0===i?void 0:null===(e=i.find(l=>"No_Bubble_Left_Behind"===l.name))||void 0===e?void 0:e.active;if(!h)return null;let b=Object.values(null==l?void 0:null===(t=l.alchemy)||void 0===t?void 0:t.bubbles).flatMap((l,e)=>l.map((l,i)=>({...l,tab:e,flatIndex:1e3*e+i}))),x=b.filter(l=>{let{level:e,index:i}=l;return e>=5&&i<15}),m=x.sort((l,e)=>e.flatIndex-l.flatIndex).sort((l,e)=>l.level-e.level);(null==l?void 0:null===(a=l.lab)||void 0===a?void 0:null===(d=a.jewels)||void 0===d?void 0:null===(o=d.find(l=>"Pyrite_Rhinestone"===l.name))||void 0===o?void 0:o.active)&&v++;let g=(0,y.YS)(null==l?void 0:null===(u=l.sailing)||void 0===u?void 0:u.artifacts,"Amberite");g&&(v+=(null==g?void 0:g.acquired)===3?(null==g?void 0:g.baseBonus)*3:(null==g?void 0:g.acquired)===2?(null==g?void 0:g.baseBonus)*2:null==g?void 0:g.baseBonus);let p=null==l?void 0:null===(s=l.tasks)||void 0===s?void 0:null===(r=s[2])||void 0===r?void 0:null===(c=r[3])||void 0===c?void 0:c[6];p>0&&(v+=p);let j=m.slice(0,v),f=getNblbBubbles(l,25,v);return{normal:j,atomBubbles:f}},V=(0,x.useMemo)(()=>getUpgradeableBubbles(null==S?void 0:S.account),[null==S?void 0:S.account]),getMaxBonus=(l,e)=>{if(!(null==l?void 0:l.includes("decay")))return null;let i=e;return"decayMulti"===l&&(i+=1),i};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.PB,{title:"Idleon Toolbox | Bubbles",description:"Keep track of your bubbles level and requirements with a handy calculator"}),(0,t.jsx)(o.Z,{variant:"h2",textAlign:"center",mb:3,children:"Bubbles"}),(0,t.jsxs)(B.Z,{sx:{width:"fit-content",margin:"24px auto"},children:[(0,t.jsx)(Nblb,{title:"Next bubble upgrades",bubbles:null==V?void 0:V.normal,accumulatedCost:G,account:null==S?void 0:S.account}),(0,t.jsx)(d.Z,{sx:{my:2}}),(0,t.jsx)(Nblb,{lithium:!0,bubbles:null==V?void 0:V.atomBubbles,accumulatedCost:G,account:null==S?void 0:S.account})]}),(0,t.jsxs)(a.Z,{direction:"row",justifyContent:"center",mt:2,gap:2,flexWrap:"wrap",children:[(null===(e=Object.keys(null==S?void 0:null===(n=S.account)||void 0===n?void 0:null===(i=n.alchemy)||void 0===i?void 0:i.bubbles))||void 0===e?void 0:e[A])!=="kazam"?(0,t.jsx)(u.Z,{control:(0,t.jsx)(c.Z,{checked:L,onChange:()=>q(!L)}),name:"classDiscount",label:"Class Discount"}):null,(0,t.jsx)(r.Z,{value:P,type:"number",inputProps:{min:0,max:8},onChange:l=>handleBargainChange(l),helperText:"".concat(parseFloat((-(25*(Math.pow(.75,P)-1)/.25)).toFixed(1)),"%"),InputProps:{startAdornment:(0,t.jsx)(s.Z,{position:"start",children:(0,t.jsx)("img",{width:36,height:36,src:"".concat(p.prefix,"data/aShopItems10.png"),alt:""})})}}),(0,t.jsx)(v.Z,{sx:{alignItems:"center",display:"flex"},children:(0,t.jsx)(h.Z,{sx:{"&:last-child":{px:1,py:{xs:1,sm:0}},width:200},children:(0,t.jsxs)(a.Z,{direction:"row",alignItems:"center",justifyContent:"center",gap:1,children:[(0,t.jsx)(I,{src:"".concat(p.prefix,"etc/Particle.png"),alt:""}),(0,t.jsxs)(o.Z,{children:["Alternate particle upgrades left: ",null==S?void 0:null===(f=S.account)||void 0===f?void 0:null===(g=f.accountOptions)||void 0===g?void 0:g[135]]})]})})})]}),(0,t.jsx)(_.Z,{tabs:Object.keys(null==S?void 0:null===(k=S.account)||void 0===k?void 0:null===(O=k.alchemy)||void 0===O?void 0:O.bubbles),onTabChange:l=>{var e,i,n,t,o,d;T(l);let a=null===(e=Object.keys(null==S?void 0:null===(n=S.account)||void 0===n?void 0:null===(i=n.alchemy)||void 0===i?void 0:i.bubbles))||void 0===e?void 0:e[l];R(null==S?void 0:null===(d=S.account)||void 0===d?void 0:null===(o=d.alchemy)||void 0===o?void 0:null===(t=o.bubbles)||void 0===t?void 0:t[a]),3===l&&q(!1)},children:(0,t.jsx)(a.Z,{direction:"row",flexWrap:"wrap",gap:3,justifyContent:"center",children:null==F?void 0:F.map((l,e)=>{var i,n,d;if(e>24)return null;let{level:u,itemReq:c,rawName:s,bubbleName:m,func:g,x1:f,x2:Z,cauldron:y}=l,w=(null==U?void 0:null===(i=U[y])||void 0===i?void 0:i[e])?(null==U?void 0:null===(n=U[y])||void 0===n?void 0:n[e])<u?u:null==U?void 0:null===(d=U[y])||void 0===d?void 0:d[e]:u,B=(0,p.growth)(g,w,f,Z,!0),_=getMaxBonus(g,f),O=w/(w+Z)*100;return(0,t.jsx)(x.Fragment,{children:(0,t.jsx)(v.Z,{sx:{width:330},children:(0,t.jsxs)(h.Z,{children:[(0,t.jsxs)(a.Z,{direction:"row",alignItems:"center",justifyContent:"space-around",gap:2,children:[(0,t.jsxs)(a.Z,{alignItems:"center",children:[(0,t.jsx)(j.Z,{title:(0,t.jsx)(BubbleTooltip,{...l,goalLevel:w}),children:(0,t.jsx)(N,{width:48,height:48,level:u,src:"".concat(p.prefix,"data/").concat(s,".png"),alt:""})}),(0,t.jsxs)(o.Z,{variant:"body1",children:["Lv. ",u]})]}),(0,t.jsx)(r.Z,{type:"number",sx:{width:90},defaultValue:w,onChange:l=>D(l,y,e),label:"Goal",variant:"outlined",inputProps:{min:u||0}})]}),(0,t.jsxs)(a.Z,{mt:1.5,direction:"row",justifyContent:"center",gap:3,flexWrap:"wrap",children:[(0,t.jsxs)(a.Z,{gap:2,justifyContent:"center",alignItems:"center",children:[(0,t.jsx)(j.Z,{title:"Bubble's effect",children:(0,t.jsx)(M,{src:"".concat(p.prefix,"data/SignStar3b.png"),alt:""})}),(0,t.jsx)(j.Z,{title:_?"".concat(B," is ").concat((0,p.notateNumber)(O),"% of possible hard cap effect of ").concat(_):"",children:(0,t.jsxs)(o.Z,{children:[B," ",_?"(".concat((0,p.notateNumber)(O),"%)"):""]})})]}),null==c?void 0:c.map((l,i)=>{var n,d,c,r,s,v,h,x,m,g,f,Z,w,B,_,M;let N,{rawName:O,name:k,baseCost:L}=l;if("Blank"===O||"ERROR"===O)return null;let{singleLevelCost:q,total:P}=G(e,u,L,null==k?void 0:k.includes("Liquid"),y),E=["sail","bits"].find(l=>O.toLowerCase().includes(l))?"".concat(O,"_x1"):O,A=q>1e8&&!(null==k?void 0:k.includes("Liquid"))&&!(null==k?void 0:k.includes("Bits"))&&(0,C.a2)(e,q);if(O.includes("Liquid")){let l={Liquid1:0,Liquid2:1,Liquid3:2,Liquid4:3};N=null==S?void 0:null===(h=S.account)||void 0===h?void 0:null===(v=h.alchemy)||void 0===v?void 0:null===(s=v.liquids)||void 0===s?void 0:s[null==l?void 0:l[O]]}else N=O.includes("Bits")?null==S?void 0:null===(m=S.account)||void 0===m?void 0:null===(x=m.gaming)||void 0===x?void 0:x.bits:O.includes("Sail")?null==S?void 0:null===(w=S.account)||void 0===w?void 0:null===(Z=w.sailing)||void 0===Z?void 0:null===(f=Z.lootPile)||void 0===f?void 0:null===(g=f.find(l=>{let{rawName:e}=l;return e===O.replace("SailTr","SailT")}))||void 0===g?void 0:g.amount:null==S?void 0:null===(M=S.account)||void 0===M?void 0:null===(_=M.storage)||void 0===_?void 0:null===(B=_.find(l=>{let{rawName:e}=l;return e===O}))||void 0===B?void 0:B.amount;return(0,t.jsxs)(a.Z,{direction:"row",gap:3,children:[A?(0,t.jsxs)(a.Z,{gap:2,alignItems:"center",children:[(0,t.jsx)(b.Z,{title:(0,t.jsxs)(o.Z,{color:(null==S?void 0:null===(d=S.account)||void 0===d?void 0:null===(n=d.atoms)||void 0===n?void 0:n.particles)>A?"success.light":"",children:[Math.floor(null==S?void 0:null===(r=S.account)||void 0===r?void 0:null===(c=r.atoms)||void 0===c?void 0:c.particles)," / ",A]}),children:(0,t.jsx)(I,{src:"".concat(p.prefix,"etc/Particle.png"),alt:""})}),(0,t.jsx)(j.Z,{title:A,children:(0,t.jsx)(o.Z,{children:(0,p.notateNumber)(A,"Big")})})]}):null,(0,t.jsxs)(a.Z,{gap:2,justifyContent:"center",alignItems:"center",children:[(0,t.jsx)(j.Z,{title:(0,p.cleanUnderscore)(k),children:(0,t.jsx)(I,{src:"".concat(p.prefix,"data/").concat(E,".png"),alt:""})}),(0,t.jsx)(b.Z,{title:(0,t.jsxs)(o.Z,{color:N>=P?"success.light":"",children:[(0,p.notateNumber)(N,"Big")," / ",(0,p.notateNumber)(P,"Big")]}),children:(0,t.jsx)(o.Z,{children:(0,p.notateNumber)(P,"Big")})})]})]},"".concat(O,"-").concat(k,"-").concat(i))})]})]})})},s+""+m+e)})})})]})}}},function(l){l.O(0,[2202,1922,9774,2888,179],function(){return l(l.s=69822)}),_N_E=l.O()}]);