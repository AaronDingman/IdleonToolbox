(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{7644:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/world-2/bubbles",function(){return c(3473)}])},3473:function(h,c,a){"use strict";a.r(c);var i=a(5893),j=a(8396),k=a(5861),l=a(6447),m=a(480),n=a(9368),o=a(1903),p=a(7109),q=a(6242),r=a(4267),s=a(1703),t=a(44),u=a(7294),v=a(865),b=a(5934),w=a(3133),x=a(5231),d=a(7954),y=a.n(d),z=a(896),A=a(2962),B=a(1680);function C(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function D(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){C(d,a,c[a])})}return d}function E(b,a){return a||(a=b.slice(0)),Object.freeze(Object.defineProperties(b,{raw:{value:Object.freeze(a)}}))}function e(){var a=E(["\n  width: 32px;\n  height: 32px;\n  object-fit: contain;\n"]);return e=function(){return a},a}function f(){var a=E(["\n  width: 32px;\n  height: 32px;\n"]);return f=function(){return a},a}function g(){var a=E(["\n  opacity: ",";\n"]);return g=function(){return a},a}var F=b.Z.img(e()),G=b.Z.img(f()),H=b.Z.img(g(),function(a){return 0===a.level?.5:1}),I=function(a){var c=a.goalLevel,g=a.bubbleName,h=a.desc,d=a.func,e=a.x1,f=a.x2,b=a.level,j=(0,w.growth)(d,b,e,f,!0),l=(0,w.growth)(d,c,e,f,!0);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.Z,{fontWeight:"bold",variant:"h6",children:(0,w.cleanUnderscore)(g)}),(0,i.jsx)(k.Z,{variant:"body1",children:(0,w.cleanUnderscore)(h.replace(/{/,j))}),b!==c?(0,i.jsxs)(k.Z,{sx:{color:b>0?"multi":""},variant:"body1",children:["Goal: +",l]}):null]})};c.default=function(){var b,c,d,e,f,g,h,E,J,a=(0,u.useContext)(v.I).state,U=(0,j.Z)(function(a){return a.breakpoints.down("md")},{noSsr:!0}),L=(0,u.useState)(!1),M=L[0],W=L[1],N=(0,u.useState)(0),K=N[0],X=N[1],O=(0,u.useState)(0),P=O[0],Y=O[1],Q=(0,u.useState)(),R=Q[0],Z=Q[1],S=(0,u.useState)(),V=S[0],$=S[1],_=(0,u.useMemo)(function(){var b,c,d,e;return null===(e=null==a?void 0:null===(b=a.account)|| void 0===b?void 0:null===(c=b.lab)|| void 0===c?void 0:null===(d=c.labBonuses)|| void 0===d?void 0:d.find(function(a){return"My_1st_Chemistry_Set"===a.name}))|| void 0===e?void 0:e.active},[null==a?void 0:null===(b=a.account)|| void 0===b?void 0:b.lab.vials]);(0,u.useEffect)(function(){var b,c,d,e,f,g,h=null===(d=Object.keys(null==a?void 0:null===(b=a.account)|| void 0===b?void 0:null===(c=b.alchemy)|| void 0===c?void 0:c.bubbles))|| void 0===d?void 0:d[P];Z(null==a?void 0:null===(e=a.account)|| void 0===e?void 0:null===(f=e.alchemy)|| void 0===f?void 0:null===(g=f.bubbles)|| void 0===g?void 0:g[h])},[]);var aa=function(b){var a;X(null==b?void 0:null===(a=b.target)|| void 0===a?void 0:a.value)},ab=y()(function(b,c){var a=b.target.value;$(D({},V,C({},c,a?parseInt(a):0)))},100),ac=function(c){var d=arguments.length>1&& void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,b=arguments.length>3?arguments[3]:void 0,e=arguments.length>4?arguments[4]:void 0,f=arguments.length>5?arguments[5]:void 0,g=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,i=arguments.length>8?arguments[8]:void 0,j=arguments.length>9?arguments[9]:void 0,k=arguments.length>10?arguments[10]:void 0,l=arguments.length>11?arguments[11]:void 0,m=arguments.length>12?arguments[12]:void 0;if(e)return b+Math.floor(a/20);var n=c<15?b*Math.pow(1.35-.3*a/(50+a),a):b*Math.pow(1.37-.28*a/(60+a),a),o=Math.max(.1,1-Math.round(10*(0,w.growth)("decay",f,90,100,!1))/10/100),p=Math.max(.05,1-((0,w.growth)("decay",g,40,70,!1)+(0,w.growth)("add",h,1,0,!1)*d)/100),q=Math.max(.05,1-(0,w.growth)("decay",i,40,12,!1)/100*(0,w.growth)("decayMulti",j,2,50,!1)*(0,w.growth)("decayMulti",m,1.4,30,!1)),r=Math.max(.1,Math.pow(.75,k)),s=l?.9:1,t=Math.round(n*o*q*p*r*s);return Math.min(t,1e9)},ad=function(H,I,J,b,L){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,N=(null==a?void 0:null===(c=a.account)|| void 0===c?void 0:null===(d=c.alchemy)|| void 0===d?void 0:null===(e=d.cauldrons)|| void 0===e?void 0:null===(f=e[b])|| void 0===f?void 0:null===(g=f.boosts)|| void 0===g?void 0:null===(h=g.cost)|| void 0===h?void 0:h.level)||0,O=(null==a?void 0:null===(i=a.account)|| void 0===i?void 0:null===(j=i.alchemy)|| void 0===j?void 0:null===(k=j.bubbles)|| void 0===k?void 0:null===(l=k.kazam)|| void 0===l?void 0:l[6].level)||0,P=(null==a?void 0:null===(m=a.account)|| void 0===m?void 0:null===(n=m.alchemy)|| void 0===n?void 0:null===(o=n.vials)|| void 0===o?void 0:null===(p=o[9])|| void 0===p?void 0:p.level)||0,Q="kazam"!==b?(null==a?void 0:null===(q=a.account)|| void 0===q?void 0:null===(r=q.alchemy)|| void 0===r?void 0:null===(s=r.bubbles)|| void 0===s?void 0:null===(t=s[b])|| void 0===t?void 0:null===(u=t[16])|| void 0===u?void 0:u.level)||0:0,R=(null==a?void 0:null===(v=a.account)|| void 0===v?void 0:null===(w=v.alchemy)|| void 0===w?void 0:null===(x=w.bubbles)|| void 0===x?void 0:null===(y=x[b])|| void 0===y?void 0:null===(z=y[14])|| void 0===z?void 0:z.level)||0,S=M?(null==a?void 0:null===(A=a.account)|| void 0===A?void 0:null===(B=A.alchemy)|| void 0===B?void 0:null===(C=B.bubbles)|| void 0===C?void 0:null===(D=C[b])|| void 0===D?void 0:null===(E=D[1])|| void 0===E?void 0:E.level)||0:0;return ac(L,_?2:1,H,I,J,N,O,P,R,S,K||0,null===(G=null==a?void 0:null===(F=a.account)|| void 0===F?void 0:F.achievements[108])|| void 0===G?void 0:G.completed,Q)},ae=function(a,b,c,d,e){var f=(null==V?void 0:V[a])-b;return f<=0?ad(b,c,d,e,a):new Array(f||0).fill(1).reduce(function(g,h,f){return g+ad(b+(0===f?1:f),c,d,e,a)},ad(b,c,d,e,a))},af=(0,u.useCallback)(function(a,b,c,d,e){return ae(a,b,c,d,e)},[V,K,M]),ag=function(b){var d,e,f,g,h,i,j,k,l,m,n,c=3;if(!(null===(f=null==b?void 0:null===(d=b.lab)|| void 0===d?void 0:null===(e=d.labBonuses)|| void 0===e?void 0:e.find(function(a){return"No_Bubble_Left_Behind"===a.name}))|| void 0===f?void 0:f.active))return null;var p=Object.values(null==b?void 0:null===(g=b.alchemy)|| void 0===g?void 0:g.bubbles).flatMap(function(a,b){return a.map(function(a,c){return D({},a,{tab:b,flatIndex:1e3*b+c})})}).filter(function(a){var b=a.level,c=a.index;return b>=5&&c<15}).sort(function(a,b){return a.level-b.level}).sort(function(a,b){return b.flatIndex-a.flatIndex}).sort(function(a,b){return a.level-b.level});(null===(j=null==b?void 0:null===(h=b.lab)|| void 0===h?void 0:null===(i=h.jewels)|| void 0===i?void 0:i.find(function(a){return"Pyrite_Rhinestone"===a.name}))|| void 0===j?void 0:j.active)&&c++;var a=(0,z.YS)(null==b?void 0:null===(k=b.sailing)|| void 0===k?void 0:k.artifacts,"Amberite");a&&(c+=(null==a?void 0:a.acquired)===3?(null==a?void 0:a.baseBonus)*3:(null==a?void 0:a.acquired)===2?(null==a?void 0:a.baseBonus)*2:null==a?void 0:a.baseBonus);var o=null==b?void 0:null===(l=b.tasks)|| void 0===l?void 0:null===(m=l[2])|| void 0===m?void 0:null===(n=m[3])|| void 0===n?void 0:n[6];return o>0&&(c+=o),p.slice(0,c)},T=(0,u.useMemo)(function(){return ag(null==a?void 0:a.account)},[null==a?void 0:a.account]),ah=function(d,a,c){if(!(null==a?void 0:a.includes("decay")))return null;var b=c;return"decayMulti"===a&&(b+=1),b};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(A.PB,{title:"Idleon Toolbox | Bubbles",description:"Keep track of your bubbles level and requirements with a handy calculator"}),(0,i.jsx)(k.Z,{variant:"h2",textAlign:"center",mb:3,children:"Bubbles"}),(0,i.jsxs)(l.Z,{justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(k.Z,{children:"Next Bubble Upgrades:"}),(0,i.jsx)(l.Z,{direction:"row",flexWrap:"wrap",children:null==T?void 0:T.map(function(a,c){var b=a.rawName,d=a.bubbleName,e=a.level;return(0,i.jsxs)(l.Z,{alignItems:"center",children:[(0,i.jsx)(x.Z,{title:(0,w.pascalCase)((0,w.cleanUnderscore)(d)),children:(0,i.jsx)("img",{src:"".concat(w.prefix,"data/").concat(b,".png"),alt:""})}),(0,i.jsx)(k.Z,{variant:"body1",children:e})]},"".concat(b,"-").concat(c))})})]}),(0,i.jsxs)(l.Z,{direction:"row",justifyContent:"center",mt:2,gap:2,children:[(null===(e=Object.keys(null==a?void 0:null===(c=a.account)|| void 0===c?void 0:null===(d=c.alchemy)|| void 0===d?void 0:d.bubbles))|| void 0===e?void 0:e[P])!=="kazam"?(0,i.jsx)(m.Z,{control:(0,i.jsx)(n.Z,{checked:M,onChange:function(){return W(!M)}}),name:"classDiscount",label:"Class Discount"}):null,(0,i.jsx)(o.Z,{value:K,type:"number",inputProps:{min:0,max:8},onChange:function(a){return aa(a)},helperText:"".concat(parseFloat((-(25*(Math.pow(.75,K)-1)/.25)).toFixed(1)),"%"),InputProps:{startAdornment:(0,i.jsx)(p.Z,{position:"start",children:(0,i.jsx)("img",{width:36,height:36,src:"".concat(w.prefix,"data/aShopItems10.png"),alt:""})})}}),(0,i.jsx)(q.Z,{sx:{alignItems:"center",display:"flex"},children:(0,i.jsx)(r.Z,{children:(0,i.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,i.jsx)(G,{src:"".concat(w.prefix,"etc/Particle.png"),alt:""}),(0,i.jsxs)(k.Z,{children:["Alternate particle upgrades left: ",null==a?void 0:null===(f=a.account)|| void 0===f?void 0:null===(g=f.accountOptions)|| void 0===g?void 0:g[135]]})]})})})]}),(0,i.jsx)(s.Z,{centered:!0,sx:{marginBottom:3,marginTop:1},variant:U?"fullWidth":"standard",value:P,onChange:function(j,b){Y(b);var c,d,e,f,g,h,i=null===(e=Object.keys(null==a?void 0:null===(c=a.account)|| void 0===c?void 0:null===(d=c.alchemy)|| void 0===d?void 0:d.bubbles))|| void 0===e?void 0:e[b];Z(null==a?void 0:null===(f=a.account)|| void 0===f?void 0:null===(g=f.alchemy)|| void 0===g?void 0:null===(h=g.bubbles)|| void 0===h?void 0:h[i]),3===b&&W(!1)},children:null===(J=Object.keys(null==a?void 0:null===(h=a.account)|| void 0===h?void 0:null===(E=h.alchemy)|| void 0===E?void 0:E.bubbles))|| void 0===J?void 0:J.map(function(a,b){return(0,i.jsx)(t.Z,{label:a},"".concat(a,"-").concat(b))})}),(0,i.jsx)(l.Z,{direction:"row",flexWrap:"wrap",gap:3,justifyContent:"center",children:null==R?void 0:R.map(function(b,d){if(d>24)return null;var c=b.level,h=b.itemReq,j=b.rawName,s=b.bubbleName,m=b.func,n=b.x1,t=b.x2,e=(null==V?void 0:V[d])?(null==V?void 0:V[d])<c?c:null==V?void 0:V[d]:c,g=(0,w.growth)(m,e,n,t,!0),f=ah(e,m,n),p=g/f*100;return(0,i.jsx)(u.Fragment,{children:(0,i.jsx)(q.Z,{sx:{width:330},children:(0,i.jsxs)(r.Z,{children:[(0,i.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-around",gap:2,children:[(0,i.jsxs)(l.Z,{alignItems:"center",children:[(0,i.jsx)(x.Z,{title:(0,i.jsx)(I,D({},b,{goalLevel:e})),children:(0,i.jsx)(H,{width:48,height:48,level:c,src:"".concat(w.prefix,"data/").concat(j,".png"),alt:""})}),(0,i.jsxs)(k.Z,{variant:"body1",children:["Lv. ",c]})]}),(0,i.jsx)(o.Z,{type:"number",sx:{width:90},defaultValue:e,onChange:function(a){return ab(a,d)},label:"Goal",variant:"outlined",inputProps:{min:c||0}})]}),(0,i.jsxs)(l.Z,{mt:1.5,direction:"row",justifyContent:"center",gap:3,flexWrap:"wrap",children:[(0,i.jsxs)(l.Z,{gap:2,justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(x.Z,{title:"Bubble's effect",children:(0,i.jsx)(F,{src:"".concat(w.prefix,"data/SignStar3b.png"),alt:""})}),(0,i.jsx)(x.Z,{title:f?"".concat(g," is ").concat((0,w.notateNumber)(p),"% of possible hard cap effect of ").concat(f):"",children:(0,i.jsxs)(k.Z,{children:[g," ",f?"(".concat((0,w.notateNumber)(p),"%)"):""]})})]}),null==h?void 0:h.map(function(h,q){var j,m,n,o,p,e=h.rawName,b=h.name,r=h.baseCost;if("Blank"===e||"ERROR"===e)return null;var s=null===(n=Object.keys(null==a?void 0:null===(j=a.account)|| void 0===j?void 0:null===(m=j.alchemy)|| void 0===m?void 0:m.bubbles))|| void 0===n?void 0:n[P],f=af(d,c,r,null==b?void 0:b.includes("Liquid"),s),t=["sail","bits"].find(function(a){return e.toLowerCase().includes(a)})?"".concat(e,"_x1"):e,g=f>1e8&&!(null==b?void 0:b.includes("Liquid"))&&(0,B.a2)(d,f);return(0,i.jsxs)(l.Z,{direction:"row",gap:3,children:[g?(0,i.jsxs)(l.Z,{gap:2,alignItems:"center",children:[(0,i.jsx)(x.Z,{title:(0,i.jsxs)(k.Z,{children:[null==a?void 0:null===(o=a.account)|| void 0===o?void 0:null===(p=o.atoms)|| void 0===p?void 0:p.particles," / ",g]}),children:(0,i.jsx)(G,{src:"".concat(w.prefix,"etc/Particle.png"),alt:""})}),(0,i.jsx)(x.Z,{title:g,children:(0,i.jsx)(k.Z,{children:(0,w.notateNumber)(g,"Big")})})]}):null,(0,i.jsxs)(l.Z,{gap:2,justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(x.Z,{title:(0,w.cleanUnderscore)(b),children:(0,i.jsx)(G,{src:"".concat(w.prefix,"data/").concat(t,".png"),alt:""})}),(0,i.jsx)(x.Z,{title:f,children:(0,i.jsx)(k.Z,{children:(0,w.notateNumber)(f,"Big")})})]})]},"".concat(e,"-").concat(b,"-").concat(q))})]})]})})},j+""+s+d)})})]})}}},function(a){a.O(0,[9912,2640,9774,2888,179],function(){return a(a.s=7644)}),_N_E=a.O()}])