(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{9822:function(l,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/world-2/bubbles",function(){return i(2004)}])},2004:function(l,n,i){"use strict";i.r(n);var e=i(2729),o=i(5893),t=i(8396),d=i(5861),u=i(6447),a=i(1023),c=i(480),v=i(9368),r=i(1903),s=i(7109),h=i(6242),b=i(4267),x=i(1703),m=i(44),p=i(7294),g=i(9597),j=i(5934),f=i(9574),Z=i(1053),y=i(7954),w=i.n(y),_=i(4529),C=i(2962),k=i(9222);function M(){let l=(0,e._)(["\n  width: 32px;\n  height: 32px;\n  object-fit: contain;\n"]);return M=function(){return l},l}function B(){let l=(0,e._)(["\n  width: 32px;\n  height: 32px;\n"]);return B=function(){return l},l}function I(){let l=(0,e._)(["\n  opacity: ",";\n"]);return I=function(){return l},l}let N=()=>{var l,n,i,e,j,y,M,B,I;let{state:N}=(0,p.useContext)(g.I),E=(0,t.Z)(l=>l.breakpoints.down("md"),{noSsr:!0}),[L,A]=(0,p.useState)(!1),[F,T]=(0,p.useState)(0),[U,W]=(0,p.useState)(0),[R,z]=(0,p.useState)(),[D,G]=(0,p.useState)(),X=(0,p.useMemo)(()=>{var l,n,i,e;return null===(l=null==N?void 0:null===(n=N.account)||void 0===n?void 0:null===(i=n.lab)||void 0===i?void 0:null===(e=i.labBonuses)||void 0===e?void 0:e.find(l=>"My_1st_Chemistry_Set"===l.name))||void 0===l?void 0:l.active},[null==N?void 0:null===(l=N.account)||void 0===l?void 0:l.lab.vials]);(0,p.useEffect)(()=>{var l,n,i,e,o,t;let d=null===(l=Object.keys(null==N?void 0:null===(n=N.account)||void 0===n?void 0:null===(i=n.alchemy)||void 0===i?void 0:i.bubbles))||void 0===l?void 0:l[U];z(null==N?void 0:null===(e=N.account)||void 0===e?void 0:null===(o=e.alchemy)||void 0===o?void 0:null===(t=o.bubbles)||void 0===t?void 0:t[d])},[]);let K=(l,n)=>{var i,e,o,t,d,u;W(n);let a=null===(i=Object.keys(null==N?void 0:null===(e=N.account)||void 0===e?void 0:null===(o=e.alchemy)||void 0===o?void 0:o.bubbles))||void 0===i?void 0:i[n];z(null==N?void 0:null===(t=N.account)||void 0===t?void 0:null===(d=t.alchemy)||void 0===d?void 0:null===(u=d.bubbles)||void 0===u?void 0:u[a]),3===n&&A(!1)},V=l=>{var n;T(null==l?void 0:null===(n=l.target)||void 0===n?void 0:n.value)},Y=w()((l,n)=>{let{value:i}=l.target;G({...D,[n]:i?parseInt(i):0})},100),H=function(l){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,e=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,t=arguments.length>5?arguments[5]:void 0,d=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,a=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,v=arguments.length>10?arguments[10]:void 0,r=arguments.length>11?arguments[11]:void 0,s=arguments.length>12?arguments[12]:void 0;if(o)return e+Math.floor(i/20);{let o=Math.max(.1,1-Math.round(10*(0,f.growth)("decay",t,90,100,!1))/10/100),h=Math.max(.05,1-((0,f.growth)("decay",d,40,70,!1)+(0,f.growth)("add",u,1,0,!1)*n)/100),b=Math.max(.05,1-(0,f.growth)("decay",a,40,12,!1)/100*(0,f.growth)("decayMulti",c,2,50,!1)*(0,f.growth)("decayMulti",s,1.4,30,!1));return Math.min(Math.round((l<15?e*Math.pow(1.35-.3*i/(50+i),i):e*Math.pow(1.37-.28*i/(60+i),i))*o*b*h*Math.max(.1,Math.pow(.75,v))*(r?.9:1)),1e9)}},J=(l,n,i,e,o)=>{var t,d,u,a,c,v,r,s,h,b,x,m,p,g,j,f,Z,y,w,_,C,k,M,B,I,O,S,P,q,E,A;let T=(null==N?void 0:null===(t=N.account)||void 0===t?void 0:null===(d=t.alchemy)||void 0===d?void 0:null===(u=d.cauldrons)||void 0===u?void 0:null===(a=u[e])||void 0===a?void 0:null===(c=a.boosts)||void 0===c?void 0:null===(v=c.cost)||void 0===v?void 0:v.level)||0,U=(null==N?void 0:null===(r=N.account)||void 0===r?void 0:null===(s=r.alchemy)||void 0===s?void 0:null===(h=s.bubbles)||void 0===h?void 0:null===(b=h.kazam)||void 0===b?void 0:b[6].level)||0,W=(null==N?void 0:null===(x=N.account)||void 0===x?void 0:null===(m=x.alchemy)||void 0===m?void 0:null===(p=m.vials)||void 0===p?void 0:null===(g=p[9])||void 0===g?void 0:g.level)||0,R="kazam"!==e&&(null==N?void 0:null===(j=N.account)||void 0===j?void 0:null===(f=j.alchemy)||void 0===f?void 0:null===(Z=f.bubbles)||void 0===Z?void 0:null===(y=Z[e])||void 0===y?void 0:null===(w=y[16])||void 0===w?void 0:w.level)||0,z=(null==N?void 0:null===(_=N.account)||void 0===_?void 0:null===(C=_.alchemy)||void 0===C?void 0:null===(k=C.bubbles)||void 0===k?void 0:null===(M=k[e])||void 0===M?void 0:null===(B=M[14])||void 0===B?void 0:B.level)||0,D=L&&(null==N?void 0:null===(I=N.account)||void 0===I?void 0:null===(O=I.alchemy)||void 0===O?void 0:null===(S=O.bubbles)||void 0===S?void 0:null===(P=S[e])||void 0===P?void 0:null===(q=P[1])||void 0===q?void 0:q.level)||0,G=null===(E=null==N?void 0:null===(A=N.account)||void 0===A?void 0:A.achievements[108])||void 0===E?void 0:E.completed;return H(o,X?2:1,l,n,i,T,U,W,z,D,F||0,G,R)},Q=(l,n,i,e,o)=>{let t=(null==D?void 0:D[l])-n;if(t<=0)return J(n,i,e,o,l);let d=Array(t||0).fill(1);return d.reduce((t,d,u)=>{let a=J(n+(0===u?1:u),i,e,o,l);return t+a},J(n,i,e,o,l))},$=(0,p.useCallback)((l,n,i,e,o)=>Q(l,n,i,e,o),[D,F,L]),ll=l=>{var n,i,e,o,t,d,u,a,c,v,r;let s=3,h=null===(n=null==l?void 0:null===(i=l.lab)||void 0===i?void 0:null===(e=i.labBonuses)||void 0===e?void 0:e.find(l=>"No_Bubble_Left_Behind"===l.name))||void 0===n?void 0:n.active;if(!h)return null;let b=Object.values(null==l?void 0:null===(o=l.alchemy)||void 0===o?void 0:o.bubbles).flatMap((l,n)=>l.map((l,i)=>({...l,tab:n,flatIndex:1e3*n+i}))),x=b.filter(l=>{let{level:n,index:i}=l;return n>=5&&i<15}).sort((l,n)=>l.level-n.level),m=x.sort((l,n)=>n.flatIndex-l.flatIndex).sort((l,n)=>l.level-n.level);(null===(t=null==l?void 0:null===(d=l.lab)||void 0===d?void 0:null===(u=d.jewels)||void 0===u?void 0:u.find(l=>"Pyrite_Rhinestone"===l.name))||void 0===t?void 0:t.active)&&s++;let p=(0,_.YS)(null==l?void 0:null===(a=l.sailing)||void 0===a?void 0:a.artifacts,"Amberite");p&&(s+=(null==p?void 0:p.acquired)===3?(null==p?void 0:p.baseBonus)*3:(null==p?void 0:p.acquired)===2?(null==p?void 0:p.baseBonus)*2:null==p?void 0:p.baseBonus);let g=null==l?void 0:null===(c=l.tasks)||void 0===c?void 0:null===(v=c[2])||void 0===v?void 0:null===(r=v[3])||void 0===r?void 0:r[6];return g>0&&(s+=g),m.slice(0,s)},ln=(0,p.useMemo)(()=>ll(null==N?void 0:N.account),[null==N?void 0:N.account]),li=(l,n)=>{if(!(null==l?void 0:l.includes("decay")))return null;let i=n;return"decayMulti"===l&&(i+=1),i};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.PB,{title:"Idleon Toolbox | Bubbles",description:"Keep track of your bubbles level and requirements with a handy calculator"}),(0,o.jsx)(d.Z,{variant:"h2",textAlign:"center",mb:3,children:"Bubbles"}),(0,o.jsxs)(u.Z,{justifyContent:"center",alignItems:"center",children:[(0,o.jsx)(d.Z,{children:"Next Bubble Upgrades:"}),(0,o.jsx)(u.Z,{direction:"row",flexWrap:"wrap",children:null==ln?void 0:ln.map((l,n)=>{var i,e,t,c,v,r,s,h,b,x,m,p,g,j;let{rawName:y,bubbleName:w,level:_,itemReq:C,index:M}=l,B=null===(i=Object.keys(null==N?void 0:null===(e=N.account)||void 0===e?void 0:null===(t=e.alchemy)||void 0===t?void 0:t.bubbles))||void 0===i?void 0:i[U],I=$(M,_,null==C?void 0:null===(c=C[0])||void 0===c?void 0:c.baseCost,null==C?void 0:null===(v=C[0])||void 0===v?void 0:null===(r=v.name)||void 0===r?void 0:r.includes("Liquid"),B),O=I>1e8&&!(null==C?void 0:null===(s=C[0])||void 0===s?void 0:null===(h=s.name)||void 0===h?void 0:h.includes("Liquid"))&&!(null==C?void 0:null===(b=C[0])||void 0===b?void 0:null===(x=b.name)||void 0===x?void 0:x.includes("Bits"))&&(0,k.a2)(M,I);return(0,o.jsxs)(u.Z,{alignItems:"center",children:[(0,o.jsx)(Z.Z,{title:(0,f.pascalCase)((0,f.cleanUnderscore)(w)),children:(0,o.jsx)("img",{src:"".concat(f.prefix,"data/").concat(y,".png"),alt:""})}),(0,o.jsxs)(u.Z,{direction:"row",alignItems:"center",gap:.5,children:[O>0?(0,o.jsx)(a.Z,{title:(0,o.jsxs)(d.Z,{color:(null==N?void 0:null===(m=N.account)||void 0===m?void 0:null===(p=m.atoms)||void 0===p?void 0:p.particles)>O?"success.light":"",children:[null==N?void 0:null===(g=N.account)||void 0===g?void 0:null===(j=g.atoms)||void 0===j?void 0:j.particles," / ",O]}),children:(0,o.jsx)("img",{width:18,height:18,src:"".concat(f.prefix,"etc/Particle.png"),alt:""})}):null,(0,o.jsx)(d.Z,{variant:"body1",children:_})]})]},"".concat(y,"-").concat(n))})})]}),(0,o.jsxs)(u.Z,{direction:"row",justifyContent:"center",mt:2,gap:2,children:[(null===(n=Object.keys(null==N?void 0:null===(i=N.account)||void 0===i?void 0:null===(e=i.alchemy)||void 0===e?void 0:e.bubbles))||void 0===n?void 0:n[U])!=="kazam"?(0,o.jsx)(c.Z,{control:(0,o.jsx)(v.Z,{checked:L,onChange:()=>A(!L)}),name:"classDiscount",label:"Class Discount"}):null,(0,o.jsx)(r.Z,{value:F,type:"number",inputProps:{min:0,max:8},onChange:l=>V(l),helperText:"".concat(parseFloat((-(25*(Math.pow(.75,F)-1)/.25)).toFixed(1)),"%"),InputProps:{startAdornment:(0,o.jsx)(s.Z,{position:"start",children:(0,o.jsx)("img",{width:36,height:36,src:"".concat(f.prefix,"data/aShopItems10.png"),alt:""})})}}),(0,o.jsx)(h.Z,{sx:{alignItems:"center",display:"flex"},children:(0,o.jsx)(b.Z,{children:(0,o.jsxs)(u.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,o.jsx)(S,{src:"".concat(f.prefix,"etc/Particle.png"),alt:""}),(0,o.jsxs)(d.Z,{children:["Alternate particle upgrades left: ",null==N?void 0:null===(j=N.account)||void 0===j?void 0:null===(y=j.accountOptions)||void 0===y?void 0:y[135]]})]})})})]}),(0,o.jsx)(x.Z,{centered:!0,sx:{marginBottom:3,marginTop:1},variant:E?"fullWidth":"standard",value:U,onChange:K,children:null===(M=Object.keys(null==N?void 0:null===(B=N.account)||void 0===B?void 0:null===(I=B.alchemy)||void 0===I?void 0:I.bubbles))||void 0===M?void 0:M.map((l,n)=>(0,o.jsx)(m.Z,{label:l},"".concat(l,"-").concat(n)))}),(0,o.jsx)(u.Z,{direction:"row",flexWrap:"wrap",gap:3,justifyContent:"center",children:null==R?void 0:R.map((l,n)=>{if(n>24)return null;let{level:i,itemReq:e,rawName:t,bubbleName:c,func:v,x1:s,x2:x}=l,m=(null==D?void 0:D[n])?(null==D?void 0:D[n])<i?i:null==D?void 0:D[n]:i,g=(0,f.growth)(v,m,s,x,!0),j=li(v,s),y=m/(m+x)*100;return(0,o.jsx)(p.Fragment,{children:(0,o.jsx)(h.Z,{sx:{width:330},children:(0,o.jsxs)(b.Z,{children:[(0,o.jsxs)(u.Z,{direction:"row",alignItems:"center",justifyContent:"space-around",gap:2,children:[(0,o.jsxs)(u.Z,{alignItems:"center",children:[(0,o.jsx)(Z.Z,{title:(0,o.jsx)(q,{...l,goalLevel:m}),children:(0,o.jsx)(P,{width:48,height:48,level:i,src:"".concat(f.prefix,"data/").concat(t,".png"),alt:""})}),(0,o.jsxs)(d.Z,{variant:"body1",children:["Lv. ",i]})]}),(0,o.jsx)(r.Z,{type:"number",sx:{width:90},defaultValue:m,onChange:l=>Y(l,n),label:"Goal",variant:"outlined",inputProps:{min:i||0}})]}),(0,o.jsxs)(u.Z,{mt:1.5,direction:"row",justifyContent:"center",gap:3,flexWrap:"wrap",children:[(0,o.jsxs)(u.Z,{gap:2,justifyContent:"center",alignItems:"center",children:[(0,o.jsx)(Z.Z,{title:"Bubble's effect",children:(0,o.jsx)(O,{src:"".concat(f.prefix,"data/SignStar3b.png"),alt:""})}),(0,o.jsx)(Z.Z,{title:j?"".concat(g," is ").concat((0,f.notateNumber)(y),"% of possible hard cap effect of ").concat(j):"",children:(0,o.jsxs)(d.Z,{children:[g," ",j?"(".concat((0,f.notateNumber)(y),"%)"):""]})})]}),null==e?void 0:e.map((l,e)=>{var t,c,v,r,s,h,b;let{rawName:x,name:m,baseCost:p}=l;if("Blank"===x||"ERROR"===x)return null;let g=null===(t=Object.keys(null==N?void 0:null===(c=N.account)||void 0===c?void 0:null===(v=c.alchemy)||void 0===v?void 0:v.bubbles))||void 0===t?void 0:t[U],j=$(n,i,p,null==m?void 0:m.includes("Liquid"),g),y=["sail","bits"].find(l=>x.toLowerCase().includes(l))?"".concat(x,"_x1"):x,w=j>1e8&&!(null==m?void 0:m.includes("Liquid"))&&!(null==m?void 0:m.includes("Bits"))&&(0,k.a2)(n,j);return(0,o.jsxs)(u.Z,{direction:"row",gap:3,children:[w?(0,o.jsxs)(u.Z,{gap:2,alignItems:"center",children:[(0,o.jsx)(a.Z,{title:(0,o.jsxs)(d.Z,{color:(null==N?void 0:null===(r=N.account)||void 0===r?void 0:null===(s=r.atoms)||void 0===s?void 0:s.particles)>w?"success.light":"",children:[null==N?void 0:null===(h=N.account)||void 0===h?void 0:null===(b=h.atoms)||void 0===b?void 0:b.particles," / ",w]}),children:(0,o.jsx)(S,{src:"".concat(f.prefix,"etc/Particle.png"),alt:""})}),(0,o.jsx)(Z.Z,{title:w,children:(0,o.jsx)(d.Z,{children:(0,f.notateNumber)(w,"Big")})})]}):null,(0,o.jsxs)(u.Z,{gap:2,justifyContent:"center",alignItems:"center",children:[(0,o.jsx)(Z.Z,{title:(0,f.cleanUnderscore)(m),children:(0,o.jsx)(S,{src:"".concat(f.prefix,"data/").concat(y,".png"),alt:""})}),(0,o.jsx)(Z.Z,{title:j,children:(0,o.jsx)(d.Z,{children:(0,f.notateNumber)(j,"Big")})})]})]},"".concat(x,"-").concat(m,"-").concat(e))})]})]})})},t+""+c+n)})})]})},O=j.Z.img(M()),S=j.Z.img(B()),P=j.Z.img(I(),l=>{let{level:n}=l;return 0===n?.5:1}),q=l=>{let{goalLevel:n,bubbleName:i,desc:e,func:t,x1:u,x2:a,level:c}=l,v=(0,f.growth)(t,c,u,a,!0),r=(0,f.growth)(t,n,u,a,!0);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{fontWeight:"bold",variant:"h6",children:(0,f.cleanUnderscore)(i)}),(0,o.jsx)(d.Z,{variant:"body1",children:(0,f.cleanUnderscore)(e.replace(/{/,v))}),c!==n?(0,o.jsxs)(d.Z,{sx:{color:c>0?"multi":""},variant:"body1",children:["Goal: +",r]}):null]})};n.default=N}},function(l){l.O(0,[9912,2640,9774,2888,179],function(){return l(l.s=9822)}),_N_E=l.O()}]);