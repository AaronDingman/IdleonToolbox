(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{69822:function(l,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/world-2/bubbles",function(){return n(82004)}])},33583:function(l,i,n){"use strict";var e=n(85893),t=n(67294),o=n(98396),d=n(11703),u=n(40044);i.Z=l=>{let{tabs:i,children:n,onTabChange:a}=l,[c,r]=(0,t.useState)(0),s=(0,o.Z)(l=>l.breakpoints.down("md"),{noSsr:!0}),v=Array.isArray(n)?n:[n];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(d.Z,{centered:!s||s&&i.length<4,scrollButtons:!0,allowScrollButtonsMobile:!0,sx:{marginBottom:3},variant:s&&i.length>4?"scrollable":"standard",value:c,onChange:(l,i)=>{r(i),a&&a(i)},children:null==i?void 0:i.map((l,i)=>(0,e.jsx)(u.Z,{label:l},"".concat(l,"-").concat(i)))}),a?n:null==v?void 0:v.map((l,i)=>i===c?l:null)]})}},82004:function(l,i,n){"use strict";n.r(i);var e=n(82729),t=n(85893),o=n(15861),d=n(67720),u=n(51233),a=n(50480),c=n(69368),r=n(61903),s=n(87109),v=n(66242),h=n(44267),x=n(21023),b=n(67294),m=n(41422),g=n(61599),p=n(39574),j=n(51053),f=n(91296),Z=n.n(f),y=n(64529),w=n(2962),C=n(29222),B=n(87357),_=n(33583);function M(){let l=(0,e._)(["\n  width: 32px;\n  height: 32px;\n  object-fit: contain;\n"]);return M=function(){return l},l}function I(){let l=(0,e._)(["\n  width: 32px;\n  height: 32px;\n"]);return I=function(){return l},l}function k(){let l=(0,e._)(["\n  opacity: ",";\n"]);return k=function(){return l},l}let S=l=>{let{title:i,bubbles:n,lithium:e,accumulatedCost:d,account:a}=l;return(0,t.jsxs)(u.Z,{justifyContent:"center",alignItems:"center",children:[(0,t.jsx)(o.Z,{children:i}),e?(0,t.jsx)(o.Z,{variant:"caption",children:"* 15% chance to be upgraded by lithium (atom collider)"}):null,(0,t.jsx)(u.Z,{direction:"row",flexWrap:"wrap",gap:1,children:null==n?void 0:n.map((l,i)=>{var n,c,r,s,v,h,b,m,g;let{rawName:f,bubbleName:Z,level:y,itemReq:w,index:B,cauldron:_}=l,{singleLevelCost:M,total:I}=d(B,y,null==w?void 0:null===(n=w[0])||void 0===n?void 0:n.baseCost,null==w?void 0:null===(c=w[0])||void 0===c?void 0:null===(r=c.name)||void 0===r?void 0:r.includes("Liquid"),_),k=M>1e8&&!(null==w?void 0:null===(s=w[0])||void 0===s?void 0:null===(v=s.name)||void 0===v?void 0:v.includes("Liquid"))&&!(null==w?void 0:null===(h=w[0])||void 0===h?void 0:null===(b=h.name)||void 0===b?void 0:b.includes("Bits"))&&(0,C.a2)(B,M);return(0,t.jsxs)(u.Z,{alignItems:"center",children:[(0,t.jsx)(j.Z,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{sx:{fontWeight:"bold"},children:(0,p.pascalCase)((0,p.cleanUnderscore)(Z))}),(0,t.jsx)(u.Z,{direction:"row",justifyContent:"center",gap:1,children:null==w?void 0:w.map((l,i)=>{let{rawName:n}=l;if("Blank"===n||"ERROR"===n||n.includes("Liquid"))return null;let e=["sail","bits"].find(l=>n.toLowerCase().includes(l))?"".concat(n,"_x1"):n;return(0,t.jsxs)(u.Z,{alignItems:"center",direction:"row",gap:1,children:[(0,t.jsxs)(u.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(L,{src:"".concat(p.prefix,"data/").concat(e,".png"),alt:""}),(0,t.jsx)(o.Z,{children:(0,p.notateNumber)(I,"Big")})]}),k>0?(0,t.jsxs)(u.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(u.Z,{sx:{width:32,height:32},alignItems:"center",justifyContent:"center",children:(0,t.jsx)("img",{width:18,height:18,src:"".concat(p.prefix,"etc/Particle.png"),alt:""})}),(0,t.jsx)(o.Z,{children:k})]}):null]},"req"+n+i)})})]}),children:(0,t.jsx)("img",{style:{opacity:e?.8:1},width:42,height:42,src:"".concat(p.prefix,"data/").concat(f,".png"),alt:""})}),(0,t.jsxs)(u.Z,{direction:"row",alignItems:"center",gap:.5,children:[k>0?(0,t.jsx)(x.Z,{title:(0,t.jsxs)(o.Z,{color:(null==a?void 0:null===(m=a.atoms)||void 0===m?void 0:m.particles)>k?"success.light":"",children:[Math.floor(null==a?void 0:null===(g=a.atoms)||void 0===g?void 0:g.particles)," / ",k]}),children:(0,t.jsx)("img",{width:18,height:18,src:"".concat(p.prefix,"etc/Particle.png"),alt:""})}):null,(0,t.jsx)(o.Z,{variant:"body1",children:y})]})]},"".concat(f,"-").concat(i,"-").concat(e,"-nblb"))})})]})},N=g.Z.img(M()),L=g.Z.img(I()),q=g.Z.img(k(),l=>{let{level:i}=l;return 0===i?.5:1}),O=l=>{let{goalLevel:i,bubbleName:n,desc:e,func:d,x1:u,x2:a,level:c}=l,r=(0,p.growth)(d,c,u,a,!0),s=(0,p.growth)(d,i,u,a,!0);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{fontWeight:"bold",variant:"h6",children:(0,p.cleanUnderscore)(n)}),(0,t.jsx)(o.Z,{variant:"body1",children:(0,p.cleanUnderscore)(e.replace(/{/,r))}),c!==i?(0,t.jsxs)(o.Z,{sx:{color:c>0?"multi":""},variant:"body1",children:["Goal: +",s]}):null]})};i.default=()=>{var l,i,n,e,g,f,M,I;let{state:k}=(0,b.useContext)(m.I),[P,E]=(0,b.useState)(!1),[A,T]=(0,b.useState)(0),[F,R]=(0,b.useState)(0),[W,z]=(0,b.useState)(),[U,D]=(0,b.useState)(),G=(0,b.useMemo)(()=>{var l,i,n,e;return null===(l=null==k?void 0:null===(i=k.account)||void 0===i?void 0:null===(n=i.lab)||void 0===n?void 0:null===(e=n.labBonuses)||void 0===e?void 0:e.find(l=>"My_1st_Chemistry_Set"===l.name))||void 0===l?void 0:l.active},[null==k?void 0:null===(l=k.account)||void 0===l?void 0:l.lab.vials]);(0,b.useEffect)(()=>{var l,i,n,e,t,o;let d=null===(l=Object.keys(null==k?void 0:null===(i=k.account)||void 0===i?void 0:null===(n=i.alchemy)||void 0===n?void 0:n.bubbles))||void 0===l?void 0:l[F];z(null==k?void 0:null===(e=k.account)||void 0===e?void 0:null===(t=e.alchemy)||void 0===t?void 0:null===(o=t.bubbles)||void 0===o?void 0:o[d])},[]);let V=l=>{var i;T(null==l?void 0:null===(i=l.target)||void 0===i?void 0:i.value)},X=Z()((l,i,n)=>{let{value:e}=l.target;D({...U,[i]:{...(null==U?void 0:U[i])||{},[n]:e?parseInt(e):0}})},100),K=function(l){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,e=arguments.length>4?arguments[4]:void 0,t=arguments.length>5?arguments[5]:void 0,o=(arguments.length>6&&arguments[6],arguments.length>7&&arguments[7],arguments.length>8?arguments[8]:void 0),d=arguments.length>9?arguments[9]:void 0,u=arguments.length>10?arguments[10]:void 0,a=arguments.length>11?arguments[11]:void 0,c=arguments.length>12?arguments[12]:void 0;if(e)return n+Math.floor(i/20);{var r,s,v,h;let e=Math.max(.1,1-Math.round(10*(0,p.growth)("decay",t,90,100,!1))/10/100),x=(0,C.iu)(null==k?void 0:null===(r=k.account)||void 0===r?void 0:null===(s=r.alchemy)||void 0===s?void 0:s.vials,"AlchBubbleCost"),b=(0,C.om)(null==k?void 0:null===(v=k.account)||void 0===v?void 0:null===(h=v.alchemy)||void 0===h?void 0:h.bubbles,"kazam","UNDEVELOPED_COSTS",!1),m=Math.max(.05,1-(0,p.growth)("decay",o,40,12,!1)/100*(0,p.growth)("decayMulti",d,2,50,!1)*(0,p.growth)("decayMulti",c,1.4,30,!1));return Math.min((l<15?n*Math.pow(1.35-.3*i/(50+i),i):n*Math.pow(1.37-.28*i/(60+i),i))*m*e*Math.max(.05,1-(x+b)/100)*Math.max(.1,Math.pow(.75,u))*Math.max(.9,1-.1*a),1e9)}},Y=(l,i,n,e,t)=>{var o,d,u,a,c,r,s,v,h,x,b,m,g,p,j,f,Z,y,w,C,B,_,M,I,S,N,L,q,O,E,T;let F=(null==k?void 0:null===(o=k.account)||void 0===o?void 0:null===(d=o.alchemy)||void 0===d?void 0:null===(u=d.cauldrons)||void 0===u?void 0:null===(a=u[e])||void 0===a?void 0:null===(c=a.boosts)||void 0===c?void 0:null===(r=c.cost)||void 0===r?void 0:r.level)||0,R=(null==k?void 0:null===(s=k.account)||void 0===s?void 0:null===(v=s.alchemy)||void 0===v?void 0:null===(h=v.bubbles)||void 0===h?void 0:null===(x=h.kazam)||void 0===x?void 0:x[6].level)||0,W=(null==k?void 0:null===(b=k.account)||void 0===b?void 0:null===(m=b.alchemy)||void 0===m?void 0:null===(g=m.vials)||void 0===g?void 0:null===(p=g[9])||void 0===p?void 0:p.level)||0,z="kazam"!==e&&(null==k?void 0:null===(j=k.account)||void 0===j?void 0:null===(f=j.alchemy)||void 0===f?void 0:null===(Z=f.bubbles)||void 0===Z?void 0:null===(y=Z[e])||void 0===y?void 0:null===(w=y[16])||void 0===w?void 0:w.level)||0,U=(null==k?void 0:null===(C=k.account)||void 0===C?void 0:null===(B=C.alchemy)||void 0===B?void 0:null===(_=B.bubbles)||void 0===_?void 0:null===(M=_[e])||void 0===M?void 0:null===(I=M[14])||void 0===I?void 0:I.level)||0,D=P&&"kazam"!==e&&(null==k?void 0:null===(S=k.account)||void 0===S?void 0:null===(N=S.alchemy)||void 0===N?void 0:null===(L=N.bubbles)||void 0===L?void 0:null===(q=L[e])||void 0===q?void 0:null===(O=q[1])||void 0===O?void 0:O.level)||0,V=A||0,X=null===(E=null==k?void 0:null===(T=k.account)||void 0===T?void 0:T.achievements[108])||void 0===E?void 0:E.completed;return K(t,G?2:1,l,i,n,F,R,W,U,D,V,X,z)},H=(l,i,n,e,t)=>{var o,d;let u=(null!==(d=null==U?void 0:null===(o=U[t])||void 0===o?void 0:o[l])&&void 0!==d?d:0)-i;if(u<=0){let o=Y(i,n,e,t,l);return{singleLevelCost:o,total:o}}let a=Array(u||0).fill(1),c=0,r=a.reduce((o,d,u)=>{let a=Y(i+(0===u?1:u),n,e,t,l);return e||(c=a),o+a},Y(i,n,e,t,l));return{total:r,singleLevelCost:c}},J=(0,b.useCallback)((l,i,n,e,t)=>H(l,i,n,e,t),[U,A,P]),Q=(l,i,n)=>{var e;let t=Object.values((null==l?void 0:null===(e=l.alchemy)||void 0===e?void 0:e.bubbles)||{}).map(l=>l.filter(l=>{let{level:n,index:e}=l;return n>=5&&e<i}).sort((l,i)=>l.level-i.level)),o=Math.ceil(n/4),d=[];for(let l=0;l<t.length;l++){let i=t[l];d.push(i.slice(0,o))}return d.flat()},$=l=>{var i,n,e,t,o,d,u,a,c,r,s;let v=3,h=null===(i=null==l?void 0:null===(n=l.lab)||void 0===n?void 0:null===(e=n.labBonuses)||void 0===e?void 0:e.find(l=>"No_Bubble_Left_Behind"===l.name))||void 0===i?void 0:i.active;if(!h)return null;let x=Object.values(null==l?void 0:null===(t=l.alchemy)||void 0===t?void 0:t.bubbles).flatMap((l,i)=>l.map((l,n)=>({...l,tab:i,flatIndex:1e3*i+n}))),b=x.filter(l=>{let{level:i,index:n}=l;return i>=5&&n<15}),m=b.sort((l,i)=>i.flatIndex-l.flatIndex).sort((l,i)=>l.level-i.level);(null===(o=null==l?void 0:null===(d=l.lab)||void 0===d?void 0:null===(u=d.jewels)||void 0===u?void 0:u.find(l=>"Pyrite_Rhinestone"===l.name))||void 0===o?void 0:o.active)&&v++;let g=(0,y.YS)(null==l?void 0:null===(a=l.sailing)||void 0===a?void 0:a.artifacts,"Amberite");g&&(v+=(null==g?void 0:g.acquired)===3?(null==g?void 0:g.baseBonus)*3:(null==g?void 0:g.acquired)===2?(null==g?void 0:g.baseBonus)*2:null==g?void 0:g.baseBonus);let p=null==l?void 0:null===(c=l.tasks)||void 0===c?void 0:null===(r=c[2])||void 0===r?void 0:null===(s=r[3])||void 0===s?void 0:s[6];p>0&&(v+=p);let j=m.slice(0,v),f=Q(l,25,v);return{normal:j,atomBubbles:f}},ll=(0,b.useMemo)(()=>$(null==k?void 0:k.account),[null==k?void 0:k.account]),li=(l,i)=>{if(!(null==l?void 0:l.includes("decay")))return null;let n=i;return"decayMulti"===l&&(n+=1),n};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.PB,{title:"Idleon Toolbox | Bubbles",description:"Keep track of your bubbles level and requirements with a handy calculator"}),(0,t.jsx)(o.Z,{variant:"h2",textAlign:"center",mb:3,children:"Bubbles"}),(0,t.jsxs)(B.Z,{sx:{width:"fit-content",margin:"24px auto"},children:[(0,t.jsx)(S,{title:"Next bubble upgrades",bubbles:null==ll?void 0:ll.normal,accumulatedCost:J,account:null==k?void 0:k.account}),(0,t.jsx)(d.Z,{sx:{my:2}}),(0,t.jsx)(S,{lithium:!0,bubbles:null==ll?void 0:ll.atomBubbles,accumulatedCost:J,account:null==k?void 0:k.account})]}),(0,t.jsxs)(u.Z,{direction:"row",justifyContent:"center",mt:2,gap:2,flexWrap:"wrap",children:[(null===(i=Object.keys(null==k?void 0:null===(n=k.account)||void 0===n?void 0:null===(e=n.alchemy)||void 0===e?void 0:e.bubbles))||void 0===i?void 0:i[F])!=="kazam"?(0,t.jsx)(a.Z,{control:(0,t.jsx)(c.Z,{checked:P,onChange:()=>E(!P)}),name:"classDiscount",label:"Class Discount"}):null,(0,t.jsx)(r.Z,{value:A,type:"number",inputProps:{min:0,max:8},onChange:l=>V(l),helperText:"".concat(parseFloat((-(25*(Math.pow(.75,A)-1)/.25)).toFixed(1)),"%"),InputProps:{startAdornment:(0,t.jsx)(s.Z,{position:"start",children:(0,t.jsx)("img",{width:36,height:36,src:"".concat(p.prefix,"data/aShopItems10.png"),alt:""})})}}),(0,t.jsx)(v.Z,{sx:{alignItems:"center",display:"flex"},children:(0,t.jsx)(h.Z,{sx:{"&:last-child":{px:1,py:{xs:1,sm:0}},width:200},children:(0,t.jsxs)(u.Z,{direction:"row",alignItems:"center",justifyContent:"center",gap:1,children:[(0,t.jsx)(L,{src:"".concat(p.prefix,"etc/Particle.png"),alt:""}),(0,t.jsxs)(o.Z,{children:["Alternate particle upgrades left: ",null==k?void 0:null===(g=k.account)||void 0===g?void 0:null===(f=g.accountOptions)||void 0===f?void 0:f[135]]})]})})})]}),(0,t.jsx)(_.Z,{tabs:Object.keys(null==k?void 0:null===(M=k.account)||void 0===M?void 0:null===(I=M.alchemy)||void 0===I?void 0:I.bubbles),onTabChange:l=>{var i,n,e,t,o,d;R(l);let u=null===(i=Object.keys(null==k?void 0:null===(n=k.account)||void 0===n?void 0:null===(e=n.alchemy)||void 0===e?void 0:e.bubbles))||void 0===i?void 0:i[l];z(null==k?void 0:null===(t=k.account)||void 0===t?void 0:null===(o=t.alchemy)||void 0===o?void 0:null===(d=o.bubbles)||void 0===d?void 0:d[u]),3===l&&E(!1)},children:(0,t.jsx)(u.Z,{direction:"row",flexWrap:"wrap",gap:3,justifyContent:"center",children:null==W?void 0:W.map((l,i)=>{var n,e,d;if(i>24)return null;let{level:a,itemReq:c,rawName:s,bubbleName:m,func:g,x1:f,x2:Z,cauldron:y}=l,w=(null==U?void 0:null===(n=U[y])||void 0===n?void 0:n[i])?(null==U?void 0:null===(e=U[y])||void 0===e?void 0:e[i])<a?a:null==U?void 0:null===(d=U[y])||void 0===d?void 0:d[i]:a,B=(0,p.growth)(g,w,f,Z,!0),_=li(g,f),M=w/(w+Z)*100;return(0,t.jsx)(b.Fragment,{children:(0,t.jsx)(v.Z,{sx:{width:330},children:(0,t.jsxs)(h.Z,{children:[(0,t.jsxs)(u.Z,{direction:"row",alignItems:"center",justifyContent:"space-around",gap:2,children:[(0,t.jsxs)(u.Z,{alignItems:"center",children:[(0,t.jsx)(j.Z,{title:(0,t.jsx)(O,{...l,goalLevel:w}),children:(0,t.jsx)(q,{width:48,height:48,level:a,src:"".concat(p.prefix,"data/").concat(s,".png"),alt:""})}),(0,t.jsxs)(o.Z,{variant:"body1",children:["Lv. ",a]})]}),(0,t.jsx)(r.Z,{type:"number",sx:{width:90},defaultValue:w,onChange:l=>X(l,y,i),label:"Goal",variant:"outlined",inputProps:{min:a||0}})]}),(0,t.jsxs)(u.Z,{mt:1.5,direction:"row",justifyContent:"center",gap:3,flexWrap:"wrap",children:[(0,t.jsxs)(u.Z,{gap:2,justifyContent:"center",alignItems:"center",children:[(0,t.jsx)(j.Z,{title:"Bubble's effect",children:(0,t.jsx)(N,{src:"".concat(p.prefix,"data/SignStar3b.png"),alt:""})}),(0,t.jsx)(j.Z,{title:_?"".concat(B," is ").concat((0,p.notateNumber)(M),"% of possible hard cap effect of ").concat(_):"",children:(0,t.jsxs)(o.Z,{children:[B," ",_?"(".concat((0,p.notateNumber)(M),"%)"):""]})})]}),null==c?void 0:c.map((l,n)=>{var e,d,c,r,s,v,h,b,m,g,f,Z,w,B,_,M;let I,{rawName:S,name:N,baseCost:q}=l;if("Blank"===S||"ERROR"===S)return null;let{singleLevelCost:O,total:P}=J(i,a,q,null==N?void 0:N.includes("Liquid"),y),E=["sail","bits"].find(l=>S.toLowerCase().includes(l))?"".concat(S,"_x1"):S,A=O>1e8&&!(null==N?void 0:N.includes("Liquid"))&&!(null==N?void 0:N.includes("Bits"))&&(0,C.a2)(i,O);if(S.includes("Liquid")){let l={Liquid1:0,Liquid2:1,Liquid3:2,Liquid4:3};I=null==k?void 0:null===(s=k.account)||void 0===s?void 0:null===(v=s.alchemy)||void 0===v?void 0:null===(h=v.liquids)||void 0===h?void 0:h[null==l?void 0:l[S]]}else I=S.includes("Bits")?null==k?void 0:null===(b=k.account)||void 0===b?void 0:null===(m=b.gaming)||void 0===m?void 0:m.bits:S.includes("Sail")?null===(g=null==k?void 0:null===(f=k.account)||void 0===f?void 0:null===(Z=f.sailing)||void 0===Z?void 0:null===(w=Z.lootPile)||void 0===w?void 0:w.find(l=>{let{rawName:i}=l;return i===S.replace("SailTr","SailT")}))||void 0===g?void 0:g.amount:null===(B=null==k?void 0:null===(_=k.account)||void 0===_?void 0:null===(M=_.storage)||void 0===M?void 0:M.find(l=>{let{rawName:i}=l;return i===S}))||void 0===B?void 0:B.amount;return(0,t.jsxs)(u.Z,{direction:"row",gap:3,children:[A?(0,t.jsxs)(u.Z,{gap:2,alignItems:"center",children:[(0,t.jsx)(x.Z,{title:(0,t.jsxs)(o.Z,{color:(null==k?void 0:null===(e=k.account)||void 0===e?void 0:null===(d=e.atoms)||void 0===d?void 0:d.particles)>A?"success.light":"",children:[Math.floor(null==k?void 0:null===(c=k.account)||void 0===c?void 0:null===(r=c.atoms)||void 0===r?void 0:r.particles)," / ",A]}),children:(0,t.jsx)(L,{src:"".concat(p.prefix,"etc/Particle.png"),alt:""})}),(0,t.jsx)(j.Z,{title:A,children:(0,t.jsx)(o.Z,{children:(0,p.notateNumber)(A,"Big")})})]}):null,(0,t.jsxs)(u.Z,{gap:2,justifyContent:"center",alignItems:"center",children:[(0,t.jsx)(j.Z,{title:(0,p.cleanUnderscore)(N),children:(0,t.jsx)(L,{src:"".concat(p.prefix,"data/").concat(E,".png"),alt:""})}),(0,t.jsx)(x.Z,{title:(0,t.jsxs)(o.Z,{color:I>=P?"success.light":"",children:[(0,p.notateNumber)(I,"Big")," / ",(0,p.notateNumber)(P,"Big")]}),children:(0,t.jsx)(o.Z,{children:(0,p.notateNumber)(P,"Big")})})]})]},"".concat(S,"-").concat(N,"-").concat(n))})]})]})})},s+""+m+i)})})})]})}}},function(l){l.O(0,[2202,2471,9774,2888,179],function(){return l(l.s=69822)}),_N_E=l.O()}]);