(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{75503:function(e,n,l){"use strict";var s=l(64836);n.Z=void 0;var i=s(l(64938)),t=l(85893),r=(0,i.default)((0,t.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");n.Z=r},90813:function(e,n,l){"use strict";var s=l(64836);n.Z=void 0;var i=s(l(64938)),t=l(85893),r=(0,i.default)((0,t.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");n.Z=r},1849:function(e,n,l){"use strict";var s=l(64836);n.Z=void 0;var i=s(l(64938)),t=l(85893),r=(0,i.default)((0,t.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");n.Z=r},51060:function(e,n,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guilds",function(){return l(98915)}])},98915:function(e,n,l){"use strict";l.r(n);var s=l(85893),i=l(67294),t=l(52988),r=l(15861),d=l(51233),o=l(98456),a=l(72882),u=l(90629),c=l(7906),x=l(53184),h=l(53816),j=l(53252),Z=l(295),p=l(81458),m=l(57922),v=l(2962),g=l(39574),f=l(93946),b=l(75503),w=l(90813),y=l(87357),G=l(61436),S=l(40929),I=l(1849),_=l(51053),C=l(30210);n.default=()=>{let[e,n]=(0,i.useState)({func:null}),[l,L]=(0,i.useState)(null),[N,T]=(0,i.useState)(null),k=(0,g.tryToParse)(sessionStorage.getItem("snapshotDate")),E=(0,i.useCallback)(e=>{var n,l;return null===(n=null===(l=null==e?void 0:e.sort((e,n)=>(null==n?void 0:n.totalGp)-(null==e?void 0:e.totalGp)))||void 0===l?void 0:l.slice(0,100))||void 0===n?void 0:n.map(e=>{var n,l;let s=Object.values((null==e?void 0:e.m)||{}),i=null==s?void 0:s.find(e=>{let{g:n}=e;return 0===n}),t=null===(n=null===(l=null==s?void 0:s.sort((e,n)=>(null==n?void 0:n.e)-(null==e?void 0:e.e)))||void 0===l?void 0:l.slice(0,5))||void 0===n?void 0:n.map(e=>{let{a:n,e:l}=e;return{name:n,gpEarned:l}});return{guildIcon:null==e?void 0:e.guildIcon,guildName:null==e?void 0:e.guildName,totalGp:null==e?void 0:e.totalGp,points:null==e?void 0:e.p,membersCount:null==s?void 0:s.length,leader:i,topContributors:t}})},[]),z=e=>{let n=E(e);sessionStorage.setItem("guildsLeaderboard",JSON.stringify(n)),sessionStorage.setItem("snapshotDate",new Date().getTime()),L(n)},D=async()=>{let e=(0,t.n6)(z);n({func:e})};return(0,i.useEffect)(()=>{let n=(0,g.getDuration)(new Date,k);return console.log(n),(null==n?void 0:n.days)>0||(null==n?void 0:n.hours)>0||(null==n?void 0:n.minutes)>=15||!k?setTimeout(()=>D(),3e3):L((0,g.tryToParse)(sessionStorage.getItem("guildsLeaderboard"))),()=>{e&&"function"==typeof(null==e?void 0:e.func)&&(null==e||e.func())}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.PB,{title:"Idleon Toolbox | Guilds",description:"Top guilds in idleon"}),(0,s.jsx)(r.Z,{variant:"h2",children:"Guilds Leaderboard"}),(0,s.jsxs)(d.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,s.jsxs)(d.Z,{gap:2,direction:"row",children:["Last Updated: ",l?(0,G.Z)(k)?(0,S.Z)(k,"dd/MM/yyyy HH:mm:ss"):null:(0,s.jsx)(o.Z,{size:"22px",disableShrink:!0})]}),(0,s.jsx)(_.Z,{title:"Reload guild data",children:(0,s.jsx)("span",{children:(0,s.jsx)(f.Z,{disabled:!l,onClick:()=>{if(!l)return null;L(null),sessionStorage.removeItem("guildsLeaderboard"),sessionStorage.removeItem("snapshotDate"),D()},children:(0,s.jsx)(I.Z,{})})})})]}),(0,s.jsx)(r.Z,{variant:"caption",component:"div",sx:{mb:2},children:"* Updates every 15 minutes"}),(0,s.jsx)(a.Z,{component:u.Z,children:(0,s.jsxs)(c.Z,{size:"small",children:[(0,s.jsx)(x.Z,{children:(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(j.Z,{sx:{width:"1px"}}),(0,s.jsx)(j.Z,{sx:{width:30}}),(0,s.jsx)(j.Z,{children:"Guild Name"}),(0,s.jsx)(j.Z,{children:"Guild Points"}),(0,s.jsx)(j.Z,{children:"Guild Leader"}),(0,s.jsx)(j.Z,{children:"Guild Level"}),(0,s.jsx)(j.Z,{children:"Members Count"})]})}),(0,s.jsxs)(Z.Z,{children:[l?null:(0,s.jsx)(h.Z,{children:(0,s.jsx)(j.Z,{colSpan:7,align:"center",children:(0,s.jsxs)(d.Z,{alignItems:"center",gap:2,children:[(0,s.jsx)(r.Z,{children:"Gathering guild info"}),(0,s.jsx)(p.Z,{sx:{width:300}})]})})}),null==l?void 0:l.map((e,n)=>{let{totalGp:l,leader:t,membersCount:o,guildIcon:a,guildName:u,topContributors:p}=e,v=(0,C.J2)(l);return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsxs)(h.Z,{sx:{"& > *":{borderBottom:"unset"}},children:[(0,s.jsx)(j.Z,{sx:{p:"4px"},children:(0,s.jsx)(f.Z,{"aria-label":"expand row",size:"small",onClick:()=>T(N===n?null:n),children:N===n?(0,s.jsx)(w.Z,{}):(0,s.jsx)(b.Z,{})})}),(0,s.jsx)(j.Z,{sx:{p:1,textAlign:"center"},children:n+1}),(0,s.jsx)(j.Z,{children:(0,s.jsxs)(d.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,s.jsx)("img",{src:"".concat(g.prefix,"data/G2icon").concat(a,".png"),style:{width:24},alt:"guild-icon"}),(0,s.jsx)(r.Z,{children:u})]})}),(0,s.jsx)(j.Z,{children:(0,g.numberWithCommas)(l)}),(0,s.jsx)(j.Z,{children:null==t?void 0:t.a}),(0,s.jsx)(j.Z,{children:v}),(0,s.jsxs)(j.Z,{children:[o," / ",30+4*v]})]}),(0,s.jsx)(h.Z,{sx:{"& > *":{borderBottom:"unset"}},children:(0,s.jsx)(j.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:7,children:(0,s.jsx)(m.Z,{in:N===n,timeout:"auto",unmountOnExit:!0,children:(0,s.jsxs)(y.Z,{sx:{p:1},children:[(0,s.jsx)(r.Z,{variant:"h6",sx:{mb:1},children:"Top Contributors"}),(0,s.jsxs)(c.Z,{size:"small",sx:{width:300},children:[(0,s.jsx)(x.Z,{children:(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(j.Z,{children:"Name"}),(0,s.jsx)(j.Z,{children:"Gp"})]})}),(0,s.jsx)(Z.Z,{children:null==p?void 0:p.map(e=>{let{name:n,gpEarned:l}=e;return(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(j.Z,{children:n}),(0,s.jsx)(j.Z,{children:(0,g.numberWithCommas)(l)})]},"top-3-".concat(n))})})]})]})})})})]},"row"+n)})]})]})})]})}}},function(e){e.O(0,[2307,9774,2888,179],function(){return e(e.s=51060)}),_N_E=e.O()}]);